"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[648],{2326:(e,t,r)=>{r.r(t),r.d(t,{default:()=>se});var n=r(1120),o=r(9869),i=r(5477),l=r(1749),a=r(9762),u=r.n(a),c=r(7294);function s(e,t,r,n){function o(e){var t=(0|e).toString(16);return 1==t.length?"0"+t:t}return"#".concat(o(255*e)).concat(o(255*t)).concat(o(255*r))}function f(e,t,r){return[e/255,t/255,r/255,1]}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}f(178,76,229),f(80,200,120),f(175,237,152),f(246,240,224),f(255,223,0),f(255,209,219),f(204,141,205),f(255,192,203),f(255,20,147),f(255,0,255),f(255,255,0),f(127,0,0),f(0,255,255),f(255,0,0),f(0,255,0),f(1,1,1),f(127,127,127),f(255,255,255),f(213,172,119),f(0,0,255),f(152,251,237),f(173,216,230),f(204,204,255),f(137,207,240),f(100,149,237),f(7,42,108),f(245,118,26),f(253,103,58),f(255,140,0),f(227,74,39),f(255,241,215),f(64,0,255);var g=function(){function e(t){var r,n;v(this,e),this.canvas=t,this.gl=null!==(r=null!==(n=t.getContext("webgl"))&&void 0!==n?n:t.getContext("experimental-webgl"))&&void 0!==r?r:function(){throw new Error("")}()}return p(e,[{key:"ref",value:function(){return this.gl}},{key:"createBuffer",value:function(){var e=this.gl.createBuffer();if(null==e)throw new Error("");return new b(this.gl,e)}},{key:"createProgram",value:function(e,t){var r=this.gl.createProgram();if(null==r)throw new Error("");var n=this.createShader(e,this.gl.VERTEX_SHADER);this.gl.attachShader(r,n),this.gl.deleteShader(n);var o=this.createShader("precision highp float;\n\n"+t,this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(r,o),this.gl.deleteShader(o),this.gl.linkProgram(r),!this.gl.getProgramParameter(r,this.gl.LINK_STATUS))throw new Error("VALIDATE_STATUS: ".concat(this.gl.getProgramParameter(r,this.gl.VALIDATE_STATUS)," ERROR: ").concat(this.gl.getError()));return new m(this.gl,r)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT),this.gl.clearColor(0,0,0,1)}},{key:"render",value:function(e,t){var r=this,n=e.ref();this.gl.useProgram(n),Object.keys(t).forEach((function(e){var o=t[e],i=r.gl.getUniformLocation(n,e);if(i)if(Array.isArray(o))switch(o.length){case 2:r.gl.uniform2f(i,o[0],o[1]);break;case 3:r.gl.uniform3f(i,o[0],o[1],o[2]);break;case 4:r.gl.uniform4f(i,o[0],o[1],o[2],o[3])}else r.gl.uniform1f(i,o)})),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}},{key:"createShader",value:function(e,t){var r=this.gl.createShader(t);if(null==r)throw new Error("");if(this.gl.shaderSource(r,e),this.gl.compileShader(r),!this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS))throw new Error((t==this.gl.VERTEX_SHADER?"VERTEX":"FRAGMENT")+" SHADER:\n"+this.gl.getShaderInfoLog(r));return r}},{key:"width",value:function(){return this.canvas.clientWidth}},{key:"height",value:function(){return this.canvas.clientHeight}}]),e}(),m=function(){function e(t,r){v(this,e),h(this,"destroyed",!1),this.gl=t,this.program=r}return p(e,[{key:"ref",value:function(){return this.program}},{key:"ok",value:function(){return!this.destroyed}},{key:"destroy",value:function(){this.gl.deleteProgram(this.program),this.destroyed=!0}}]),e}(),b=function(){function e(t,r){v(this,e),h(this,"destroyed",!1),this.gl=t,this.buffer=r}return p(e,[{key:"ref",value:function(){return this.buffer}},{key:"ok",value:function(){return!this.destroyed}},{key:"bind",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(0,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(0)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.buffer),this.destroyed=!0}}]),e}();function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){O(i,n,o,l,a,"next",e)}function a(e){O(i,n,o,l,a,"throw",e)}l(void 0)}))}}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t,r){return C.apply(this,arguments)}function C(){return(C=x(regeneratorRuntime.mark((function e(t,r,n){var o,i,l,a,u,c,s,f,d,h,v,y,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=w(t,2),i=o[0],l=o[1],(a=document.createElement("canvas")).width=i,a.height=l,u=new g(a),c=fetch(r).then((function(e){return e.text()})),s=fetch(n).then((function(e){return e.text()})),e.next=9,Promise.all([c,s]);case 9:return f=e.sent,d=w(f,2),h=d[0],v=d[1],(y=u.createBuffer()).ok()||console.error("failed to create buffer"),(p=u.createProgram(h,v)).ok()||console.error("failed to create program"),e.abrupt("return",[y,p,a]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return((1048320&function(e,t){t|=0;var r=function(e,t){return t^t>>e};return t*=3039394381,t=r(8,t+=e=e),t=function(e,t){return t^t<<8}(0,t+=1759714724),r(8,t*=458671337)}(e,t))>>8)/4095}var R=["x","y","value"];function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){var r,n,o,i,l,a,u,c,f,d,h,v,y,p,g,m,b=t.x,w=t.y,A=t.value,O=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,R),x=[e.width,e.height],S=Math.min(Math.max(12,Math.min.apply(Math,x)/12.5),256)*(null!==(r=null===(n=O.style)||void 0===n?void 0:n.size)&&void 0!==r?r:1),k=e.getContext("2d");k.save(),k.textBaseline="top",k.globalAlpha=k.globalAlpha*(null!==(o=null===(i=O.style)||void 0===i?void 0:i.alpha)&&void 0!==o?o:1),k.font="".concat(S,"px ").concat((null!==(l=null===(a=O.style)||void 0===a?void 0:a.fonts)&&void 0!==l?l:["Uni Sans Heavy","Roboto","Helvetica","Arial","sans-serif"]).join(", "));var E=k.measureText(A),j=b*e.width-E.width/2;j<10?(j=10,k.textAlign="left"):j+E.width>=e.width-10?(j=e.width-E.width-10,k.textAlign="left"):(k.textAlign="center",j=b*e.width);var C=w*e.height-S/2;C<10?C=10:C+S/2>=e.height-S-10&&(C=e.height-S-10);var P=s.apply(void 0,D(null!==(u=null===(c=O.style)||void 0===c||null===(f=c.fillColor)||void 0===f?void 0:f.slice(0,3))&&void 0!==u?u:[1,1,1])),T=s.apply(void 0,D(null!==(d=null===(h=O.style)||void 0===h||null===(v=h.strokeColor)||void 0===v?void 0:v.slice(0,3))&&void 0!==d?d:[1/256,1/256,1/256]));k.lineWidth=null!==(y=null===(p=O.style)||void 0===p?void 0:p.lineWidth)&&void 0!==y?y:Math.max(null!==(g=null===(m=O.style)||void 0===m?void 0:m.size)&&void 0!==g?g:1,1),k.fillStyle=P,T!=P&&(k.strokeStyle=T),k.fillText(A,j,C),T!=P&&k.strokeText(A,j,C),k.restore()}function M(e,t,r){var n,o,i,l,a,u,c,s,f,d,h,v,y,p,g,m,b,w,A,O,x,S,k,E,j,C,P,R,T,F,D,U,M=null!==(n=r.stageLengths)&&void 0!==n?n:[15,15,15,15],_=M.reduce((function(e,t){return e+t})),B=t%_,Y=null!=r.align?r.align[null!==(o=(t/_|0)%r.align.length)&&void 0!==o?o:1]:"center",X=r.text[(t/_|0)%r.text.length],W=.5+(null!==(i=null===(l=r.style)||void 0===l?void 0:l.offsetX)&&void 0!==i?i:0),$=.5+(null!==(a=null===(u=r.style)||void 0===u?void 0:u.offsetY)&&void 0!==a?a:0);switch(Y){case"left":W=.05+(null!==(c=null===(s=r.style)||void 0===s?void 0:s.offsetX)&&void 0!==c?c:0);break;case"right":W=.95+(null!==(f=null===(d=r.style)||void 0===d?void 0:d.offsetX)&&void 0!==f?f:0);break;case"center":$=.5+(null!==(h=null===(v=r.style)||void 0===v?void 0:v.offsetY)&&void 0!==h?h:0);break;case"top":$=.05+(null!==(y=null===(p=r.style)||void 0===p?void 0:p.offsetY)&&void 0!==y?y:0);break;case"bottom":$=.95+(null!==(g=null===(m=r.style)||void 0===m?void 0:m.offsetY)&&void 0!==g?g:0);break;case"top-left":W=.05+(null!==(b=null===(w=r.style)||void 0===w?void 0:w.offsetX)&&void 0!==b?b:0),$=.05+(null!==(A=null===(O=r.style)||void 0===O?void 0:O.offsetY)&&void 0!==A?A:0);break;case"top-right":W=.95+(null!==(x=null===(S=r.style)||void 0===S?void 0:S.offsetX)&&void 0!==x?x:0),$=.05+(null!==(k=null===(E=r.style)||void 0===E?void 0:E.offsetY)&&void 0!==k?k:0);break;case"bottom-left":W=.05+(null!==(j=null===(C=r.style)||void 0===C?void 0:C.offsetX)&&void 0!==j?j:0),$=.95+(null!==(P=null===(R=r.style)||void 0===R?void 0:R.offsetY)&&void 0!==P?P:0);break;case"bottom-right":W=.95+(null!==(T=null===(F=r.style)||void 0===F?void 0:F.offsetX)&&void 0!==T?T:0),$=.95+(null!==(D=null===(U=r.style)||void 0===U?void 0:U.offsetY)&&void 0!==D?D:0)}if(B<M[0]);else if(M[0]>0&&B<M[0]+M[1]){var z,N,H,Z,V,q,G,K;L(e,{x:W,y:$,value:X,style:I(I(I({lineWidth:null===(z=r.style)||void 0===z?void 0:z.lineWidth,alpha:(null!==(N=null===(H=r.style)||void 0===H?void 0:H.fillColor)&&void 0!==N?N:[0,0,0,1])[3]*(B-M[0])/M[1]},null!=(null===(Z=r.style)||void 0===Z?void 0:Z.fillColor)?{fillColor:r.style.fillColor}:{}),null!=(null===(V=r.style)||void 0===V?void 0:V.strokeColor)?{strokeColor:r.style.strokeColor}:{}),{},{bold:null===(q=r.style)||void 0===q?void 0:q.bold,size:null!==(G=null===(K=r.style)||void 0===K?void 0:K.size)&&void 0!==G?G:2})})}else if(M[1]>0&&B<M[0]+M[1]+M[2]){var J,Q,ee,te,re,ne,oe,ie;L(e,{x:W,y:$,value:X,style:I(I(I({lineWidth:null===(J=r.style)||void 0===J?void 0:J.lineWidth,alpha:(null!==(Q=null===(ee=r.style)||void 0===ee?void 0:ee.fillColor)&&void 0!==Q?Q:[0,0,0,1])[3]},null!=(null===(te=r.style)||void 0===te?void 0:te.fillColor)?{fillColor:r.style.fillColor}:{}),null!=(null===(re=r.style)||void 0===re?void 0:re.strokeColor)?{strokeColor:r.style.strokeColor}:{}),{},{bold:null===(ne=r.style)||void 0===ne?void 0:ne.bold,size:null!==(oe=null===(ie=r.style)||void 0===ie?void 0:ie.size)&&void 0!==oe?oe:2})})}else if(M[2]>0&&B<M[0]+M[1]+M[2]+M[3]){var le,ae,ue,ce,se,fe,de,he,ve=B-(M[0]+M[1]+ +M[2]);L(e,{x:W,y:$,value:X,style:I(I(I({lineWidth:null===(le=r.style)||void 0===le?void 0:le.lineWidth,alpha:(null!==(ae=null===(ue=r.style)||void 0===ue?void 0:ue.fillColor)&&void 0!==ae?ae:[0,0,0,1])[3]*((M[3]-ve)/M[3])},null!=(null===(ce=r.style)||void 0===ce?void 0:ce.fillColor)?{fillColor:r.style.fillColor}:{}),null!=(null===(se=r.style)||void 0===se?void 0:se.strokeColor)?{strokeColor:r.style.strokeColor}:{}),{},{bold:null===(fe=r.style)||void 0===fe?void 0:fe.bold,size:null!==(de=null===(he=r.style)||void 0===he?void 0:he.size)&&void 0!==de?de:2})})}}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function H(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){N(i,n,o,l,a,"next",e)}function a(e){N(i,n,o,l,a,"throw",e)}l(void 0)}))}}function Z(e,t,r,n,o){switch(t.type){case"fill":return function(e,t){var r,n=e.getContext("2d");n.save(),n.fillStyle=s.apply(void 0,function(e){if(Array.isArray(e))return d(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n.fillRect(0,0,e.width,e.height),n.restore()}(e,t.color);case"opacity":return function(e,i,l){var a=e.getContext("2d");a.save(),a.globalAlpha=a.globalAlpha*i,function(e){t.children.forEach((function(t){return Z(e,t,r,n,o)}))}(e),a.restore()}(e,t.value);case"frame-offset":return t.children.forEach((function(i){return Z(e,i,r+t.by,n,o)}));case"clip-circle":return function(e,i,l,a){var u=document.createElement("canvas");u.width=l*Math.min(e.width,e.height),u.height=u.width,function(e){t.children.forEach((function(t){return Z(e,t,r,n,o)}))}(u);var c=(i[0]+1)*(e.width/2),s=(i[1]+1)*(e.height/2),f=u.width/2,d=e.getContext("2d");d.save(),d.beginPath(),d.arc(c,s,f,0,2*Math.PI,!0),d.closePath(),d.clip(),d.drawImage(u,c-f,s-f,u.width,u.height),d.restore()}(e,t.origin,t.radius);case"pattern":return function(e,t,r){var n,o,i,l=r.shader[2];l.width=e.width,l.height=e.height;var a=new g(l),u=k({time:t/(null!==(n=r.fps)&&void 0!==n?n:60),rotation:1,direction:1,branchCount:4,resolution:[l.width,l.height],aspect:l.width>l.height?[l.width/l.height,1]:[1,l.height/l.width]},k({bgColor:[0,0,0,0],fgColor:[1,1,1,1],pulseColor:[178/255,76/255,229/255,1],dimColor:[0,0,0,0],extraColor:[0,0,0,0]},null!==(o=r.colors)&&void 0!==o?o:{}));a.clear(),r.shader[0].bind(),a.render(r.shader[1],u),null===(i=e.getContext("2d"))||void 0===i||i.drawImage(l,0,0,e.width,e.height)}(e,r,{shader:n.shaders[t.pattern],colors:{bgColor:t.colors.bg,fgColor:t.colors.fg,dimColor:t.colors.dim,extraColor:t.colors.extra,pulseColor:t.colors.pulse},fps:null==o?void 0:o.fps});case"text":return L(e,{value:t.value,x:t.coords[0],y:t.coords[1],style:t.style});case"flash-text":return M(e,r,{text:t.text,align:t.align,stageLengths:t.stages,style:t.style});case"subliminal":return function(e,t,r){var n,o,i=null!==(n=r.stageLengths)&&void 0!==n?n:[5,2,3,2],l=t/i.reduce((function(e,t){return e+t}))|0,a=function(e){var t=0,r=0;if(0===e.length)return t;for(r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}(r.text.reduce((function(e,t){return"".concat(e,":").concat(t)}))),u=P(a,2*l)-.5,c=P(a,2*l+1)-.5;M(e,t,{text:r.text,align:["center"],stageLengths:i,style:I(I({},null!==(o=r.style)&&void 0!==o?o:{}),{},{offsetX:u,offsetY:c})})}(e,r,{text:t.text,stageLengths:t.stages,style:t.style});case"flash-fill":return function(e,t,r){var n,o,i,l=null!==(n=r.stageLengths)&&void 0!==n?n:[15,15,15,15],a=t%l.reduce((function(e,t){return e+t})),u=s.apply(void 0,D(null!==(o=null===(i=r.style)||void 0===i?void 0:i.backgroundColor)&&void 0!==o?o:[1,1,1,1])),c=e.getContext("2d");if(a<l[0]);else if(l[0]>0&&a<l[0]+l[1])c.save(),c.globalAlpha=(a-l[1])/l[1],c.fillStyle=u,c.fillRect(0,0,e.width,e.height),c.restore();else if(l[1]>0&&a<l[0]+l[1]+l[2])c.save(),c.globalAlpha=1,c.fillStyle=u,c.fillRect(0,0,e.width,e.height),c.restore();else if(l[2]>0&&a<l[0]+l[1]+l[2]+l[3]){var f=a-(l[0]+l[1]+ +l[2]);c.save(),c.globalAlpha=(l[3]-f)/l[3],c.fillStyle=u,c.fillRect(0,0,e.width,e.height),c.restore()}}(e,r,{stageLengths:t.stages,style:{backgroundColor:t.color}})}}function V(e,t,r,n,o){var i;(i=e).getContext("2d").clearRect(0,0,i.width,i.height),t.forEach((function(t){return Z(e,t,r,n,o)}))}function q(){return(q=H(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return(o=H(regeneratorRuntime.mark((function e(t,r){var n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=H(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map(function(){var e=H(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,j(t,"shaders/spiral.vs","shaders/".concat(r,".fs"));case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,e.abrupt("return",n.reduce((function(e,t){var r=X(t,2),n=r[0],o=r[1];return B(B({},e),{},Y({},n,o))}),{}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},o=function(e,t){return i.apply(this,arguments)},n=function(e){return e.reduce((function(e,t){switch(t.type){case"clip-circle":case"frame-offset":case"opacity":return[].concat(W(e),W(n(t.children)));case"pattern":return[].concat(W(e),[t.pattern]);default:return e}}),[])},e.abrupt("return",o(t,n(r)));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},n=function(e,t){return o.apply(this,arguments)},e.next=4,n(t,r);case 4:return e.t0=e.sent,e.abrupt("return",{shaders:e.t0});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=r(6912);function K(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var te;function re(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function ne(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){re(i,n,o,l,a,"next",e)}function a(e){re(i,n,o,l,a,"throw",e)}l(void 0)}))}}function oe(e,t){return new Promise((function(r,n){null!=t&&t.active?requestAnimationFrame(ne(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:r();case 4:case"end":return t.stop()}}),t)})))):setTimeout(ne(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:r();case 4:case"end":return t.stop()}}),t)}))),0)}))}function ie(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"}(te||(te={}));var ue=(0,n.Z)({root:{"& canvas":{objectFit:"cover",width:"100%",height:"100vh"}},spinner:{position:"fixed",top:"calc(50% - 180px)",left:0,right:0,margin:"0 auto"}},{name:"App"}),ce=function(e){var t=e.className,r=e.status;return c.createElement(o.Z,{open:"no"!==r.current},c.createElement(i.Z,{className:t,size:360,color:"rendering"===r.current?"primary":"secondary",variant:"determinate",value:("rendering"===r.current?0:50)+("no"!==r.current?50*r.progress:0)}))};function se(){var e,t,r,n,o,i,a,s,f,d,h,v,y,p,g,m=le((e=Q((0,G.xT)("pattern",[]),2),t=e[0],r=e[1],n=Q((0,G.$w)("speed",1),2),o=n[0],i=n[1],a=Q((0,G.$w)("fps",60),2),s=a[0],f=a[1],d=Q((0,G.$w)("total-frames",s),2),h=d[0],v=d[1],y=Q((0,G.xT)("screen",[1280,720]),2),p=y[0],g=y[1],[c.useMemo((function(){return{pattern:t,speed:o,fps:s,totalFrames:h,resolution:p}}),[t,o,s,h,p]),function(e){r(e.pattern),i(e.speed),f(e.fps),v(e.totalFrames),g(e.resolution)}]),2),b=m[0],w=m[1],A=function(e){var t=Q(c.useState({shaders:{}}),2),r=t[0],n=t[1];return c.useEffect((function(){var t=!1;return function(e,t){return q.apply(this,arguments)}(e.resolution,e.pattern).then((function(e){t||n(e)})),function(){t=!0}}),[e]),r}(b);c.useEffect((function(){w(b)}),[b]);var O,x,S=c.useRef(null),k=le(c.useState({current:"no"}),2),E=k[0],j=k[1];(function(e,t){var r=t.enable,n=t.def,o=t.assets,i=c.useRef(performance.now()),l=c.useRef(0);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=c.useRef(e),n=c.useRef(0);c.useEffect((function(){r.current=e}),[e].concat(K(t))),c.useEffect((function(){var e=!1,t=0;return t=requestAnimationFrame((function o(){e||(r.current&&(r.current(n.current),n.current=n.current+1),t=requestAnimationFrame(o))})),function(){cancelAnimationFrame(t),e=!0}}),[])}((function(){var t=i.current,r=performance.now(),a=1/n.fps,u=(r-t)/1e3;if(!(u<a)){for(;u>=a/n.speed;)l.current=l.current+1,u-=a/n.speed;i.current=performance.now()-u,null!=e&&null!=o&&V(e,n.pattern,l.current%n.totalFrames,o,{fps:n.fps})}}),[r,n,o,e])})(S.current,{enable:"no"===E.current,assets:A,def:b}),O=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=A){e.next=2;break}return e.abrupt("return");case 2:if(t!==te.Up||"KeyR"!==r||!S.current){e.next=4;break}return e.delegateYield(regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j({current:"rendering",progress:0}),t=S.current,r=new(u())({quality:5,repeat:0,background:"#000"}),n=regeneratorRuntime.mark((function e(n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=document.createElement("canvas")).width=t.width,o.height=t.height,e.next=5,oe((function(){V(o,b.pattern,n,A,{fps:b.fps}),j({current:"rendering",progress:n/b.totalFrames}),r.addFrame(o,{delay:1e3/(b.speed*b.fps),copy:!0})}));case 5:case"end":return e.stop()}}),e)})),o=0;case 5:if(!(o<b.totalFrames)){e.next=10;break}return e.delegateYield(n(o),"t0",7);case 7:++o,e.next=5;break;case 10:r.on("progress",(function(e){j({current:"exporting",progress:e})})),r.on("finished",(function(e){window.open(URL.createObjectURL(e)),j({current:"no"})})),r.render();case 13:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){ie(i,n,o,l,a,"next",e)}function a(e){ie(i,n,o,l,a,"throw",e)}l(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),x=c.useRef(O),c.useEffect((function(){x.current=O}),[O]),c.useEffect((function(){function e(e){x.current(te.Down,e.code)}function t(e){x.current(te.Up,e.code)}return window.addEventListener("keydown",e),window.addEventListener("keyup",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),[]);var C=ue();return c.createElement("div",{className:C.root},c.createElement(l.Z,{container:!0},c.createElement(l.Z,{item:!0}),c.createElement(l.Z,{item:!0,style:{flexGrow:1}},c.createElement("canvas",{width:b.resolution[0],height:b.resolution[1],ref:S})),c.createElement(l.Z,{item:!0})),c.createElement(ce,{className:C.spinner,status:E}))}}}]);