"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[667],{67667:(e,t,n)=>{n.r(t),n.d(t,{default:()=>et});var r=n(48623),l=n(29525),a=n(66856),o=n(282),i=n(67294),u=n(22318),c=n(41749),s=n(36253),f=n(89762),m=n.n(f);function d(e,t,n,r,l,a,o){try{var i=e[a](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,l)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function o(e){d(a,r,l,o,i,"next",e)}function i(e){d(a,r,l,o,i,"throw",e)}o(void 0)}))}}function h(e,t){return new Promise((function(n,r){null!=t&&t.active?requestAnimationFrame(p(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:n();case 4:case"end":return t.stop()}}),t)})))):setTimeout(p(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:n();case 4:case"end":return t.stop()}}),t)}))),0)}))}function g(e,t,n,r){function l(e){var t=(0|e).toString(16);return 1==t.length?"0"+t:t}return"#".concat(l(255*e)).concat(l(255*t)).concat(l(255*n))}function y(e,t,n,r){return"rgba(".concat(255*e|0,", ").concat(255*t|0,", ").concat(255*n|0,", ").concat(null!=r?r:1,")")}function v(e,t,n){return[e/255,t/255,n/255,1]}function b(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}v(178,76,229),v(80,200,120),v(175,237,152),v(246,240,224),v(255,223,0),v(255,209,219),v(204,141,205),v(255,192,203),v(255,20,147),v(255,0,255),v(255,255,0),v(127,0,0),v(0,255,255),v(255,0,0),v(0,255,0),v(1,1,1),v(127,127,127),v(255,255,255),v(213,172,119),v(0,0,255),v(152,251,237),v(173,216,230),v(204,204,255),v(137,207,240),v(100,149,237),v(7,42,108),v(245,118,26),v(253,103,58),v(255,140,0),v(227,74,39),v(255,241,215),v(64,0,255);var x=function(){function e(t){var n,r;w(this,e),this.canvas=t,this.gl=null!==(n=null!==(r=t.getContext("webgl"))&&void 0!==r?r:t.getContext("experimental-webgl"))&&void 0!==n?n:function(){throw new Error("")}()}return C(e,[{key:"ref",value:function(){return this.gl}},{key:"createBuffer",value:function(){var e=this.gl.createBuffer();if(null==e)throw new Error("");return new O(this.gl,e)}},{key:"createProgram",value:function(e,t){var n=this.gl.createProgram();if(null==n)throw new Error("");var r=this.createShader(e,this.gl.VERTEX_SHADER);this.gl.attachShader(n,r),this.gl.deleteShader(r);var l=this.createShader("precision highp float;\n\n"+t,this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(n,l),this.gl.deleteShader(l),this.gl.linkProgram(n),!this.gl.getProgramParameter(n,this.gl.LINK_STATUS))throw new Error("VALIDATE_STATUS: ".concat(this.gl.getProgramParameter(n,this.gl.VALIDATE_STATUS)," ERROR: ").concat(this.gl.getError()));return new k(this.gl,n)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT),this.gl.clearColor(0,0,0,1)}},{key:"render",value:function(e,t){var n=this,r=e.ref();this.gl.useProgram(r),Object.keys(t).forEach((function(e){var l=t[e],a=n.gl.getUniformLocation(r,e);if(a)if(Array.isArray(l))switch(l.length){case 2:n.gl.uniform2f(a,l[0],l[1]);break;case 3:n.gl.uniform3f(a,l[0],l[1],l[2]);break;case 4:n.gl.uniform4f(a,l[0],l[1],l[2],l[3])}else n.gl.uniform1f(a,l)})),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}},{key:"createShader",value:function(e,t){var n=this.gl.createShader(t);if(null==n)throw new Error("");if(this.gl.shaderSource(n,e),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))throw new Error((t==this.gl.VERTEX_SHADER?"VERTEX":"FRAGMENT")+" SHADER:\n"+this.gl.getShaderInfoLog(n));return n}},{key:"width",value:function(){return this.canvas.clientWidth}},{key:"height",value:function(){return this.canvas.clientHeight}}]),e}(),k=function(){function e(t,n){w(this,e),S(this,"destroyed",!1),this.gl=t,this.program=n}return C(e,[{key:"ref",value:function(){return this.program}},{key:"ok",value:function(){return!this.destroyed}},{key:"destroy",value:function(){this.gl.deleteProgram(this.program),this.destroyed=!0}}]),e}(),O=function(){function e(t,n){w(this,e),S(this,"destroyed",!1),this.gl=t,this.buffer=n}return C(e,[{key:"ref",value:function(){return this.buffer}},{key:"ok",value:function(){return!this.destroyed}},{key:"bind",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(0,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(0)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.buffer),this.destroyed=!0}}]),e}();function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,l,a,o){try{var i=e[a](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,l)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function o(e){j(a,r,l,o,i,"next",e)}function i(e){j(a,r,l,o,i,"throw",e)}o(void 0)}))}}function T(e,t,n){return F.apply(this,arguments)}function F(){return(F=I(regeneratorRuntime.mark((function e(t,n,r){var l,a,o,i,u,c,s,f,m,d,p,h,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=A(t,2),a=l[0],o=l[1],(i=document.createElement("canvas")).width=a,i.height=o,u=new x(i),c=fetch(n).then((function(e){return e.text()})),s=fetch(r).then((function(e){return e.text()})),e.next=9,Promise.all([c,s]);case 9:return f=e.sent,m=A(f,2),d=m[0],p=m[1],(h=u.createBuffer()).ok()||console.error("failed to create buffer"),(g=u.createProgram(d,p)).ok()||console.error("failed to create program"),e.abrupt("return",[h,g,i]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return((1048320&function(e,t){t|=0;var n=function(e,t){return t^t>>e};return t*=3039394381,t=n(8,t+=e=e),t=function(e,t){return t^t<<8}(0,t+=1759714724),n(8,t*=458671337)}(e,t))>>8)/4095}var D=["x","y","value"];function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){var n,r,l,a,o,i,u,c,s,f,m,d,p,h,y=t.x,v=t.y,b=t.value,E=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(t,D),S=[e.width,e.height],w=Math.min(Math.max(12,Math.min.apply(Math,S)/12.5),256)*(null!==(n=null===(r=E.style)||void 0===r?void 0:r.size)&&void 0!==n?n:1),Z=e.getContext("2d");Z.save(),Z.textBaseline="top",Z.font="".concat(w,"px ").concat((null!==(l=null===(a=E.style)||void 0===a?void 0:a.fonts)&&void 0!==l?l:["Uni Sans Heavy","Roboto","Helvetica","Arial","sans-serif"]).join(", "));var C=Z.measureText(b),x=(1+y)/2*e.width-C.width/2;x<10?(x=10,Z.textAlign="left"):x+C.width>=e.width-10?(x=e.width-C.width-10,Z.textAlign="left"):(Z.textAlign="center",x=(1+y)/2*e.width);var k=(1+v)/2*e.height-w/2;k<10?k=10:k+w/2>=e.height-w-10&&(k=e.height-w-10);var O=g.apply(void 0,M(null!==(o=null===(i=E.style)||void 0===i||null===(u=i.fillColor)||void 0===u?void 0:u.slice(0,3))&&void 0!==o?o:[1,1,1])),A=g.apply(void 0,M(null!==(c=null===(s=E.style)||void 0===s||null===(f=s.strokeColor)||void 0===f?void 0:f.slice(0,3))&&void 0!==c?c:[1/256,1/256,1/256]));Z.lineWidth=null!==(m=null===(d=E.style)||void 0===d?void 0:d.lineWidth)&&void 0!==m?m:Math.max(null!==(p=null===(h=E.style)||void 0===h?void 0:h.size)&&void 0!==p?p:1,1),Z.fillStyle=O,A!=O&&(Z.strokeStyle=A),Z.fillText(b,x,k),A!=O&&Z.strokeText(b,x,k),Z.restore()}function z(e,t,n){var r,l,a,o,i,u,c,s,f,m,d,p,h,g,y,v,b,E,S,w,Z,C,x,k,O,A,P,j,I,T,F,R;if(0!==n.text.length){var D=null!==(r=n.stageLengths)&&void 0!==r?r:[15,15,15,15],W=D.reduce((function(e,t){return e+t}),0),L=t%W,M=null!=n.align?n.align[null!==(l=(t/W|0)%n.align.length)&&void 0!==l?l:1]:"center",U=n.text[(t/W|0)%n.text.length],z=0+(null!==(a=null===(o=n.style)||void 0===o?void 0:o.offsetX)&&void 0!==a?a:0),Y=0+(null!==(i=null===(u=n.style)||void 0===u?void 0:u.offsetY)&&void 0!==i?i:0);switch(M){case"left":z=-.95+(null!==(c=null===(s=n.style)||void 0===s?void 0:s.offsetX)&&void 0!==c?c:0);break;case"right":z=.95+(null!==(f=null===(m=n.style)||void 0===m?void 0:m.offsetX)&&void 0!==f?f:0);break;case"center":Y=0+(null!==(d=null===(p=n.style)||void 0===p?void 0:p.offsetY)&&void 0!==d?d:0);break;case"top":Y=-.95+(null!==(h=null===(g=n.style)||void 0===g?void 0:g.offsetY)&&void 0!==h?h:0);break;case"bottom":Y=.95+(null!==(y=null===(v=n.style)||void 0===v?void 0:v.offsetY)&&void 0!==y?y:0);break;case"top-left":z=-.95+(null!==(b=null===(E=n.style)||void 0===E?void 0:E.offsetX)&&void 0!==b?b:0),Y=-.95+(null!==(S=null===(w=n.style)||void 0===w?void 0:w.offsetY)&&void 0!==S?S:0);break;case"top-right":z=.95+(null!==(Z=null===(C=n.style)||void 0===C?void 0:C.offsetX)&&void 0!==Z?Z:0),Y=-.95+(null!==(x=null===(k=n.style)||void 0===k?void 0:k.offsetY)&&void 0!==x?x:0);break;case"bottom-left":z=-.95+(null!==(O=null===(A=n.style)||void 0===A?void 0:A.offsetX)&&void 0!==O?O:0),Y=.95+(null!==(P=null===(j=n.style)||void 0===j?void 0:j.offsetY)&&void 0!==P?P:0);break;case"bottom-right":z=.95+(null!==(I=null===(T=n.style)||void 0===T?void 0:T.offsetX)&&void 0!==I?I:0),Y=.95+(null!==(F=null===(R=n.style)||void 0===R?void 0:R.offsetY)&&void 0!==F?F:0)}var q=e.getContext("2d");if(q.save(),L<D[0]);else if(D[0]>0&&L<D[0]+D[1]){var X,H,$,N,V,G,K,J;q.globalAlpha=q.globalAlpha*((null!==(X=null===(H=n.style)||void 0===H?void 0:H.fillColor)&&void 0!==X?X:[0,0,0,1])[3]*(L-D[0])/D[1]),_(e,{x:z,y:Y,value:U,style:B(B(B({lineWidth:null===($=n.style)||void 0===$?void 0:$.lineWidth},null!=(null===(N=n.style)||void 0===N?void 0:N.fillColor)?{fillColor:n.style.fillColor}:{}),null!=(null===(V=n.style)||void 0===V?void 0:V.strokeColor)?{strokeColor:n.style.strokeColor}:{}),{},{bold:null===(G=n.style)||void 0===G?void 0:G.bold,size:null!==(K=null===(J=n.style)||void 0===J?void 0:J.size)&&void 0!==K?K:1})})}else if(D[1]>0&&L<D[0]+D[1]+D[2]){var Q,ee,te,ne,re,le,ae,oe;q.globalAlpha=q.globalAlpha*(null!==(Q=null===(ee=n.style)||void 0===ee?void 0:ee.fillColor)&&void 0!==Q?Q:[0,0,0,1])[3],_(e,{x:z,y:Y,value:U,style:B(B(B({lineWidth:null===(te=n.style)||void 0===te?void 0:te.lineWidth},null!=(null===(ne=n.style)||void 0===ne?void 0:ne.fillColor)?{fillColor:n.style.fillColor}:{}),null!=(null===(re=n.style)||void 0===re?void 0:re.strokeColor)?{strokeColor:n.style.strokeColor}:{}),{},{bold:null===(le=n.style)||void 0===le?void 0:le.bold,size:null!==(ae=null===(oe=n.style)||void 0===oe?void 0:oe.size)&&void 0!==ae?ae:1})})}else if(D[2]>0&&L<D[0]+D[1]+D[2]+D[3]){var ie,ue,ce,se,fe,me,de,pe,he=L-(D[0]+D[1]+ +D[2]);q.globalAlpha=q.globalAlpha*((null!==(ie=null===(ue=n.style)||void 0===ue?void 0:ue.fillColor)&&void 0!==ie?ie:[0,0,0,1])[3]*((D[3]-he)/D[3])),_(e,{x:z,y:Y,value:U,style:B(B(B({lineWidth:null===(ce=n.style)||void 0===ce?void 0:ce.lineWidth},null!=(null===(se=n.style)||void 0===se?void 0:se.fillColor)?{fillColor:n.style.fillColor}:{}),null!=(null===(fe=n.style)||void 0===fe?void 0:fe.strokeColor)?{strokeColor:n.style.strokeColor}:{}),{},{bold:null===(me=n.style)||void 0===me?void 0:me.bold,size:null!==(de=null===(pe=n.style)||void 0===pe?void 0:pe.size)&&void 0!==de?de:1})})}q.restore()}}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw l}}return a}}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t,n,r,l,a,o){try{var i=e[a](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,l)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function o(e){$(a,r,l,o,i,"next",e)}function i(e){$(a,r,l,o,i,"throw",e)}o(void 0)}))}}function V(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t,n,r,l){switch(t.type){case"fill":return function(e,t){var n=e.getContext("2d");n.save(),n.globalAlpha=t[3],n.fillStyle=g.apply(void 0,b(t)),n.fillRect(0,0,e.width,e.height),n.restore()}(e,t.color);case"opacity":return function(e,a,o){var i=e.getContext("2d");i.save(),i.globalAlpha=i.globalAlpha*a,function(e){t.children.forEach((function(t){return J(e,t,n,r,l)}))}(e),i.restore()}(e,t.value);case"frame-offset":return t.children.forEach((function(a){return J(e,a,n+t.by,r,l)}));case"change-speed":return t.children.forEach((function(a){return J(e,a,n*t.factor,r,l)}));case"clip-circle":return function(e,a,o,i){if(0!==o){var u=document.createElement("canvas");u.width=o*Math.min(e.width,e.height),u.height=u.width,function(e){t.children.forEach((function(t){return J(e,t,n,r,l)}))}(u);var c=(a[0]+1)*(e.width/2),s=(a[1]+1)*(e.height/2),f=u.width/2,m=e.getContext("2d");m.save(),m.beginPath(),m.arc(c,s,f,0,2*Math.PI,!0),m.closePath(),m.clip(),m.drawImage(u,c-f,s-f,u.width,u.height),m.restore()}}(e,t.origin,t.radius);case"pattern":var a=r.shaders[t.pattern];return null==a?void 0:function(e,t,n){var r,l,a,o,i,u,c,s,f,m,d=n.shader[2];d.width=e.width,d.height=e.height;var p=new x(d),h={time:t/(null!==(r=n.fps)&&void 0!==r?r:60),rotation:1,direction:1,branchCount:4,resolution:[d.width,d.height],aspect:d.width>d.height?[d.width/d.height,1]:[1,d.height/d.width],bgColor:null!==(l=null===(a=n.colors)||void 0===a?void 0:a.bgColor)&&void 0!==l?l:[0,0,0,0],fgColor:null!==(o=null===(i=n.colors)||void 0===i?void 0:i.fgColor)&&void 0!==o?o:[1,1,1,1],pulseColor:null!==(u=null===(c=n.colors)||void 0===c?void 0:c.pulseColor)&&void 0!==u?u:[178/255,76/255,229/255,1],dimColor:null!==(s=null===(f=n.colors)||void 0===f?void 0:f.dimColor)&&void 0!==s?s:[0,0,0,1]};p.clear(),n.shader[0].bind(),p.render(n.shader[1],h),null===(m=e.getContext("2d"))||void 0===m||m.drawImage(d,0,0,e.width,e.height)}(e,n,{shader:a,colors:{bgColor:t.colors.bg,fgColor:t.colors.fg,dimColor:t.colors.dim,pulseColor:t.colors.pulse},fps:null==l?void 0:l.fps});case"text":return _(e,{value:t.value,x:t.coords[0],y:t.coords[1],style:t.style});case"flash-text":return z(e,n,{text:t.text,align:t.align,stageLengths:t.stages,style:t.style});case"subliminal":return function(e,t,n){var r,l;if(0!==n.text.length){var a=null!==(r=n.stageLengths)&&void 0!==r?r:[15,15,15,15],o=t/a.reduce((function(e,t){return e+t}),0)|0,i=function(e){var t=0,n=0;if(0===e.length)return t;for(n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}(n.text.reduce((function(e,t){return"".concat(e,":").concat(t)}),"")),u=2*R(i,2*o)-1,c=2*R(i,2*o+1)-1;z(e,t,{text:n.text,align:["center"],stageLengths:a,style:B(B({},null!==(l=n.style)&&void 0!==l?l:{}),{},{offsetX:u,offsetY:c})})}}(e,n,{text:t.text,stageLengths:t.stages,style:t.style});case"flash-fill":return function(e,t,n){var r,l,a,o=null!==(r=n.stageLengths)&&void 0!==r?r:[15,15,15,15],i=t%o.reduce((function(e,t){return e+t}),0),u=null!==(l=null===(a=n.style)||void 0===a?void 0:a.backgroundColor)&&void 0!==l?l:[1,1,1,1],c=g.apply(void 0,b(u)),s=u[3],f=e.getContext("2d");if(i<o[0]);else if(o[0]>0&&i<o[0]+o[1])f.save(),f.globalAlpha=s*(i-o[1])/o[1],f.fillStyle=c,f.fillRect(0,0,e.width,e.height),f.restore();else if(o[1]>0&&i<o[0]+o[1]+o[2])f.save(),f.globalAlpha=s,f.fillStyle=c,f.fillRect(0,0,e.width,e.height),f.restore();else if(o[2]>0&&i<o[0]+o[1]+o[2]+o[3]){var m=i-(o[0]+o[1]+ +o[2]);f.save(),f.globalAlpha=s*(o[3]-m)/o[3],f.fillStyle=c,f.fillRect(0,0,e.width,e.height),f.restore()}}(e,n,{stageLengths:t.stages,style:{backgroundColor:t.color}});default:console.log("Unrecognized command type",t)}}function Q(e,t,n,r,l){var a;(a=e).getContext("2d").clearRect(0,0,a.width,a.height),t.forEach((function(t){return J(e,t,n,r,l)}))}function ee(e){return e.reduce((function(e,t){switch(t.type){case"clip-circle":case"frame-offset":case"opacity":case"change-speed":return[].concat(V(e),V(ee(t.children)));case"pattern":return[].concat(V(e),[t.pattern]);default:return e}}),[])}function te(){return(te=N(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=N(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=n,e.next=4,T(t,"shaders/spiral.vs","shaders/".concat(n,".fs"));case 4:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,e.abrupt("return",r.filter((function(e){return null!=e})).map((function(e){return e})).reduce((function(e,t){var n=H(t,2),r=n[0],l=n[1];return q(q({},e),{},X({},r,l))}),{}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=n(17812),re=n(38380),le=n(46479),ae=n(99956),oe=n(73205),ie=n(78135),ue=n(50743),ce=n(61201),se=n(26209),fe=n(44845),me=n(44326),de=n(99945),pe=n(47787),he=n(76945),ge=n(73099),ye=n(93565),ve=[{key:"full-inwards",name:"Inwards"},{key:"full-bicolor-pulse",name:"Bi-color (Pulse)"},{key:"full-bicolor",name:"Bi-color"},{key:"full-breathe",name:"Breathe"},{key:"full-complex-1",name:"Complex"},{key:"full-dot-pulse",name:"Dot (Pulse)"},{key:"full-dot",name:"Dot"},{key:"full-doublesine-pulse",name:"Doublesine (Pulse)"},{key:"full-doublesine-twisted",name:"Doublesine (Twisted)"},{key:"full-doublesine",name:"Doublesine"},{key:"full-doublestream",name:"Doublestream"},{key:"full-equal-branches-pulse",name:"Equal Branches (Pulse)"},{key:"full-equal-branches",name:"Equal Branches"},{key:"full-flower",name:"Flower"},{key:"full-half-circle",name:"Half-Circle"},{key:"full-interferring-ripples-1",name:"Interferring Ripples"},{key:"full-interferring-ripples-2",name:"Interferring Ripples (Alt)"},{key:"full-line-with-radial-pulses",name:"Line with Radial Pulses"},{key:"full-pulse",name:"Pulse"},{key:"full-pulsing-chain",name:"Pulsing Chain"},{key:"full-semi-twisted-slow",name:"Semi-Twisted (Slow)"},{key:"full-semi-twisted",name:"Semi-Twisted"},{key:"full-sharded-alt",name:"Sharded (Alt)"},{key:"full-sharded-pulse",name:"Sharded (Pulse)"},{key:"full-sharded",name:"Sharded"},{key:"full-speedup",name:"Speed-up"},{key:"full-squares-border",name:"Squares (Border)"},{key:"full-squares",name:"Squares"},{key:"full-twisted-alt",name:"Twisted (Alt)"},{key:"full-twisted-dots",name:"Twisted (Dots)"},{key:"full-twisted-lines",name:"Twisted (Lines)"},{key:"full-twisted-pulse",name:"Twisted (Pulse)"},{key:"full-twisted-triplepulse",name:"Twisted (Triple pulse)"},{key:"full-twisted",name:"Twisted"},{key:"static-breathe",name:"Breathe"},{key:"static-chain-circle",name:"Chain Circle"},{key:"static-color-spiral",name:"Spiral (Color)"},{key:"static-events",name:"Events"},{key:"static-range-colors",name:"Range Colors"},{key:"test-breathe",name:"Breathe (Test)"},{key:"test-bumpy-spiral",name:"Spiral (Bumpy)"},{key:"test-dot",name:"Dot (Test)"},{key:"test-double-async-interference",name:"Double Async Interference"},{key:"test-double-color",name:"Double Color"},{key:"test-expanding-twists",name:"Expanding Twists"},{key:"test-flash",name:"Flash"},{key:"test-flower-colors-sin",name:"Flower (Colors Sin)"},{key:"test-full-dots",name:"Dots (Full)"},{key:"test-offset-2",name:"Offset (Alt)"},{key:"test-offset",name:"Offset"},{key:"test-rainbow-spiral",name:"Rainbow Spiral"},{key:"test-singularity-1",name:"Singularity 1"},{key:"test-singularity-2",name:"Singularity 2"},{key:"test-singularity-3",name:"Singularity 3"},{key:"test-singularity-4",name:"Singularity 4"},{key:"test-small-dots",name:"Dots (Small)"},{key:"test-squares-lol",name:"Squares (LOL)"},{key:"test-weird-spiral-1",name:"Weird Spiral 1"},{key:"test-weird-spiral-2",name:"Weird Spiral 2"},{key:"test-weird-spiral-3",name:"Weird Spiral 3"},{key:"test-weird-spiral-4",name:"Weird Spiral 4"},{key:"test-weird-spiral-5",name:"Weird Spiral 5"},{key:"pendulum-bicolor",name:"Pendulum (Bi-color)"},{key:"pendulum-bicolor-pulse",name:"Pendulum (Bi-color, Pulse)"},{key:"pendulum-circles",name:"Pendulum (Circles)"},{key:"pendulum-disc",name:"Pendulum (Disc)"},{key:"pendulum-total-disc",name:"Pendulum (Disc, Total)"},{key:"pendulum-dot",name:"Pendulum (Dot)"},{key:"pendulum-doublesine",name:"Pendulum (Doublesine)"},{key:"pendulum-oval",name:"Pendulum (Oval)"},{key:"pendulum-oval-intermittent-spiral",name:"Pendulum (Oval, Intermittent Spiral)"},{key:"pendulum-spiral",name:"Pendulum (Spiral)"},{key:"pendulum-pulsing-spiral",name:"Pendulum (Spiral, Pulsing)"},{key:"pendulum-twisted-spiral-going-inwards",name:"Pendulum (Spiral, Twisted)"},{key:"pendulum-spiral-alt",name:"Pendulum (Spiral, Alt)"}].sort((function(e,t){return e.name<t.name?-1:1}));function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw l}}return a}}(e,t)||Ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){if(e){if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ke=function(e){return function(t){var n=t.label,r=t.value,l=t.onChange,a=Ze(i.useState(null),2),o=a[0],s=a[1];return i.createElement(i.Fragment,null,i.createElement(u.Z,{variant:"h4",paragraph:!0},n),r.map((function(t,n){return i.createElement(c.Z,{key:n,container:!0,spacing:3},i.createElement(c.Z,{item:!0,style:{width:"120px"}},i.createElement(ne.Z,{color:"secondary",onClick:function(){return l([].concat(we(r.slice(0,Math.max(0,n-1))),[t],we(r.slice(n-1,n)),we(r.slice(n+1))))}},i.createElement(me.Z,null)),i.createElement(ne.Z,{color:"secondary",onClick:function(){return l([].concat(we(r.slice(0,Math.max(0,n))),we(r.slice(n+1,n+2)),[t],we(r.slice(n+2))))}},i.createElement(de.Z,null))),i.createElement(c.Z,{item:!0,style:{width:"calc(100% - 240px)"}},e.edit(t,(function(e){return l([].concat(we(r.slice(0,n)),[e],we(r.slice(n+1))))}))),i.createElement(c.Z,{item:!0,style:{width:"120px"}},i.createElement(ne.Z,{color:"secondary",onClick:function(){return l([].concat(we(r.slice(0,n)),[t,t],we(r.slice(n+1))))}},i.createElement(pe.Z,null)),i.createElement(ne.Z,{color:"secondary",onClick:function(){return l([].concat(we(r.slice(0,n)),we(r.slice(n+1))))}},i.createElement(he.Z,null))))})),i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,style:{flexGrow:1}}),i.createElement(c.Z,{item:!0},i.createElement(ne.Z,{onClick:function(t){e.createOptions?s(t.currentTarget):l([].concat(we(r),[e.create()]))}},"+"),e.createOptions&&i.createElement(re.Z,{open:null!=o,anchorEl:o,onClose:function(){return s(null)}},e.createOptions.map((function(t,n){return i.createElement(le.Z,{key:n,onClick:function(){l([].concat(we(r),[e.create(t)])),s(null)}},e.optionName(t))}))))))}},Oe=function(e){var t=e.label,n=e.value,r=e.onChange;return i.createElement(i.Fragment,null,i.createElement(c.Z,{container:!0,spacing:1},i.createElement(c.Z,{item:!0,xs:12},i.createElement(u.Z,{variant:"h4",paragraph:!0},t)),i.createElement(c.Z,{item:!0,xs:12,sm:3},i.createElement(s.Z,{type:"number",label:"Hidden",fullWidth:!0,inputProps:{min:0,step:1},value:n[0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([parseInt(e.target.value||"0",0),n[1],n[2],n[3]])}))})),i.createElement(c.Z,{item:!0,xs:12,sm:3},i.createElement(s.Z,{type:"number",label:"Fade in",fullWidth:!0,inputProps:{min:0,step:1},value:n[1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],parseInt(e.target.value||"0",0),n[2],n[3]])}))})),i.createElement(c.Z,{item:!0,xs:12,sm:3},i.createElement(s.Z,{type:"number",label:"Visible",fullWidth:!0,inputProps:{min:0,step:1},value:n[2],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],n[1],parseInt(e.target.value||"0",0),n[3]])}))})),i.createElement(c.Z,{item:!0,xs:12,sm:3},i.createElement(s.Z,{type:"number",label:"Fade out",fullWidth:!0,inputProps:{min:0,step:1},value:n[3],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],n[1],n[2],parseInt(e.target.value||"0",0)])}))}))))},Ae=function(e){var t=e.label,n=e.value,r=e.onChange,l=Ze(i.useState(null),2),a=l[0],u=l[1];return i.createElement(i.Fragment,null,i.createElement(ae.Z,{component:"div",style:{width:"100%",background:g.apply(void 0,we(n)),padding:"1.5em 0",textAlign:"center"}},i.createElement(o.Z,{style:{background:"white"},variant:"outlined",onClick:function(e){return u(e.currentTarget)}},t)),i.createElement(oe.ZP,{open:null!=a,onClose:function(){return u(null)},anchorEl:a,anchorOrigin:{vertical:"bottom",horizontal:"left"}},i.createElement(ye.xS,{color:y.apply(void 0,we(n)),onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t;return r([e.rgb.r/255,e.rgb.g/255,e.rgb.b/255,null!==(t=e.rgb.a)&&void 0!==t?t:1])}))})))},Pe=function(e){var t=e.label,n=e.value,r=e.onChange;return i.createElement(c.Z,{container:!0,spacing:1},i.createElement(c.Z,{item:!0,xs:12},i.createElement(u.Z,{variant:"h4",paragraph:!0},t)),i.createElement(c.Z,{item:!0,xs:12,sm:6},i.createElement(s.Z,{type:"number",label:"X",fullWidth:!0,inputProps:{step:.01},value:n[0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([parseFloat(e.target.value||"0"),n[1]])}))})),i.createElement(c.Z,{item:!0,xs:12,sm:6},i.createElement(s.Z,{type:"number",label:"Y",fullWidth:!0,inputProps:{step:.01},value:n[1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],parseFloat(e.target.value||"0")])}))})))},je=function(e){var t,n,r,l,a=e.label,o=e.value,f=e.onChange,m=e.children,d=Ze(i.useState(!1),2),p=d[0],h=d[1];return i.createElement(ie.Z,{expanded:p,onChange:function(e,t){return h(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},a)),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:6},i.createElement(s.Z,{inputProps:{min:0,step:.1},type:"number",label:"Font size",fullWidth:!0,value:null!==(t=o.size)&&void 0!==t?t:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return f(Ee(Ee({},o),{},{size:parseFloat(e.target.value||"0")}))}))})),i.createElement(c.Z,{item:!0,xs:6},i.createElement(s.Z,{inputProps:{min:0,step:1},type:"number",label:"Line width",fullWidth:!0,value:null!==(n=o.lineWidth)&&void 0!==n?n:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return f(Ee(Ee({},o),{},{lineWidth:parseFloat(e.target.value||"0")}))}))})),i.createElement(c.Z,{item:!0,xs:6},i.createElement(Ae,{label:"Fill Color",value:null!==(r=o.fillColor)&&void 0!==r?r:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return f(Ee(Ee({},o),{},{fillColor:e}))}))})),i.createElement(c.Z,{item:!0,xs:6},i.createElement(Ae,{label:"Stroke Color",value:null!==(l=o.strokeColor)&&void 0!==l?l:[0,0,0,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return f(Ee(Ee({},o),{},{strokeColor:e}))}))})),m)))},Ie=function(e){var t,n,r=e.label,l=e.value,a=e.onChange;return i.createElement(je,{label:r,value:l,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return a(Ee(Ee({},l),e))}))},i.createElement(c.Z,{item:!0,xs:12},i.createElement(Pe,{label:"Offset",value:[null!==(t=l.offsetX)&&void 0!==t?t:0,null!==(n=l.offsetY)&&void 0!==n?n:0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=Ze(e,2),n=t[0],r=t[1];return a(Ee(Ee({},l),{},{offsetX:n,offsetY:r}))}))})))},Te=function(e){var t=e.value,n=e.onChange;return i.createElement(se.Z,{label:"align",fullWidth:!0,value:t,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return n(e.target.value)}))},i.createElement(le.Z,{value:"center"},"Center"),i.createElement(le.Z,{value:"top"},"Top"),i.createElement(le.Z,{value:"bottom"},"Bottom"),i.createElement(le.Z,{value:"left"},"Left"),i.createElement(le.Z,{value:"right"},"Right"),i.createElement(le.Z,{value:"top-left"},"Top Left"),i.createElement(le.Z,{value:"top-right"},"Top Right"),i.createElement(le.Z,{value:"bottom-left"},"Bottom Left"),i.createElement(le.Z,{value:"bottom-right"},"Bottom Right"))},Fe=ke({create:function(){return"center"},edit:function(e,t){return i.createElement(Te,{value:e,onChange:t})}}),Re=function(e){var t,n,r,l,a,o,f,m,d,p,h,g,y=e.value,v=e.onChange,b=Ze(i.useState(!1),2),E=b[0],S=b[1];switch(y.type){case"fill":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Fill")),i.createElement(ce.Z,null,i.createElement(Ae,{label:"Color",value:y.color,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{color:e}))}))})));case"opacity":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Opacity")),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(fe.Z,{valueLabelDisplay:"auto",min:0,max:1,step:.01,value:y.value,onChange:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return v(Ee(Ee({},y),{},{value:t}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(We,{value:y.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{children:e}))}))})))));case"frame-offset":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Frame Offset")),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(s.Z,{inputProps:{step:1},fullWidth:!0,type:"number",label:"By",value:y.by,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{by:parseInt(e.target.value||"0",0)}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(We,{value:y.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{children:e}))}))})))));case"change-speed":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Change Speed")),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(s.Z,{inputProps:{min:0,step:.25},fullWidth:!0,type:"number",label:"Factor",value:y.factor,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{factor:parseFloat(e.target.value||"0")}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(We,{value:y.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{children:e}))}))})))));case"clip-circle":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Clip (Circle)")),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3,alignItems:"flex-end"},i.createElement(c.Z,{item:!0,xs:8},i.createElement(Pe,{label:"Origin",value:y.origin,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{origin:e}))}))})),i.createElement(c.Z,{item:!0,xs:4},i.createElement(s.Z,{type:"number",label:"Radius",fullWidth:!0,value:null!==(t=y.radius)&&void 0!==t?t:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{radius:parseFloat(e.target.value||"0")}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(We,{value:y.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{children:e}))}))})))));case"text":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Text")),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(Pe,{label:"Coords",value:y.coords,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{coords:e}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(s.Z,{fullWidth:!0,label:"Value",value:y.value,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{value:e.target.value}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(je,{label:"Styles",value:null!==(n=y.style)&&void 0!==n?n:{},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{style:e}))}))})))));case"flash-fill":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Flash Fill")),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(Oe,{label:"Stages",value:null!==(r=y.stages)&&void 0!==r?r:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{stages:e}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(Ae,{label:"Color",value:y.color,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{color:e}))}))})))));case"flash-text":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Flash Text")),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(s.Z,{multiline:!0,fullWidth:!0,label:"Messages",value:y.text.join("\n"),onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{text:e.target.value.split("\n")}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(Oe,{label:"Stages",value:null!==(l=y.stages)&&void 0!==l?l:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{stages:e}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(Fe,{label:"Align",value:null!==(a=y.align)&&void 0!==a?a:[],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{align:e}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(Ie,{label:"Styles",value:null!==(o=y.style)&&void 0!==o?o:{},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{style:e}))}))})))));case"subliminal":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Subliminals")),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(Oe,{label:"Stages",value:null!==(f=y.stages)&&void 0!==f?f:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{stages:e}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(s.Z,{multiline:!0,fullWidth:!0,label:"Messages",value:y.text.join("\n"),onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{text:e.target.value.split("\n")}))}))})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(je,{label:"Styles",value:null!==(m=y.style)&&void 0!==m?m:{},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{style:e}))}))})))));case"pattern":return i.createElement(ie.Z,{expanded:E,onChange:function(e,t){return S(t)}},i.createElement(ue.Z,{expandIcon:i.createElement(ge.Z,null)},i.createElement(u.Z,{variant:"h3"},"Pattern")),i.createElement(ce.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(se.Z,{fullWidth:!0,label:"Shader",value:y.pattern,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{pattern:e.target.value}))}))},ve.map((function(e){return i.createElement(le.Z,{key:e.key,value:e.key},e.name)})))),i.createElement(c.Z,{item:!0,xs:12},i.createElement(u.Z,{variant:"h4",paragraph:!0},"Properties"),i.createElement(c.Z,{container:!0},i.createElement(c.Z,{item:!0,xs:12,sm:6,md:3},i.createElement(Ae,{label:"Background",value:null!==(d=y.colors.bg)&&void 0!==d?d:[0,0,0,0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{colors:Ee(Ee({},y.colors),{},{bg:e})}))}))})),i.createElement(c.Z,{item:!0,xs:12,sm:6,md:3},i.createElement(Ae,{label:"Foreground",value:null!==(p=y.colors.fg)&&void 0!==p?p:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{colors:Ee(Ee({},y.colors),{},{fg:e})}))}))})),i.createElement(c.Z,{item:!0,xs:12,sm:6,md:3},i.createElement(Ae,{label:"Pulse",value:null!==(h=y.colors.pulse)&&void 0!==h?h:[178/255,76/255,229/255,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{colors:Ee(Ee({},y.colors),{},{pulse:e})}))}))})),i.createElement(c.Z,{item:!0,xs:12,sm:6,md:3},i.createElement(Ae,{label:"Dim",value:null!==(g=y.colors.dim)&&void 0!==g?g:[0,0,0,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return v(Ee(Ee({},y),{},{colors:Ee(Ee({},y.colors),{},{dim:e})}))}))})))))));default:return i.createElement(u.Z,{variant:"body1"}," Unrecognized command type '",y.type,"'")}},De=ke({create:function(e){return function(e){switch(e){case"fill":return{type:"fill",color:[0,0,0,1]};case"opacity":return{type:"opacity",value:1,children:[]};case"frame-offset":return{type:"frame-offset",by:0,children:[]};case"clip-circle":return{type:"clip-circle",origin:[0,0],radius:1,children:[]};case"pattern":return{type:"pattern",pattern:"full-inwards",colors:{}};case"text":return{type:"text",value:"",coords:[0,0]};case"flash-text":return{type:"flash-text",text:[]};case"subliminal":return{type:"subliminal",text:[]};case"flash-fill":return{type:"flash-fill",color:[1,1,1,1]};case"change-speed":return{type:"change-speed",factor:1,children:[]};default:return{type:"text",value:e,coords:[0,0]}}}(e.type)},edit:function(e,t){return i.createElement(Re,{value:e,onChange:t})},createOptions:[{type:"fill",name:"Fill"},{type:"opacity",name:"Opacity"},{type:"frame-offset",name:"Frame Offset"},{type:"change-speed",name:"Change Speed"},{type:"clip-circle",name:"Clip (Circle)"},{type:"pattern",name:"Pattern"},{type:"text",name:"Text"},{type:"flash-fill",name:"Flash (Fill)"},{type:"flash-text",name:"Flash (Text)"},{type:"subliminal",name:"Subliminal"}],optionName:function(e){return e.name}}),We=function(e){var t=e.value,n=e.onChange;return i.createElement(De,{label:"Patterns",value:t,onChange:n})};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=function(e){var t=e.value,n=e.onChange;return i.createElement(i.Fragment,null,i.createElement(u.Z,{variant:"h1",paragraph:!0},"Spiral Editor"),i.createElement(u.Z,{variant:"h2",paragraph:!0},"Pattern"),i.createElement(We,{value:t.pattern,onChange:function(e){return n(Le(Le({},t),{},{pattern:e}))}}),i.createElement("div",{style:{padding:"1em"}}),i.createElement(u.Z,{variant:"h2",paragraph:!0},"Resolution"),i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12,sm:6},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Width",value:t.resolution[0],onChange:function(e){return n(Le(Le({},t),{},{resolution:[parseInt(e.target.value||"0",0),t.resolution[1]]}))}})),i.createElement(c.Z,{item:!0,xs:12,sm:6},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Height",value:t.resolution[1],onChange:function(e){return n(Le(Le({},t),{},{resolution:[t.resolution[0],parseInt(e.target.value||"0",0)]}))}}))),i.createElement("div",{style:{padding:"1em"}}),i.createElement(u.Z,{variant:"h2",paragraph:!0},"Framerate"),i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12,sm:6,lg:4},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"FPS",value:t.fps,onChange:function(e){return n(Le(Le({},t),{},{fps:parseInt(e.target.value||"0",0)}))}})),i.createElement(c.Z,{item:!0,xs:12,sm:6,lg:4},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Total Frames",value:t.totalFrames,onChange:function(e){return n(Le(Le({},t),{},{totalFrames:parseInt(e.target.value||"0",0)}))}})),i.createElement(c.Z,{item:!0,xs:12,lg:4},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Speed",value:t.speed,onChange:function(e){return n(Le(Le({},t),{},{speed:parseFloat(e.target.value||"0")}))}}))))},_e=n(95477),ze=function(e){var t=e.className,n=e.status;return i.createElement(r.Z,{open:"no"!==n.current},i.createElement(l.Z,null,i.createElement(_e.Z,{className:t,size:360,color:"rendering"===n.current?"primary":"secondary",variant:"determinate",value:("rendering"===n.current?0:50)+("no"!==n.current?50*n.progress:0)})))},Ye=n(41120),qe=n(56912);function Xe(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e){var t=i.useMemo((function(){return ee(e.pattern)}),[e.pattern]),n=$e(i.useState({}),2),r=n[0],l=n[1];return i.useEffect((function(){var n=!1;return function(e,t){return te.apply(this,arguments)}(e.resolution,t).then((function(e){n||l(e)})),function(){n=!0}}),[e.resolution,t.join("|")]),{shaders:r}}var Ge=(0,Ye.Z)({root:{objectFit:"cover",width:"100%",height:"100vh"}},{name:"SpiralViewer"}),Ke=function(e){var t=e.def,n=e.assets,r=e.onClick,l=Ge().root,a=i.useRef(null);return function(e,t){var n=t.enable,r=t.def,l=t.assets,a=i.useRef(performance.now()),o=i.useRef(0);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=i.useRef(e),r=i.useRef(0);i.useEffect((function(){n.current=e}),[e].concat(Xe(t))),i.useEffect((function(){var e=!1,t=0;return t=requestAnimationFrame((function l(){e||(n.current&&(n.current(r.current),r.current=r.current+1),t=requestAnimationFrame(l))})),function(){cancelAnimationFrame(t),e=!0}}),[])}((function(){var t=a.current,n=performance.now(),i=1/(r.fps*r.speed),u=(n-t)/1e3;if(!(u<i)){for(;u>=i;)o.current=o.current+1,u-=i;a.current=performance.now()-u;var c=r.totalFrames>0?o.current%r.totalFrames:o.current;null!=e&&null!=l&&Q(e,r.pattern,c,l,{fps:r.fps})}}),[n,r,l,e])}(a.current,{enable:!0,assets:n,def:t}),i.createElement("canvas",{className:l,width:t.resolution[0]>0?t.resolution[0]:32,height:t.resolution[1]>0?t.resolution[1]:32,ref:a,onClick:r})};function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(){var e,t,n,u,c,s,f,d,p,g,y,v,b,E,S,w=Je(i.useState(!1),2),Z=w[0],C=w[1],x=Je((e=$e((0,qe.xT)("pattern",[]),2),t=e[0],n=e[1],u=$e((0,qe.$w)("speed",1),2),c=u[0],s=u[1],f=$e((0,qe.$w)("fps",60),2),d=f[0],p=f[1],g=$e((0,qe.$w)("total-frames",d),2),y=g[0],v=g[1],b=$e((0,qe.xT)("screen",[1280,720]),2),E=b[0],S=b[1],[i.useMemo((function(){return{pattern:t,speed:c,fps:d,totalFrames:y,resolution:E}}),[t,c,d,y,E]),function(e){n(e.pattern),s(e.speed),p(e.fps),v(e.totalFrames),S(e.resolution)}]),2),k=x[0],O=x[1],A=Ve(k),P=Je(function(e,t){var n=H(i.useState({current:"no"}),2),r=n[0],l=n[1];return[r,N(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l({current:"rendering",progress:0}),r=new(m())({quality:5,repeat:0}),a=e.totalFrames||e.fps,o=regeneratorRuntime.mark((function n(o){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h((function(){var n=document.createElement("canvas");n.width=e.resolution[0]>0?e.resolution[0]:32,n.height=e.resolution[1]>0?e.resolution[1]:32,Q(n,e.pattern,o,t,{fps:e.fps}),l({current:"rendering",progress:o/a}),r.addFrame(n,{delay:1e3/(e.speed*e.fps),copy:!0})}));case 2:case"end":return n.stop()}}),n)})),i=0;case 5:if(!(i<a)){n.next=10;break}return n.delegateYield(o(i),"t0",7);case 7:++i,n.next=5;break;case 10:r.on("progress",(function(e){l({current:"exporting",progress:e})})),r.on("finished",(function(e){window.open(URL.createObjectURL(e)),l({current:"no"})})),r.render();case 13:case"end":return n.stop()}}),n)})))]}(k,A),2),j=P[0],I=P[1];return i.createElement(i.Fragment,null,i.createElement(Ke,{def:k,assets:A,onClick:function(){return C(!0)}}),i.createElement(r.Z,{open:Z,maxWidth:"xl",fullWidth:!0},i.createElement(l.Z,null,i.createElement(Ue,{value:k,onChange:O})),i.createElement(a.Z,null,i.createElement(o.Z,{color:"secondary",onClick:function(){return C(!1)}},"Close"),i.createElement(o.Z,{color:"primary",disabled:k.totalFrames<=0,onClick:function(){C(!1),I()}},"Render"))),i.createElement(ze,{status:j}))}}}]);