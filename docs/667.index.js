"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[667],{67667:(e,t,n)=>{n.r(t),n.d(t,{default:()=>et});var r=n(48623),l=n(29525),a=n(66856),i=n(282),o=n(67294),u=n(22318),c=n(41749),s=n(36253),f=n(89762),m=n.n(f);function p(e,t,n,r,l,a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,l)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function i(e){p(a,r,l,i,o,"next",e)}function o(e){p(a,r,l,i,o,"throw",e)}i(void 0)}))}}function d(e,t){return new Promise((function(n,r){null!=t&&t.active?requestAnimationFrame(h(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:n();case 4:case"end":return t.stop()}}),t)})))):setTimeout(h(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:n();case 4:case"end":return t.stop()}}),t)}))),0)}))}function g(e,t,n,r){function l(e){var t=(0|e).toString(16);return 1==t.length?"0"+t:t}return"#".concat(l(255*e)).concat(l(255*t)).concat(l(255*n))}function v(e,t,n,r){return"rgba(".concat(255*e|0,", ").concat(255*t|0,", ").concat(255*n|0,", ").concat(null!=r?r:1,")")}function y(e,t,n){return[e/255,t/255,n/255,1]}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n,r=e.getContext("2d");r.save(),r.globalAlpha=t[3],r.fillStyle=g.apply(void 0,function(e){if(Array.isArray(e))return E(e)}(n=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r.fillRect(0,0,e.width,e.height),r.restore()}function S(e,t,n,r){var l,a=null!==(l=n.stageLengths)&&void 0!==l?l:[15,15,15,15],i=t%a.reduce((function(e,t){return e+t}),0),o=document.createElement("canvas");o.width=e.width,o.height=e.height,r(o);var u=e.getContext("2d");if(i<a[0]);else if(a[0]>0&&i<a[0]+a[1]){var c,s;u.save(),u.globalAlpha=(null!==(c=null===(s=n.style)||void 0===s?void 0:s.alpha)&&void 0!==c?c:1)*(i-a[1])/a[1],u.drawImage(o,0,0,o.width,o.height),u.restore()}else if(a[1]>0&&i<a[0]+a[1]+a[2]){var f,m;u.save(),u.globalAlpha=null!==(f=null===(m=n.style)||void 0===m?void 0:m.alpha)&&void 0!==f?f:1,u.drawImage(o,0,0,o.width,o.height),u.restore()}else if(a[2]>0&&i<a[0]+a[1]+a[2]+a[3]){var p,h,d=i-(a[0]+a[1]+ +a[2]);u.save(),u.globalAlpha=(null!==(p=null===(h=n.style)||void 0===h?void 0:h.alpha)&&void 0!==p?p:1)*(a[3]-d)/a[3],u.drawImage(o,0,0,o.width,o.height),u.restore()}}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}y(178,76,229),y(80,200,120),y(175,237,152),y(246,240,224),y(255,223,0),y(255,209,219),y(204,141,205),y(255,192,203),y(255,20,147),y(255,0,255),y(255,255,0),y(127,0,0),y(0,255,255),y(255,0,0),y(0,255,0),y(1,1,1),y(127,127,127),y(255,255,255),y(213,172,119),y(0,0,255),y(152,251,237),y(173,216,230),y(204,204,255),y(137,207,240),y(100,149,237),y(7,42,108),y(245,118,26),y(253,103,58),y(255,140,0),y(227,74,39),y(255,241,215),y(64,0,255);var k=function(){function e(t){var n,r;w(this,e),this.canvas=t,this.gl=null!==(n=null!==(r=t.getContext("webgl"))&&void 0!==r?r:t.getContext("experimental-webgl"))&&void 0!==n?n:function(){throw new Error("")}()}return x(e,[{key:"ref",value:function(){return this.gl}},{key:"createBuffer",value:function(){var e=this.gl.createBuffer();if(null==e)throw new Error("");return new A(this.gl,e)}},{key:"createProgram",value:function(e,t){var n=this.gl.createProgram();if(null==n)throw new Error("");var r=this.createShader(e,this.gl.VERTEX_SHADER);this.gl.attachShader(n,r),this.gl.deleteShader(r);var l=this.createShader("precision highp float;\n\n"+t,this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(n,l),this.gl.deleteShader(l),this.gl.linkProgram(n),!this.gl.getProgramParameter(n,this.gl.LINK_STATUS))throw new Error("VALIDATE_STATUS: ".concat(this.gl.getProgramParameter(n,this.gl.VALIDATE_STATUS)," ERROR: ").concat(this.gl.getError()));return new O(this.gl,n)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT),this.gl.clearColor(0,0,0,1)}},{key:"render",value:function(e,t){var n=this,r=e.ref();this.gl.useProgram(r),Object.keys(t).forEach((function(e){var l=t[e],a=n.gl.getUniformLocation(r,e);if(a)if(Array.isArray(l))switch(l.length){case 2:n.gl.uniform2f(a,l[0],l[1]);break;case 3:n.gl.uniform3f(a,l[0],l[1],l[2]);break;case 4:n.gl.uniform4f(a,l[0],l[1],l[2],l[3])}else n.gl.uniform1f(a,l)})),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}},{key:"createShader",value:function(e,t){var n=this.gl.createShader(t);if(null==n)throw new Error("");if(this.gl.shaderSource(n,e),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))throw new Error((t==this.gl.VERTEX_SHADER?"VERTEX":"FRAGMENT")+" SHADER:\n"+this.gl.getShaderInfoLog(n));return n}},{key:"width",value:function(){return this.canvas.clientWidth}},{key:"height",value:function(){return this.canvas.clientHeight}}]),e}(),O=function(){function e(t,n){w(this,e),Z(this,"destroyed",!1),this.gl=t,this.program=n}return x(e,[{key:"ref",value:function(){return this.program}},{key:"ok",value:function(){return!this.destroyed}},{key:"destroy",value:function(){this.gl.deleteProgram(this.program),this.destroyed=!0}}]),e}(),A=function(){function e(t,n){w(this,e),Z(this,"destroyed",!1),this.gl=t,this.buffer=n}return x(e,[{key:"ref",value:function(){return this.buffer}},{key:"ok",value:function(){return!this.destroyed}},{key:"bind",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(0,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(0)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.buffer),this.destroyed=!0}}]),e}();function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t,n,r,l,a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,l)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function i(e){I(a,r,l,i,o,"next",e)}function o(e){I(a,r,l,i,o,"throw",e)}i(void 0)}))}}function T(e,t,n){return R.apply(this,arguments)}function R(){return(R=F(regeneratorRuntime.mark((function e(t,n,r){var l,a,i,o,u,c,s,f,m,p,h,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=P(t,2),a=l[0],i=l[1],(o=document.createElement("canvas")).width=a,o.height=i,u=new k(o),c=fetch(n).then((function(e){return e.text()})),s=fetch(r).then((function(e){return e.text()})),e.next=9,Promise.all([c,s]);case 9:return f=e.sent,m=P(f,2),p=m[0],h=m[1],(d=u.createBuffer()).ok()||console.error("failed to create buffer"),(g=u.createProgram(p,h)).ok()||console.error("failed to create program"),e.abrupt("return",[d,g,o]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return((1048320&function(e,t){t|=0;var n=function(e,t){return t^t>>e};return t*=3039394381,t=n(8,t+=e=e),t=function(e,t){return t^t<<8}(0,t+=1759714724),n(8,t*=458671337)}(e,t))>>8)/4095}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){var n,r,l,a,i,o,u,c,s,f,m,p,h,d,v,y,E,b,S,Z,w,C,x,k,O=t.value,A=t.style,P=[e.width,e.height],j=Math.min(Math.max(12,Math.min.apply(Math,P)/12.5),256)*(null!==(n=null==A?void 0:A.size)&&void 0!==n?n:1),I=0+(null!==(r=null==A?void 0:A.offsetX)&&void 0!==r?r:0),F=0+(null!==(l=null==A?void 0:A.offsetY)&&void 0!==l?l:0);switch(null!==(a=null==A?void 0:A.align)&&void 0!==a?a:"center"){case"left":I=-.95+(null!==(i=null==A?void 0:A.offsetX)&&void 0!==i?i:0);break;case"right":I=.95+(null!==(o=null==A?void 0:A.offsetX)&&void 0!==o?o:0);break;case"center":F=0+(null!==(u=null==A?void 0:A.offsetY)&&void 0!==u?u:0);break;case"top":F=-.95+(null!==(c=null==A?void 0:A.offsetY)&&void 0!==c?c:0);break;case"bottom":F=.95+(null!==(s=null==A?void 0:A.offsetY)&&void 0!==s?s:0);break;case"top-left":I=-.95+(null!==(f=null==A?void 0:A.offsetX)&&void 0!==f?f:0),F=-.95+(null!==(m=null==A?void 0:A.offsetY)&&void 0!==m?m:0);break;case"top-right":I=.95+(null!==(p=null==A?void 0:A.offsetX)&&void 0!==p?p:0),F=-.95+(null!==(h=null==A?void 0:A.offsetY)&&void 0!==h?h:0);break;case"bottom-left":I=-.95+(null!==(d=null==A?void 0:A.offsetX)&&void 0!==d?d:0),F=.95+(null!==(v=null==A?void 0:A.offsetY)&&void 0!==v?v:0);break;case"bottom-right":I=.95+(null!==(y=null==A?void 0:A.offsetX)&&void 0!==y?y:0),F=.95+(null!==(E=null==A?void 0:A.offsetY)&&void 0!==E?E:0)}var T=e.getContext("2d");T.save(),T.textBaseline="top",T.font="".concat(j,"px ").concat((null!==(b=null==A?void 0:A.fonts)&&void 0!==b?b:["Uni Sans Heavy","Roboto","Helvetica","Arial","sans-serif"]).join(", "));var R=T.measureText(O),W=(1+I)/2*e.width-R.width/2;W<10?(W=10,T.textAlign="left"):W+R.width>=e.width-10?(W=e.width-R.width-10,T.textAlign="left"):(T.textAlign="center",W=(1+I)/2*e.width);var D=(1+F)/2*e.height-j/2;D<10?D=10:D+j/2>=e.height-j-10&&(D=e.height-j-10);var L=g.apply(void 0,M(null!==(S=null==A||null===(Z=A.fillColor)||void 0===Z?void 0:Z.slice(0,3))&&void 0!==S?S:[1,1,1])),B=g.apply(void 0,M(null!==(w=null==A||null===(C=A.strokeColor)||void 0===C?void 0:C.slice(0,3))&&void 0!==w?w:[1/256,1/256,1/256]));T.lineWidth=null!==(x=null==A?void 0:A.lineWidth)&&void 0!==x?x:Math.max(null!==(k=null==A?void 0:A.size)&&void 0!==k?k:1,1),T.fillStyle=L,B!=L&&(T.strokeStyle=B),T.fillText(O,W,D),B!=L&&T.strokeText(O,W,D),T.restore()}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw l}}return a}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t,n,r,l,a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,l)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function i(e){H(a,r,l,i,o,"next",e)}function o(e){H(a,r,l,i,o,"throw",e)}i(void 0)}))}}function N(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t,n,r,l){switch(t.type){case"fill":return b(e,t.color);case"opacity":return function(e,a,i){var o=e.getContext("2d");o.save(),o.globalAlpha=o.globalAlpha*a,function(e){t.children.forEach((function(t){return K(e,t,n,r,l)}))}(e),o.restore()}(e,t.value);case"frame-offset":return t.children.forEach((function(a){return K(e,a,n+t.by,r,l)}));case"change-speed":return t.children.forEach((function(a){return K(e,a,n*t.factor,r,l)}));case"hide-after":return n<t.frames?t.children.forEach((function(t){return K(e,t,n,r,l)})):void 0;case"show-after":return n>=t.frames?t.children.forEach((function(a){return K(e,a,n-t.frames,r,l)})):void 0;case"clip-circle":return function(e,a,i,o){if(0!==i){var u=document.createElement("canvas");u.width=i*Math.min(e.width,e.height),u.height=u.width,function(e){t.children.forEach((function(t){return K(e,t,n,r,l)}))}(u);var c=(a[0]+1)*(e.width/2),s=(a[1]+1)*(e.height/2),f=u.width/2,m=e.getContext("2d");m.save(),m.beginPath(),m.arc(c,s,f,0,2*Math.PI,!0),m.closePath(),m.clip(),m.drawImage(u,c-f,s-f,u.width,u.height),m.restore()}}(e,t.origin,t.radius);case"clip-rect":return function(e,a,i,o){if(0!==i[0]&&0!==i[1]){var u=document.createElement("canvas");u.width=i[0]*e.width,u.height=i[1]*e.height,function(e){t.children.forEach((function(t){return K(e,t,n,r,l)}))}(u);var c=[a[0]-i[0],a[1]-i[1]],s=(c[0]+1)/2*e.width,f=(c[1]+1)/2*e.height,m=e.getContext("2d");m.save(),m.beginPath(),m.rect(s,f,u.width,u.height),m.closePath(),m.clip(),m.drawImage(u,s,f,u.width,u.height),m.restore()}}(e,t.origin,t.size);case"pattern":var a=r.shaders[t.pattern];return null==a?void 0:function(e,t,n){var r,l,a,i,o,u,c,s,f,m,p=n.shader[2];p.width=e.width,p.height=e.height;var h=new k(p),d={time:t/(null!==(r=n.fps)&&void 0!==r?r:60),rotation:1,direction:1,branchCount:4,resolution:[p.width,p.height],aspect:p.width>p.height?[p.width/p.height,1]:[1,p.height/p.width],bgColor:null!==(l=null===(a=n.colors)||void 0===a?void 0:a.bgColor)&&void 0!==l?l:[0,0,0,0],fgColor:null!==(i=null===(o=n.colors)||void 0===o?void 0:o.fgColor)&&void 0!==i?i:[1,1,1,1],pulseColor:null!==(u=null===(c=n.colors)||void 0===c?void 0:c.pulseColor)&&void 0!==u?u:[178/255,76/255,229/255,1],dimColor:null!==(s=null===(f=n.colors)||void 0===f?void 0:f.dimColor)&&void 0!==s?s:[0,0,0,1]};h.clear(),n.shader[0].bind(),h.render(n.shader[1],d),null===(m=e.getContext("2d"))||void 0===m||m.drawImage(p,0,0,e.width,e.height)}(e,n,{shader:a,colors:{bgColor:t.colors.bg,fgColor:t.colors.fg,dimColor:t.colors.dim,pulseColor:t.colors.pulse},fps:null==l?void 0:l.fps});case"text":return z(e,{value:t.value,style:t.style});case"subliminal":return function(e,t,n){var r;if(0!==n.text.length){var l=(null!==(r=n.stageLengths)&&void 0!==r?r:[15,15,15,15]).reduce((function(e,t){return e+t}),0),a=t/l|0,i=function(e){var t=0,n=0;if(0===e.length)return t;for(n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}(n.text.reduce((function(e,t){return"".concat(e,":").concat(t)}),"")),o=n.text[(t/l|0)%n.text.length],u=2*W(i,2*a)-1,c=2*W(i,2*a+1)-1;S(e,t,{stageLengths:n.stageLengths},(function(e){var t;z(e,{value:o,style:L(L({},null!==(t=n.style)&&void 0!==t?t:{}),{},{align:"top-left",offsetX:u,offsetY:c})})}))}}(e,n,{text:t.text,stageLengths:t.stages,style:t.style});case"flash":return S(e,n,{stageLengths:t.stages},(function(e){return t.children.forEach((function(t){return K(e,t,n,r,l)}))}));case"flash-text":return function(e,t,n){var r,l,a;if(0!==n.text.length){var i=(null!==(r=n.stageLengths)&&void 0!==r?r:[15,15,15,15]).reduce((function(e,t){return e+t}),0),o=null!=(null===(l=n.style)||void 0===l?void 0:l.align)?n.style.align[null!==(a=(t/i|0)%n.style.align.length)&&void 0!==a?a:1]:"center",u=n.text[(t/i|0)%n.text.length];S(e,t,{stageLengths:n.stageLengths},(function(e){var t,r,l,a,i,c,s,f,m;z(e,{value:u,style:L(L(L({lineWidth:null===(t=n.style)||void 0===t?void 0:t.lineWidth},null!=(null===(r=n.style)||void 0===r?void 0:r.fillColor)?{fillColor:n.style.fillColor}:{}),null!=(null===(l=n.style)||void 0===l?void 0:l.strokeColor)?{strokeColor:n.style.strokeColor}:{}),{},{bold:null===(a=n.style)||void 0===a?void 0:a.bold,size:null!==(i=null===(c=n.style)||void 0===c?void 0:c.size)&&void 0!==i?i:1,align:o,fonts:null===(s=n.style)||void 0===s?void 0:s.fonts,offsetX:null===(f=n.style)||void 0===f?void 0:f.offsetX,offsetY:null===(m=n.style)||void 0===m?void 0:m.offsetY})})}))}}(e,n,{text:t.text,stageLengths:t.stages,style:t.style});case"flash-fill":return function(e,t,n){S(e,t,{stageLengths:n.stageLengths},(function(e){var t,r;b(e,null!==(t=null===(r=n.style)||void 0===r?void 0:r.backgroundColor)&&void 0!==t?t:[1,1,1,1])}))}(e,n,{stageLengths:t.stages,style:{backgroundColor:t.color}});default:console.log("Unrecognized command type",t)}}function J(e,t,n,r,l){var a;(a=e).getContext("2d").clearRect(0,0,a.width,a.height),t.forEach((function(t){return K(e,t,n,r,l)}))}function Q(e){return e.reduce((function(e,t){switch(t.type){case"clip-circle":case"frame-offset":case"opacity":case"change-speed":case"flash":return[].concat(N(e),N(Q(t.children)));case"pattern":return[].concat(N(e),[t.pattern]);default:return e}}),[])}function ee(){return(ee=$(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=$(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=n,e.next=4,T(t,"shaders/spiral.vs","shaders/".concat(n,".fs"));case 4:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,e.abrupt("return",r.filter((function(e){return null!=e})).map((function(e){return e})).reduce((function(e,t){var n=q(t,2),r=n[0],l=n[1];return X(X({},e),{},_({},r,l))}),{}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=n(17812),ne=n(38380),re=n(46479),le=n(99956),ae=n(73205),ie=n(26209),oe=n(78135),ue=n(50743),ce=n(61201),se=n(44845),fe=n(44326),me=n(99945),pe=n(47787),he=n(76945),de=n(73099),ge=n(93565),ve=[{key:"full-inwards",name:"Inwards"},{key:"full-bicolor-pulse",name:"Bi-color (Pulse)"},{key:"full-bicolor",name:"Bi-color"},{key:"full-breathe",name:"Breathe"},{key:"full-complex-1",name:"Complex"},{key:"full-dot-pulse",name:"Dot (Pulse)"},{key:"full-dot",name:"Dot"},{key:"full-doublesine-pulse",name:"Doublesine (Pulse)"},{key:"full-doublesine-twisted",name:"Doublesine (Twisted)"},{key:"full-doublesine",name:"Doublesine"},{key:"full-doublestream",name:"Doublestream"},{key:"full-equal-branches-pulse",name:"Equal Branches (Pulse)"},{key:"full-equal-branches",name:"Equal Branches"},{key:"full-flower",name:"Flower"},{key:"full-half-circle",name:"Half-Circle"},{key:"full-interferring-ripples-1",name:"Interferring Ripples"},{key:"full-interferring-ripples-2",name:"Interferring Ripples (Alt)"},{key:"full-line-with-radial-pulses",name:"Line with Radial Pulses"},{key:"full-pulse",name:"Pulse"},{key:"full-pulsing-chain",name:"Pulsing Chain"},{key:"full-semi-twisted-slow",name:"Semi-Twisted (Slow)"},{key:"full-semi-twisted",name:"Semi-Twisted"},{key:"full-sharded-alt",name:"Sharded (Alt)"},{key:"full-sharded-pulse",name:"Sharded (Pulse)"},{key:"full-sharded",name:"Sharded"},{key:"full-speedup",name:"Speed-up"},{key:"full-squares-border",name:"Squares (Border)"},{key:"full-squares",name:"Squares"},{key:"full-twisted-alt",name:"Twisted (Alt)"},{key:"full-twisted-dots",name:"Twisted (Dots)"},{key:"full-twisted-lines",name:"Twisted (Lines)"},{key:"full-twisted-pulse",name:"Twisted (Pulse)"},{key:"full-twisted-triplepulse",name:"Twisted (Triple pulse)"},{key:"full-twisted",name:"Twisted"},{key:"static-breathe",name:"Breathe (Rainbow)"},{key:"static-chain-circle",name:"Chain Circle"},{key:"static-color-spiral",name:"Spiral (Color)"},{key:"static-events",name:"Events"},{key:"static-range-colors",name:"Range Colors"},{key:"test-breathe",name:"Breathe (Test)"},{key:"test-bumpy-spiral",name:"Spiral (Bumpy)"},{key:"test-dot",name:"Dot (Test)"},{key:"test-double-async-interference",name:"Double Async Interference"},{key:"test-double-color",name:"Double Color"},{key:"test-expanding-twists",name:"Expanding Twists"},{key:"test-flash",name:"Flash"},{key:"test-flower-colors-sin",name:"Flower (Colors Sin)"},{key:"test-full-dots",name:"Dots (Full)"},{key:"test-offset-2",name:"Offset (Alt)"},{key:"test-offset",name:"Offset"},{key:"test-rainbow-spiral",name:"Rainbow Spiral"},{key:"test-singularity-1",name:"Singularity 1"},{key:"test-singularity-2",name:"Singularity 2"},{key:"test-singularity-3",name:"Singularity 3"},{key:"test-singularity-4",name:"Singularity 4"},{key:"test-small-dots",name:"Dots (Small)"},{key:"test-squares-lol",name:"Squares (LOL)"},{key:"test-weird-spiral-1",name:"Weird Spiral 1"},{key:"test-weird-spiral-2",name:"Weird Spiral 2"},{key:"test-weird-spiral-3",name:"Weird Spiral 3"},{key:"test-weird-spiral-4",name:"Weird Spiral 4"},{key:"test-weird-spiral-5",name:"Weird Spiral 5"},{key:"pendulum-bicolor",name:"Pendulum (Bi-color)"},{key:"pendulum-bicolor-pulse",name:"Pendulum (Bi-color, Pulse)"},{key:"pendulum-circles",name:"Pendulum (Circles)"},{key:"pendulum-disc",name:"Pendulum (Disc)"},{key:"pendulum-total-disc",name:"Pendulum (Disc, Total)"},{key:"pendulum-dot",name:"Pendulum (Dot)"},{key:"pendulum-doublesine",name:"Pendulum (Doublesine)"},{key:"pendulum-oval",name:"Pendulum (Oval)"},{key:"pendulum-oval-intermittent-spiral",name:"Pendulum (Oval, Intermittent Spiral)"},{key:"pendulum-spiral",name:"Pendulum (Spiral)"},{key:"pendulum-pulsing-spiral",name:"Pendulum (Spiral, Pulsing)"},{key:"pendulum-twisted-spiral-going-inwards",name:"Pendulum (Spiral, Twisted)"},{key:"pendulum-spiral-alt",name:"Pendulum (Spiral, Alt)"}].sort((function(e,t){return e.name<t.name?-1:1}));function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||we(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw l}}return a}}(e,t)||we(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xe=function(e){return function(t){var n=t.label,r=t.value,l=t.onChange,a=Ze(o.useState(null),2),i=a[0],s=a[1];return o.createElement(o.Fragment,null,o.createElement(u.Z,{variant:"h4",paragraph:!0},n),r.map((function(t,n){return o.createElement(c.Z,{key:n,container:!0,spacing:3},o.createElement(c.Z,{item:!0,style:{width:"120px"}},o.createElement(te.Z,{color:"secondary",onClick:function(){return l([].concat(Se(r.slice(0,Math.max(0,n-1))),[t],Se(r.slice(n-1,n)),Se(r.slice(n+1))))}},o.createElement(fe.Z,null)),o.createElement(te.Z,{color:"secondary",onClick:function(){return l([].concat(Se(r.slice(0,Math.max(0,n))),Se(r.slice(n+1,n+2)),[t],Se(r.slice(n+2))))}},o.createElement(me.Z,null))),o.createElement(c.Z,{item:!0,style:{width:"calc(100% - 240px)"}},e.edit(t,(function(e){return l([].concat(Se(r.slice(0,n)),[e],Se(r.slice(n+1))))}))),o.createElement(c.Z,{item:!0,style:{width:"120px"}},o.createElement(te.Z,{color:"secondary",onClick:function(){return l([].concat(Se(r.slice(0,n)),[t,t],Se(r.slice(n+1))))}},o.createElement(pe.Z,null)),o.createElement(te.Z,{color:"secondary",onClick:function(){return l([].concat(Se(r.slice(0,n)),Se(r.slice(n+1))))}},o.createElement(he.Z,null))))})),o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,style:{flexGrow:1}}),o.createElement(c.Z,{item:!0},o.createElement(te.Z,{onClick:function(t){e.createOptions?s(t.currentTarget):l([].concat(Se(r),[e.create()]))}},"+"),e.createOptions&&o.createElement(ne.Z,{open:null!=i,anchorEl:i,onClose:function(){return s(null)}},e.createOptions.map((function(t,n){return o.createElement(re.Z,{key:n,onClick:function(){l([].concat(Se(r),[e.create(t)])),s(null)}},e.optionName(t))}))))))}},ke=function(e){var t=e.label,n=e.value,r=e.onChange;return o.createElement(o.Fragment,null,o.createElement(c.Z,{container:!0,spacing:1},o.createElement(c.Z,{item:!0,xs:12},o.createElement(u.Z,{variant:"h4",paragraph:!0},t)),o.createElement(c.Z,{item:!0,xs:12,sm:3},o.createElement(s.Z,{type:"number",label:"Hidden",fullWidth:!0,inputProps:{min:0,step:1},value:n[0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([parseInt(e.target.value||"0",0),n[1],n[2],n[3]])}))})),o.createElement(c.Z,{item:!0,xs:12,sm:3},o.createElement(s.Z,{type:"number",label:"Fade in",fullWidth:!0,inputProps:{min:0,step:1},value:n[1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],parseInt(e.target.value||"0",0),n[2],n[3]])}))})),o.createElement(c.Z,{item:!0,xs:12,sm:3},o.createElement(s.Z,{type:"number",label:"Visible",fullWidth:!0,inputProps:{min:0,step:1},value:n[2],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],n[1],parseInt(e.target.value||"0",0),n[3]])}))})),o.createElement(c.Z,{item:!0,xs:12,sm:3},o.createElement(s.Z,{type:"number",label:"Fade out",fullWidth:!0,inputProps:{min:0,step:1},value:n[3],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],n[1],n[2],parseInt(e.target.value||"0",0)])}))}))))},Oe=function(e){var t=e.label,n=e.value,r=e.onChange,l=Ze(o.useState(null),2),a=l[0],u=l[1];return o.createElement(o.Fragment,null,o.createElement(le.Z,{component:"div",style:{width:"100%",background:g.apply(void 0,Se(n)),padding:"1.5em 0",textAlign:"center"}},o.createElement(i.Z,{style:{background:"white"},variant:"outlined",onClick:function(e){return u(e.currentTarget)}},t)),o.createElement(ae.ZP,{open:null!=a,onClose:function(){return u(null)},anchorEl:a,anchorOrigin:{vertical:"bottom",horizontal:"left"}},o.createElement(ge.xS,{color:v.apply(void 0,Se(n)),onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t;return r([e.rgb.r/255,e.rgb.g/255,e.rgb.b/255,null!==(t=e.rgb.a)&&void 0!==t?t:1])}))})))},Ae=function(e){var t=e.label,n=e.value,r=e.onChange;return o.createElement(c.Z,{container:!0,spacing:1},o.createElement(c.Z,{item:!0,xs:12},o.createElement(u.Z,{variant:"h4",paragraph:!0},t)),o.createElement(c.Z,{item:!0,xs:12,sm:6},o.createElement(s.Z,{type:"number",label:"X",fullWidth:!0,inputProps:{step:.01},value:n[0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([parseFloat(e.target.value||"0"),n[1]])}))})),o.createElement(c.Z,{item:!0,xs:12,sm:6},o.createElement(s.Z,{type:"number",label:"Y",fullWidth:!0,inputProps:{step:.01},value:n[1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],parseFloat(e.target.value||"0")])}))})))},Pe=function(e){var t=e.label,n=e.value,r=e.onChange;return o.createElement(ie.Z,{label:t,fullWidth:!0,value:n,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r(e.target.value)}))},o.createElement(re.Z,{value:"center"},"Center"),o.createElement(re.Z,{value:"top"},"Top"),o.createElement(re.Z,{value:"bottom"},"Bottom"),o.createElement(re.Z,{value:"left"},"Left"),o.createElement(re.Z,{value:"right"},"Right"),o.createElement(re.Z,{value:"top-left"},"Top Left"),o.createElement(re.Z,{value:"top-right"},"Top Right"),o.createElement(re.Z,{value:"bottom-left"},"Bottom Left"),o.createElement(re.Z,{value:"bottom-right"},"Bottom Right"))},je=function(e){var t,n,r,l,a,i,f,m=e.label,p=e.value,h=e.onChange,d=Ze(o.useState(!1),2),g=d[0],v=d[1];return o.createElement(oe.Z,{expanded:g,onChange:function(e,t){return v(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},m)),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:6},o.createElement(s.Z,{inputProps:{min:0,step:.1},type:"number",label:"Font size",fullWidth:!0,value:null!==(t=p.size)&&void 0!==t?t:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{size:parseFloat(e.target.value||"0")}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(s.Z,{inputProps:{min:0,step:1},type:"number",label:"Line width",fullWidth:!0,value:null!==(n=p.lineWidth)&&void 0!==n?n:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{lineWidth:parseFloat(e.target.value||"0")}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(Oe,{label:"Fill Color",value:null!==(r=p.fillColor)&&void 0!==r?r:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{fillColor:e}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(Oe,{label:"Stroke Color",value:null!==(l=p.strokeColor)&&void 0!==l?l:[0,0,0,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{strokeColor:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(Pe,{label:"Align",value:null!==(a=p.align)&&void 0!==a?a:"center",onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{align:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(Ae,{label:"Offset",value:[null!==(i=p.offsetX)&&void 0!==i?i:0,null!==(f=p.offsetY)&&void 0!==f?f:0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=Ze(e,2),n=t[0],r=t[1];return h(Ee(Ee({},p),{},{offsetX:n,offsetY:r}))}))})))))},Ie=function(e){var t,n,r,l,a,i,f=e.label,m=e.value,p=e.onChange,h=Ze(o.useState(!1),2),d=h[0],g=h[1];return o.createElement(oe.Z,{expanded:d,onChange:function(e,t){return g(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},f)),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:6},o.createElement(s.Z,{inputProps:{min:0,step:.1},type:"number",label:"Font size",fullWidth:!0,value:null!==(t=m.size)&&void 0!==t?t:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return p(Ee(Ee({},m),{},{size:parseFloat(e.target.value||"0")}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(s.Z,{inputProps:{min:0,step:1},type:"number",label:"Line width",fullWidth:!0,value:null!==(n=m.lineWidth)&&void 0!==n?n:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return p(Ee(Ee({},m),{},{lineWidth:parseFloat(e.target.value||"0")}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(Oe,{label:"Fill Color",value:null!==(r=m.fillColor)&&void 0!==r?r:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return p(Ee(Ee({},m),{},{fillColor:e}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(Oe,{label:"Stroke Color",value:null!==(l=m.strokeColor)&&void 0!==l?l:[0,0,0,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return p(Ee(Ee({},m),{},{strokeColor:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(Ae,{label:"Offset",value:[null!==(a=m.offsetX)&&void 0!==a?a:0,null!==(i=m.offsetY)&&void 0!==i?i:0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=Ze(e,2),n=t[0],r=t[1];return p(Ee(Ee({},m),{},{offsetX:n,offsetY:r}))}))})))))},Fe=xe({create:function(){return"center"},edit:function(e,t){return o.createElement(Pe,{label:"align",value:e,onChange:t})}}),Te=function(e){var t,n,r,l,a,i,f,m=e.label,p=e.value,h=e.onChange,d=Ze(o.useState(!1),2),g=d[0],v=d[1];return o.createElement(oe.Z,{expanded:g,onChange:function(e,t){return v(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},m)),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:6},o.createElement(s.Z,{inputProps:{min:0,step:.1},type:"number",label:"Font size",fullWidth:!0,value:null!==(t=p.size)&&void 0!==t?t:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{size:parseFloat(e.target.value||"0")}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(s.Z,{inputProps:{min:0,step:1},type:"number",label:"Line width",fullWidth:!0,value:null!==(n=p.lineWidth)&&void 0!==n?n:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{lineWidth:parseFloat(e.target.value||"0")}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(Oe,{label:"Fill Color",value:null!==(r=p.fillColor)&&void 0!==r?r:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{fillColor:e}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(Oe,{label:"Stroke Color",value:null!==(l=p.strokeColor)&&void 0!==l?l:[0,0,0,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{strokeColor:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(Ae,{label:"Offset",value:[null!==(a=p.offsetX)&&void 0!==a?a:0,null!==(i=p.offsetY)&&void 0!==i?i:0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=Ze(e,2),n=t[0],r=t[1];return h(Ee(Ee({},p),{},{offsetX:n,offsetY:r}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(Fe,{label:"Align",value:null!==(f=p.align)&&void 0!==f?f:[],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return h(Ee(Ee({},p),{},{align:e}))}))})))))},Re=function(e){var t,n,r,l,a,i,f,m,p,h,d,g,v=e.value,y=e.onChange,E=Ze(o.useState(!1),2),b=E[0],S=E[1];switch(v.type){case"fill":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Fill")),o.createElement(ce.Z,null,o.createElement(Oe,{label:"Color",value:v.color,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{color:e}))}))})));case"opacity":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Opacity")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(se.Z,{valueLabelDisplay:"auto",min:0,max:1,step:.01,value:v.value,onChange:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return y(Ee(Ee({},v),{},{value:t}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(De,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{children:e}))}))})))));case"frame-offset":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Frame Offset")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(s.Z,{inputProps:{step:1},fullWidth:!0,type:"number",label:"By",value:v.by,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{by:parseInt(e.target.value||"0",0)}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(De,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{children:e}))}))})))));case"hide-after":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Hide After")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(s.Z,{inputProps:{step:1},fullWidth:!0,type:"number",label:"Frames",value:v.frames,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{frames:parseInt(e.target.value||"0",0)}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(De,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{children:e}))}))})))));case"show-after":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Show After")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(s.Z,{inputProps:{step:1},fullWidth:!0,type:"number",label:"Frames",value:v.frames,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{frames:parseInt(e.target.value||"0",0)}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(De,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{children:e}))}))})))));case"change-speed":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Change Speed")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(s.Z,{inputProps:{min:0,step:.25},fullWidth:!0,type:"number",label:"Factor",value:v.factor,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{factor:parseFloat(e.target.value||"0")}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(De,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{children:e}))}))})))));case"clip-circle":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Clip (Circle)")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3,alignItems:"flex-end"},o.createElement(c.Z,{item:!0,xs:8},o.createElement(Ae,{label:"Origin",value:v.origin,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{origin:e}))}))})),o.createElement(c.Z,{item:!0,xs:4},o.createElement(s.Z,{type:"number",label:"Radius",fullWidth:!0,value:null!==(t=v.radius)&&void 0!==t?t:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{radius:parseFloat(e.target.value||"0")}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(De,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{children:e}))}))})))));case"clip-rect":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Clip (Rect)")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3,alignItems:"flex-end"},o.createElement(c.Z,{item:!0,xs:6},o.createElement(Ae,{label:"Origin",value:v.origin,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{origin:e}))}))})),o.createElement(c.Z,{item:!0,xs:6},o.createElement(Ae,{label:"Size",value:v.size,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{size:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(De,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{children:e}))}))})))));case"text":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Text")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(Ae,{label:"Coords",value:v.coords,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{coords:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(s.Z,{fullWidth:!0,label:"Value",value:v.value,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{value:e.target.value}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(je,{label:"Styles",value:null!==(n=v.style)&&void 0!==n?n:{},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{style:e}))}))})))));case"flash":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Flash")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(ke,{label:"Stages",value:null!==(r=v.stages)&&void 0!==r?r:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{stages:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(De,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{children:e}))}))})))));case"flash-fill":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Flash Fill")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(ke,{label:"Stages",value:null!==(l=v.stages)&&void 0!==l?l:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{stages:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(Oe,{label:"Color",value:v.color,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{color:e}))}))})))));case"flash-text":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Flash Text")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(s.Z,{multiline:!0,fullWidth:!0,label:"Messages",value:v.text.join("\n"),onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{text:e.target.value.split("\n")}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(ke,{label:"Stages",value:null!==(a=v.stages)&&void 0!==a?a:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{stages:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(Te,{label:"Styles",value:null!==(i=v.style)&&void 0!==i?i:{},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{style:e}))}))})))));case"subliminal":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Subliminals")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(ke,{label:"Stages",value:null!==(f=v.stages)&&void 0!==f?f:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{stages:e}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(s.Z,{multiline:!0,fullWidth:!0,label:"Messages",value:v.text.join("\n"),onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{text:e.target.value.split("\n")}))}))})),o.createElement(c.Z,{item:!0,xs:12},o.createElement(Ie,{label:"Styles",value:null!==(m=v.style)&&void 0!==m?m:{},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{style:e}))}))})))));case"pattern":return o.createElement(oe.Z,{expanded:b,onChange:function(e,t){return S(t)}},o.createElement(ue.Z,{expandIcon:o.createElement(de.Z,null)},o.createElement(u.Z,{variant:"h3"},"Pattern")),o.createElement(ce.Z,null,o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12},o.createElement(ie.Z,{fullWidth:!0,label:"Shader",value:v.pattern,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{pattern:e.target.value}))}))},ve.map((function(e){return o.createElement(re.Z,{key:e.key,value:e.key},e.name)})))),o.createElement(c.Z,{item:!0,xs:12},o.createElement(u.Z,{variant:"h4",paragraph:!0},"Properties"),o.createElement(c.Z,{container:!0},o.createElement(c.Z,{item:!0,xs:12,sm:6,md:3},o.createElement(Oe,{label:"Background",value:null!==(p=v.colors.bg)&&void 0!==p?p:[0,0,0,0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{colors:Ee(Ee({},v.colors),{},{bg:e})}))}))})),o.createElement(c.Z,{item:!0,xs:12,sm:6,md:3},o.createElement(Oe,{label:"Foreground",value:null!==(h=v.colors.fg)&&void 0!==h?h:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{colors:Ee(Ee({},v.colors),{},{fg:e})}))}))})),o.createElement(c.Z,{item:!0,xs:12,sm:6,md:3},o.createElement(Oe,{label:"Pulse",value:null!==(d=v.colors.pulse)&&void 0!==d?d:[178/255,76/255,229/255,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{colors:Ee(Ee({},v.colors),{},{pulse:e})}))}))})),o.createElement(c.Z,{item:!0,xs:12,sm:6,md:3},o.createElement(Oe,{label:"Dim",value:null!==(g=v.colors.dim)&&void 0!==g?g:[0,0,0,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(Ee(Ee({},v),{},{colors:Ee(Ee({},v.colors),{},{dim:e})}))}))})))))));default:return o.createElement(u.Z,{variant:"body1"}," Unrecognized command type '",v.type,"'")}},We=xe({create:function(e){return function(e){switch(e){case"fill":return{type:"fill",color:[0,0,0,1]};case"opacity":return{type:"opacity",value:1,children:[]};case"frame-offset":return{type:"frame-offset",by:0,children:[]};case"hide-after":return{type:"hide-after",frames:0,children:[]};case"show-after":return{type:"show-after",frames:0,children:[]};case"clip-circle":return{type:"clip-circle",origin:[0,0],radius:1,children:[]};case"clip-rect":return{type:"clip-rect",origin:[0,0],size:[1,1],children:[]};case"pattern":return{type:"pattern",pattern:"full-inwards",colors:{}};case"text":return{type:"text",value:"",coords:[0,0]};case"flash":return{type:"flash",stages:[15,15,15,15],children:[]};case"flash-text":return{type:"flash-text",text:[]};case"subliminal":return{type:"subliminal",text:[]};case"flash-fill":return{type:"flash-fill",color:[1,1,1,1]};case"change-speed":return{type:"change-speed",factor:1,children:[]};default:return{type:"text",value:e,coords:[0,0]}}}(e.type)},edit:function(e,t){return o.createElement(Re,{value:e,onChange:t})},createOptions:[{type:"fill",name:"Fill"},{type:"opacity",name:"Opacity"},{type:"frame-offset",name:"Frame Offset"},{type:"change-speed",name:"Change Speed"},{type:"hide-after",name:"Hide After"},{type:"show-after",name:"Show After"},{type:"clip-circle",name:"Clip (Circle)"},{type:"clip-rect",name:"Clip (Rectangle)"},{type:"pattern",name:"Pattern"},{type:"text",name:"Text"},{type:"flash",name:"Flash"},{type:"flash-fill",name:"Flash (Fill)"},{type:"flash-text",name:"Flash (Text)"},{type:"subliminal",name:"Subliminal"}],optionName:function(e){return e.name}}),De=function(e){var t=e.value,n=e.onChange;return o.createElement(We,{label:"Patterns",value:t,onChange:n})};function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=function(e){var t=e.value,n=e.onChange;return o.createElement(o.Fragment,null,o.createElement(u.Z,{variant:"h1",paragraph:!0},"Spiral Editor"),o.createElement(u.Z,{variant:"h2",paragraph:!0},"Pattern"),o.createElement(De,{value:t.pattern,onChange:function(e){return n(Be(Be({},t),{},{pattern:e}))}}),o.createElement("div",{style:{padding:"1em"}}),o.createElement(u.Z,{variant:"h2",paragraph:!0},"Resolution"),o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12,sm:6},o.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Width",value:t.resolution[0],onChange:function(e){return n(Be(Be({},t),{},{resolution:[parseInt(e.target.value||"0",0),t.resolution[1]]}))}})),o.createElement(c.Z,{item:!0,xs:12,sm:6},o.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Height",value:t.resolution[1],onChange:function(e){return n(Be(Be({},t),{},{resolution:[t.resolution[0],parseInt(e.target.value||"0",0)]}))}}))),o.createElement("div",{style:{padding:"1em"}}),o.createElement(u.Z,{variant:"h2",paragraph:!0},"Framerate"),o.createElement(c.Z,{container:!0,spacing:3},o.createElement(c.Z,{item:!0,xs:12,sm:6,lg:4},o.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"FPS",value:t.fps,onChange:function(e){return n(Be(Be({},t),{},{fps:parseInt(e.target.value||"0",0)}))}})),o.createElement(c.Z,{item:!0,xs:12,sm:6,lg:4},o.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Total Frames",value:t.totalFrames,onChange:function(e){return n(Be(Be({},t),{},{totalFrames:parseInt(e.target.value||"0",0)}))}})),o.createElement(c.Z,{item:!0,xs:12,lg:4},o.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Speed",value:t.speed,onChange:function(e){return n(Be(Be({},t),{},{speed:parseFloat(e.target.value||"0")}))}}))))},ze=n(95477),Ye=function(e){var t=e.className,n=e.status;return o.createElement(r.Z,{open:"no"!==n.current},o.createElement(l.Z,null,o.createElement(ze.Z,{className:t,size:360,color:"rendering"===n.current?"primary":"secondary",variant:"determinate",value:("rendering"===n.current?0:50)+("no"!==n.current?50*n.progress:0)})))},Xe=n(41120),_e=n(56912);function qe(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e){var t=o.useMemo((function(){return Q(e.pattern)}),[e.pattern]),n=$e(o.useState({}),2),r=n[0],l=n[1];return o.useEffect((function(){var n=!1;return function(e,t){return ee.apply(this,arguments)}(e.resolution,t).then((function(e){n||l(e)})),function(){n=!0}}),[e.resolution,t.join("|")]),{shaders:r}}var Ge=(0,Xe.Z)({root:{objectFit:"cover",width:"100%",height:"100vh"}},{name:"SpiralViewer"}),Ke=function(e){var t=e.def,n=e.assets,r=e.onClick,l=Ge().root,a=o.useRef(null);return function(e,t){var n=t.enable,r=t.def,l=t.assets,a=o.useRef(performance.now()),i=o.useRef(0);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=o.useRef(e),r=o.useRef(0);o.useEffect((function(){n.current=e}),[e].concat(qe(t))),o.useEffect((function(){var e=!1,t=0;return t=requestAnimationFrame((function l(){e||(n.current&&(n.current(r.current),r.current=r.current+1),t=requestAnimationFrame(l))})),function(){cancelAnimationFrame(t),e=!0}}),[])}((function(){var t=a.current,n=performance.now(),o=1/(r.fps*r.speed),u=(n-t)/1e3;if(!(u<o)){for(;u>=o;)i.current=i.current+1,u-=o;a.current=performance.now()-u;var c=r.totalFrames>0?i.current%r.totalFrames:i.current;null!=e&&null!=l&&J(e,r.pattern,c,l,{fps:r.fps})}}),[n,r,l,e])}(a.current,{enable:!0,assets:n,def:t}),o.createElement("canvas",{className:l,width:t.resolution[0]>0?t.resolution[0]:32,height:t.resolution[1]>0?t.resolution[1]:32,ref:a,onClick:r})};function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(){var e,t,n,u,c,s,f,p,h,g,v,y,E,b,S,Z=Je(o.useState(!1),2),w=Z[0],C=Z[1],x=Je((e=$e((0,_e.xT)("pattern",[]),2),t=e[0],n=e[1],u=$e((0,_e.$w)("speed",1),2),c=u[0],s=u[1],f=$e((0,_e.$w)("fps",60),2),p=f[0],h=f[1],g=$e((0,_e.$w)("total-frames",p),2),v=g[0],y=g[1],E=$e((0,_e.xT)("screen",[1280,720]),2),b=E[0],S=E[1],[o.useMemo((function(){return{pattern:t,speed:c,fps:p,totalFrames:v,resolution:b}}),[t,c,p,v,b]),function(e){n(e.pattern),s(e.speed),h(e.fps),y(e.totalFrames),S(e.resolution)}]),2),k=x[0],O=x[1],A=Ve(k),P=Je(function(e,t){var n=q(o.useState({current:"no"}),2),r=n[0],l=n[1];return[r,$(regeneratorRuntime.mark((function n(){var r,a,i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l({current:"rendering",progress:0}),r=new(m())({quality:5,repeat:0}),a=e.totalFrames||e.fps,i=regeneratorRuntime.mark((function n(i){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d((function(){var n=document.createElement("canvas");n.width=e.resolution[0]>0?e.resolution[0]:32,n.height=e.resolution[1]>0?e.resolution[1]:32,J(n,e.pattern,i,t,{fps:e.fps}),l({current:"rendering",progress:i/a}),r.addFrame(n,{delay:1e3/(e.speed*e.fps),copy:!0})}));case 2:case"end":return n.stop()}}),n)})),o=0;case 5:if(!(o<a)){n.next=10;break}return n.delegateYield(i(o),"t0",7);case 7:++o,n.next=5;break;case 10:r.on("progress",(function(e){l({current:"exporting",progress:e})})),r.on("finished",(function(e){window.open(URL.createObjectURL(e)),l({current:"no"})})),r.render();case 13:case"end":return n.stop()}}),n)})))]}(k,A),2),j=P[0],I=P[1];return o.createElement(o.Fragment,null,o.createElement(Ke,{def:k,assets:A,onClick:function(){return C(!0)}}),o.createElement(r.Z,{open:w,maxWidth:"xl",fullWidth:!0},o.createElement(l.Z,null,o.createElement(Ue,{value:k,onChange:O})),o.createElement(a.Z,null,o.createElement(i.Z,{color:"secondary",onClick:function(){return C(!1)}},"Close"),o.createElement(i.Z,{color:"primary",disabled:k.totalFrames<=0,onClick:function(){C(!1),I()}},"Render"))),o.createElement(Ye,{status:j}))}}}]);