"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[84],{74084:(e,t,n)=>{n.r(t),n.d(t,{default:()=>qe});var r=n(48623),l=n(29525),o=n(66856),i=n(282),a=n(67294),u=n(22318),c=n(41749),s=n(36253),f=n(89762),h=n.n(f);function p(e,t,n,r,l,o,i){try{var a=e[o](i),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,l)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var o=e.apply(t,n);function i(e){p(o,r,l,i,a,"next",e)}function a(e){p(o,r,l,i,a,"throw",e)}i(void 0)}))}}function d(e,t){return new Promise((function(n,r){null!=t&&t.active?requestAnimationFrame(m(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:n();case 4:case"end":return t.stop()}}),t)})))):setTimeout(m(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:n();case 4:case"end":return t.stop()}}),t)}))),0)}))}function g(e,t,n,r){function l(e){var t=(0|e).toString(16);return 1==t.length?"0"+t:t}return"#".concat(l(255*e)).concat(l(255*t)).concat(l(255*n))}function v(e,t,n,r){return"rgba(".concat(255*e|0,", ").concat(255*t|0,", ").concat(255*n|0,", ").concat(null!=r?r:1,")")}function y(e,t,n){return[e/255,t/255,n/255,1]}function b(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}y(178,76,229),y(80,200,120),y(175,237,152),y(246,240,224),y(255,223,0),y(255,209,219),y(204,141,205),y(255,192,203),y(255,20,147),y(255,0,255),y(255,255,0),y(127,0,0),y(0,255,255),y(255,0,0),y(0,255,0),y(1,1,1),y(127,127,127),y(255,255,255),y(213,172,119),y(0,0,255),y(152,251,237),y(173,216,230),y(204,204,255),y(137,207,240),y(100,149,237),y(7,42,108),y(245,118,26),y(253,103,58),y(255,140,0),y(227,74,39),y(255,241,215),y(64,0,255);var C=function(){function e(t){var n,r;x(this,e),this.canvas=t,this.gl=null!==(n=null!==(r=t.getContext("webgl"))&&void 0!==r?r:t.getContext("experimental-webgl"))&&void 0!==n?n:function(){throw new Error("")}()}return Z(e,[{key:"ref",value:function(){return this.gl}},{key:"createBuffer",value:function(){var e=this.gl.createBuffer();if(null==e)throw new Error("");return new A(this.gl,e)}},{key:"createProgram",value:function(e,t){var n=this.gl.createProgram();if(null==n)throw new Error("");var r=this.createShader(e,this.gl.VERTEX_SHADER);this.gl.attachShader(n,r),this.gl.deleteShader(r);var l=this.createShader("precision highp float;\n\n"+t,this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(n,l),this.gl.deleteShader(l),this.gl.linkProgram(n),!this.gl.getProgramParameter(n,this.gl.LINK_STATUS))throw new Error("VALIDATE_STATUS: ".concat(this.gl.getProgramParameter(n,this.gl.VALIDATE_STATUS)," ERROR: ").concat(this.gl.getError()));return new O(this.gl,n)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT),this.gl.clearColor(0,0,0,1)}},{key:"render",value:function(e,t){var n=this,r=e.ref();this.gl.useProgram(r),Object.keys(t).forEach((function(e){var l=t[e],o=n.gl.getUniformLocation(r,e);if(o)if(Array.isArray(l))switch(l.length){case 2:n.gl.uniform2f(o,l[0],l[1]);break;case 3:n.gl.uniform3f(o,l[0],l[1],l[2]);break;case 4:n.gl.uniform4f(o,l[0],l[1],l[2],l[3])}else n.gl.uniform1f(o,l)})),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}},{key:"createShader",value:function(e,t){var n=this.gl.createShader(t);if(null==n)throw new Error("");if(this.gl.shaderSource(n,e),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))throw new Error((t==this.gl.VERTEX_SHADER?"VERTEX":"FRAGMENT")+" SHADER:\n"+this.gl.getShaderInfoLog(n));return n}},{key:"width",value:function(){return this.canvas.clientWidth}},{key:"height",value:function(){return this.canvas.clientHeight}}]),e}(),O=function(){function e(t,n){x(this,e),S(this,"destroyed",!1),this.gl=t,this.program=n}return Z(e,[{key:"ref",value:function(){return this.program}},{key:"ok",value:function(){return!this.destroyed}},{key:"destroy",value:function(){this.gl.deleteProgram(this.program),this.destroyed=!0}}]),e}(),A=function(){function e(t,n){x(this,e),S(this,"destroyed",!1),this.gl=t,this.buffer=n}return Z(e,[{key:"ref",value:function(){return this.buffer}},{key:"ok",value:function(){return!this.destroyed}},{key:"bind",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(0,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(0)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.buffer),this.destroyed=!0}}]),e}();function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(a)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t,n,r,l,o,i){try{var a=e[o](i),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,l)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var o=e.apply(t,n);function i(e){P(o,r,l,i,a,"next",e)}function a(e){P(o,r,l,i,a,"throw",e)}i(void 0)}))}}function R(e,t,n){return F.apply(this,arguments)}function F(){return(F=I(regeneratorRuntime.mark((function e(t,n,r){var l,o,i,a,u,c,s,f,h,p,m,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=j(t,2),o=l[0],i=l[1],(a=document.createElement("canvas")).width=o,a.height=i,u=new C(a),c=fetch(n).then((function(e){return e.text()})),s=fetch(r).then((function(e){return e.text()})),e.next=9,Promise.all([c,s]);case 9:return f=e.sent,h=j(f,2),p=h[0],m=h[1],(d=u.createBuffer()).ok()||console.error("failed to create buffer"),(g=u.createProgram(p,m)).ok()||console.error("failed to create program"),e.abrupt("return",[d,g,a]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return((1048320&function(e,t){t|=0;var n=function(e,t){return t^t>>e};return t*=3039394381,t=n(8,t+=e=e),t=function(e,t){return t^t<<8}(0,t+=1759714724),n(8,t*=458671337)}(e,t))>>8)/4095}var W=["x","y","value"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){var n,r,l,o,i,a,u,c,s,f,h,p,m,d,v=t.x,y=t.y,b=t.value,E=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(t,W),S=[e.width,e.height],x=Math.min(Math.max(12,Math.min.apply(Math,S)/12.5),256)*(null!==(n=null===(r=E.style)||void 0===r?void 0:r.size)&&void 0!==n?n:1),w=e.getContext("2d");w.save(),w.textBaseline="top",w.font="".concat(x,"px ").concat((null!==(l=null===(o=E.style)||void 0===o?void 0:o.fonts)&&void 0!==l?l:["Uni Sans Heavy","Roboto","Helvetica","Arial","sans-serif"]).join(", "));var Z=w.measureText(b),C=(1+v)/2*e.width-Z.width/2;C<10?(C=10,w.textAlign="left"):C+Z.width>=e.width-10?(C=e.width-Z.width-10,w.textAlign="left"):(w.textAlign="center",C=(1+v)/2*e.width);var O=(1+y)/2*e.height-x/2;O<10?O=10:O+x/2>=e.height-x-10&&(O=e.height-x-10);var A=g.apply(void 0,U(null!==(i=null===(a=E.style)||void 0===a||null===(u=a.fillColor)||void 0===u?void 0:u.slice(0,3))&&void 0!==i?i:[1,1,1])),j=g.apply(void 0,U(null!==(c=null===(s=E.style)||void 0===s||null===(f=s.strokeColor)||void 0===f?void 0:f.slice(0,3))&&void 0!==c?c:[1/256,1/256,1/256]));w.lineWidth=null!==(h=null===(p=E.style)||void 0===p?void 0:p.lineWidth)&&void 0!==h?h:Math.max(null!==(m=null===(d=E.style)||void 0===d?void 0:d.size)&&void 0!==m?m:1,1),w.fillStyle=A,j!=A&&(w.strokeStyle=j),w.fillText(b,C,O),j!=A&&w.strokeText(b,C,O),w.restore()}function X(e,t,n){var r,l,o,i,a,u,c,s,f,h,p,m,d,g,v,y,b,E,S,x,w,Z,C,O,A,j,k,P,I,R,F,T;if(0!==n.text.length){var W=null!==(r=n.stageLengths)&&void 0!==r?r:[15,15,15,15],D=W.reduce((function(e,t){return e+t}),0),M=t%D,U=null!=n.align?n.align[null!==(l=(t/D|0)%n.align.length)&&void 0!==l?l:1]:"center",B=n.text[(t/D|0)%n.text.length],X=.5+(null!==(o=null===(i=n.style)||void 0===i?void 0:i.offsetX)&&void 0!==o?o:0),Y=.5+(null!==(a=null===(u=n.style)||void 0===u?void 0:u.offsetY)&&void 0!==a?a:0);switch(U){case"left":X=-.95+(null!==(c=null===(s=n.style)||void 0===s?void 0:s.offsetX)&&void 0!==c?c:0);break;case"right":X=.95+(null!==(f=null===(h=n.style)||void 0===h?void 0:h.offsetX)&&void 0!==f?f:0);break;case"center":Y=0+(null!==(p=null===(m=n.style)||void 0===m?void 0:m.offsetY)&&void 0!==p?p:0);break;case"top":Y=-.95+(null!==(d=null===(g=n.style)||void 0===g?void 0:g.offsetY)&&void 0!==d?d:0);break;case"bottom":Y=.95+(null!==(v=null===(y=n.style)||void 0===y?void 0:y.offsetY)&&void 0!==v?v:0);break;case"top-left":X=-.95+(null!==(b=null===(E=n.style)||void 0===E?void 0:E.offsetX)&&void 0!==b?b:0),Y=-.95+(null!==(S=null===(x=n.style)||void 0===x?void 0:x.offsetY)&&void 0!==S?S:0);break;case"top-right":X=.95+(null!==(w=null===(Z=n.style)||void 0===Z?void 0:Z.offsetX)&&void 0!==w?w:0),Y=-.95+(null!==(C=null===(O=n.style)||void 0===O?void 0:O.offsetY)&&void 0!==C?C:0);break;case"bottom-left":X=-.95+(null!==(A=null===(j=n.style)||void 0===j?void 0:j.offsetX)&&void 0!==A?A:0),Y=.95+(null!==(k=null===(P=n.style)||void 0===P?void 0:P.offsetY)&&void 0!==k?k:0);break;case"bottom-right":X=.95+(null!==(I=null===(R=n.style)||void 0===R?void 0:R.offsetX)&&void 0!==I?I:0),Y=.95+(null!==(F=null===(T=n.style)||void 0===T?void 0:T.offsetY)&&void 0!==F?F:0)}var z=e.getContext("2d");if(z.save(),M<W[0]);else if(W[0]>0&&M<W[0]+W[1]){var $,H,V,N,q,G,K,J;z.globalAlpha=z.globalAlpha*((null!==($=null===(H=n.style)||void 0===H?void 0:H.fillColor)&&void 0!==$?$:[0,0,0,1])[3]*(M-W[0])/W[1]),_(e,{x:X,y:Y,value:B,style:L(L(L({lineWidth:null===(V=n.style)||void 0===V?void 0:V.lineWidth},null!=(null===(N=n.style)||void 0===N?void 0:N.fillColor)?{fillColor:n.style.fillColor}:{}),null!=(null===(q=n.style)||void 0===q?void 0:q.strokeColor)?{strokeColor:n.style.strokeColor}:{}),{},{bold:null===(G=n.style)||void 0===G?void 0:G.bold,size:null!==(K=null===(J=n.style)||void 0===J?void 0:J.size)&&void 0!==K?K:1})})}else if(W[1]>0&&M<W[0]+W[1]+W[2]){var Q,ee,te,ne,re,le,oe,ie;z.globalAlpha=z.globalAlpha*(null!==(Q=null===(ee=n.style)||void 0===ee?void 0:ee.fillColor)&&void 0!==Q?Q:[0,0,0,1])[3],_(e,{x:X,y:Y,value:B,style:L(L(L({lineWidth:null===(te=n.style)||void 0===te?void 0:te.lineWidth},null!=(null===(ne=n.style)||void 0===ne?void 0:ne.fillColor)?{fillColor:n.style.fillColor}:{}),null!=(null===(re=n.style)||void 0===re?void 0:re.strokeColor)?{strokeColor:n.style.strokeColor}:{}),{},{bold:null===(le=n.style)||void 0===le?void 0:le.bold,size:null!==(oe=null===(ie=n.style)||void 0===ie?void 0:ie.size)&&void 0!==oe?oe:1})})}else if(W[2]>0&&M<W[0]+W[1]+W[2]+W[3]){var ae,ue,ce,se,fe,he,pe,me,de=M-(W[0]+W[1]+ +W[2]);z.globalAlpha=z.globalAlpha*((null!==(ae=null===(ue=n.style)||void 0===ue?void 0:ue.fillColor)&&void 0!==ae?ae:[0,0,0,1])[3]*((W[3]-de)/W[3])),_(e,{x:X,y:Y,value:B,style:L(L(L({lineWidth:null===(ce=n.style)||void 0===ce?void 0:ce.lineWidth},null!=(null===(se=n.style)||void 0===se?void 0:se.fillColor)?{fillColor:n.style.fillColor}:{}),null!=(null===(fe=n.style)||void 0===fe?void 0:fe.strokeColor)?{strokeColor:n.style.strokeColor}:{}),{},{bold:null===(he=n.style)||void 0===he?void 0:he.bold,size:null!==(pe=null===(me=n.style)||void 0===me?void 0:me.size)&&void 0!==pe?pe:1})})}z.restore()}}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(a)throw l}}return o}}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t,n,r,l,o,i){try{var a=e[o](i),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,l)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var o=e.apply(t,n);function i(e){V(o,r,l,i,a,"next",e)}function a(e){V(o,r,l,i,a,"throw",e)}i(void 0)}))}}function q(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=["fill","opacity","frame-offset","clip-circle","pattern","text","flash-text","subliminal","flash-fill"];function Q(e,t,n,r,l){switch(t.type){case"fill":return function(e,t){var n=e.getContext("2d");n.save(),n.globalAlpha=t[3],n.fillStyle=g.apply(void 0,b(t)),n.fillRect(0,0,e.width,e.height),n.restore()}(e,t.color);case"opacity":return function(e,o,i){var a=e.getContext("2d");a.save(),a.globalAlpha=a.globalAlpha*o,function(e){t.children.forEach((function(t){return Q(e,t,n,r,l)}))}(e),a.restore()}(e,t.value);case"frame-offset":return t.children.forEach((function(o){return Q(e,o,n+t.by,r,l)}));case"clip-circle":return function(e,o,i,a){if(0!==i){var u=document.createElement("canvas");u.width=i*Math.min(e.width,e.height),u.height=u.width,function(e){t.children.forEach((function(t){return Q(e,t,n,r,l)}))}(u);var c=(o[0]+1)*(e.width/2),s=(o[1]+1)*(e.height/2),f=u.width/2,h=e.getContext("2d");h.save(),h.beginPath(),h.arc(c,s,f,0,2*Math.PI,!0),h.closePath(),h.clip(),h.drawImage(u,c-f,s-f,u.width,u.height),h.restore()}}(e,t.origin,t.radius);case"pattern":var o=r.shaders[t.pattern];return null==o?void 0:function(e,t,n){var r,l,o,i,a,u,c,s,f,h,p,m,d=n.shader[2];d.width=e.width,d.height=e.height;var g=new C(d),v={time:t/(null!==(r=n.fps)&&void 0!==r?r:60),rotation:1,direction:1,branchCount:4,resolution:[d.width,d.height],aspect:d.width>d.height?[d.width/d.height,1]:[1,d.height/d.width],bgColor:null!==(l=null===(o=n.colors)||void 0===o?void 0:o.bgColor)&&void 0!==l?l:[0,0,0,0],fgColor:null!==(i=null===(a=n.colors)||void 0===a?void 0:a.fgColor)&&void 0!==i?i:[1,1,1,1],pulseColor:null!==(u=null===(c=n.colors)||void 0===c?void 0:c.pulseColor)&&void 0!==u?u:[178/255,76/255,229/255,1],dimColor:null!==(s=null===(f=n.colors)||void 0===f?void 0:f.dimColor)&&void 0!==s?s:[0,0,0,0],extraColor:null!==(h=null===(p=n.colors)||void 0===p?void 0:p.extraColor)&&void 0!==h?h:[0,0,0,0]};g.clear(),n.shader[0].bind(),g.render(n.shader[1],v),null===(m=e.getContext("2d"))||void 0===m||m.drawImage(d,0,0,e.width,e.height)}(e,n,{shader:o,colors:{bgColor:t.colors.bg,fgColor:t.colors.fg,dimColor:t.colors.dim,extraColor:t.colors.extra,pulseColor:t.colors.pulse},fps:null==l?void 0:l.fps});case"text":return _(e,{value:t.value,x:t.coords[0],y:t.coords[1],style:t.style});case"flash-text":return X(e,n,{text:t.text,align:t.align,stageLengths:t.stages,style:t.style});case"subliminal":return function(e,t,n){var r,l;if(0!==n.text.length){var o=null!==(r=n.stageLengths)&&void 0!==r?r:[5,2,3,2],i=t/o.reduce((function(e,t){return e+t}),0)|0,a=function(e){var t=0,n=0;if(0===e.length)return t;for(n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}(n.text.reduce((function(e,t){return"".concat(e,":").concat(t)}),"")),u=2*T(a,2*i)-1,c=2*T(a,2*i+1)-1;X(e,t,{text:n.text,align:["center"],stageLengths:o,style:L(L({},null!==(l=n.style)&&void 0!==l?l:{}),{},{offsetX:u,offsetY:c})})}}(e,n,{text:t.text,stageLengths:t.stages,style:t.style});case"flash-fill":return function(e,t,n){var r,l,o,i=null!==(r=n.stageLengths)&&void 0!==r?r:[15,15,15,15],a=t%i.reduce((function(e,t){return e+t}),0),u=null!==(l=null===(o=n.style)||void 0===o?void 0:o.backgroundColor)&&void 0!==l?l:[1,1,1,1],c=g.apply(void 0,b(u)),s=u[3],f=e.getContext("2d");if(a<i[0]);else if(i[0]>0&&a<i[0]+i[1])f.save(),f.globalAlpha=s*(a-i[1])/i[1],f.fillStyle=c,f.fillRect(0,0,e.width,e.height),f.restore();else if(i[1]>0&&a<i[0]+i[1]+i[2])f.save(),f.globalAlpha=s,f.fillStyle=c,f.fillRect(0,0,e.width,e.height),f.restore();else if(i[2]>0&&a<i[0]+i[1]+i[2]+i[3]){var h=a-(i[0]+i[1]+ +i[2]);f.save(),f.globalAlpha=s*(i[3]-h)/i[3],f.fillStyle=c,f.fillRect(0,0,e.width,e.height),f.restore()}}(e,n,{stageLengths:t.stages,style:{backgroundColor:t.color}})}}function ee(e,t,n,r,l){var o;(o=e).getContext("2d").clearRect(0,0,o.width,o.height),t.forEach((function(t){return Q(e,t,n,r,l)}))}function te(e){return e.reduce((function(e,t){switch(t.type){case"clip-circle":case"frame-offset":case"opacity":return[].concat(q(e),q(te(t.children)));case"pattern":return[].concat(q(e),[t.pattern]);default:return e}}),[])}function ne(){return(ne=N(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=N(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=n,e.next=4,R(t,"shaders/spiral.vs","shaders/".concat(n,".fs"));case 4:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,e.abrupt("return",r.filter((function(e){return null!=e})).map((function(e){return e})).reduce((function(e,t){var n=H(t,2),r=n[0],l=n[1];return z(z({},e),{},$({},r,l))}),{}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=n(93565),le=n(17812),oe=n(38380),ie=n(46479),ae=n(99956),ue=n(73205),ce=n(78135),se=n(50743),fe=n(61201),he=n(26209),pe=n(44845),me=n(73099),de=["value","onChange","children"];function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(a)throw l}}return o}}(e,t)||Se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){if(e){if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var we=function(e){var t=e.value,n=e.onChange,r=e.children,l=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,de),o=Ee(a.useState(null),2),i=o[0],u=o[1];return a.createElement(a.Fragment,null,t.map((function(e,l){return a.createElement(c.Z,{key:l,container:!0,spacing:3},a.createElement(c.Z,{item:!0,style:{width:"100px"}},a.createElement(le.Z,{color:"secondary",onClick:function(){return n([].concat(be(t.slice(0,Math.max(0,l-1))),[e],be(t.slice(l-1,l)),be(t.slice(l+1))))}},"/\\"),a.createElement(le.Z,{color:"secondary",onClick:function(){return n([].concat(be(t.slice(0,Math.max(0,l))),be(t.slice(l+1,l+2)),[e],be(t.slice(l+2))))}},"\\/")),a.createElement(c.Z,{item:!0,style:{width:"calc(100% - 164px)"}},r(e,(function(e){return n([].concat(be(t.slice(0,l)),[e],be(t.slice(l+1))))}))),a.createElement(c.Z,{item:!0,style:{width:"64px"}},a.createElement(le.Z,{color:"secondary",onClick:function(){return n([].concat(be(t.slice(0,l)),be(t.slice(l+1))))}},"X")))})),a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,style:{flexGrow:1}}),a.createElement(c.Z,{item:!0},a.createElement(le.Z,{onClick:function(e){l.createOptions?u(e.currentTarget):n([].concat(be(t),[l.create()]))}},"+"),l.createOptions&&a.createElement(oe.Z,{open:null!=i,anchorEl:i,onClose:function(){return u(null)}},l.createOptions.map((function(e,r){return a.createElement(ie.Z,{key:r,onClick:function(){n([].concat(be(t),[l.create(e)])),u(null)}},e)}))))))},Ze=function(e){var t=e.label,n=e.value,r=e.onChange;return a.createElement(a.Fragment,null,a.createElement(c.Z,{container:!0,spacing:1},a.createElement(c.Z,{item:!0,xs:12},a.createElement(u.Z,{variant:"h4",paragraph:!0},t)),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement(s.Z,{type:"number",label:"Hidden",fullWidth:!0,inputProps:{min:0,step:1},value:n[0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([parseInt(e.target.value,0),n[1],n[2],n[3]])}))})),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement(s.Z,{type:"number",label:"Fade in",fullWidth:!0,inputProps:{min:0,step:1},value:n[1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],parseInt(e.target.value,0),n[2],n[3]])}))})),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement(s.Z,{type:"number",label:"Visible",fullWidth:!0,inputProps:{min:0,step:1},value:n[2],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],n[1],parseInt(e.target.value,0),n[3]])}))})),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement(s.Z,{type:"number",label:"Fade out",fullWidth:!0,inputProps:{min:0,step:1},value:n[3],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r([n[0],n[1],n[2],parseInt(e.target.value,0)])}))}))))},Ce=function(e){var t=e.label,n=e.value,r=e.onChange,l=Ee(a.useState(null),2),o=l[0],u=l[1];return a.createElement(a.Fragment,null,a.createElement(ae.Z,{component:"div",style:{width:"100%",background:g.apply(void 0,be(n)),padding:"0.25em",margin:"0 0.25em"}},a.createElement(i.Z,{style:{background:"white"},variant:"outlined",onClick:function(e){return u(e.currentTarget)}},t)),a.createElement(ue.ZP,{open:null!=o,onClose:function(){return u(null)},anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"left"}},a.createElement(re.xS,{color:v.apply(void 0,be(n)),onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t;return r([e.rgb.r/255,e.rgb.g/255,e.rgb.b/255,null!==(t=e.rgb.a)&&void 0!==t?t:1])}))})))},Oe=function(e){var t,n,r=e.label,l=e.value,o=e.onChange;return a.createElement(c.Z,{container:!0,spacing:1},a.createElement(c.Z,{item:!0,xs:12},a.createElement(u.Z,{variant:"h4",paragraph:!0},r)),a.createElement(c.Z,{item:!0,xs:12,sm:6},a.createElement(s.Z,{type:"number",label:"X",fullWidth:!0,inputProps:{step:.01},value:null!==(t=l[0])&&void 0!==t?t:0,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return o([parseFloat(e.target.value),l[1]])}))})),a.createElement(c.Z,{item:!0,xs:12,sm:6},a.createElement(s.Z,{type:"number",label:"Y",fullWidth:!0,inputProps:{step:.01},value:null!==(n=l[1])&&void 0!==n?n:0,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return o([l[0],parseFloat(e.target.value)])}))})))},Ae=function(e){var t,n,r,l,o=e.label,i=e.value,f=e.onChange,h=e.children,p=Ee(a.useState(!1),2),m=p[0],d=p[1];return a.createElement(ce.Z,{expanded:m,onChange:function(e,t){return d(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},o)),a.createElement(fe.Z,null,a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:6},a.createElement(s.Z,{inputProps:{min:0,step:.1},type:"number",label:"Font size",fullWidth:!0,value:null!==(t=i.size)&&void 0!==t?t:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return f(ve(ve({},i),{},{size:parseFloat(e.target.value)}))}))})),a.createElement(c.Z,{item:!0,xs:6},a.createElement(s.Z,{inputProps:{min:0,step:1},type:"number",label:"Line width",fullWidth:!0,value:null!==(n=i.lineWidth)&&void 0!==n?n:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return f(ve(ve({},i),{},{lineWidth:parseFloat(e.target.value)}))}))})),a.createElement(c.Z,{item:!0,xs:6},a.createElement(Ce,{label:"Fill Color",value:null!==(r=i.fillColor)&&void 0!==r?r:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return f(ve(ve({},i),{},{fillColor:e}))}))})),a.createElement(c.Z,{item:!0,xs:6},a.createElement(Ce,{label:"Stroke Color",value:null!==(l=i.strokeColor)&&void 0!==l?l:[0,0,0,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return f(ve(ve({},i),{},{strokeColor:e}))}))})),h)))},je=function(e){var t,n,r=e.label,l=e.value,o=e.onChange;return a.createElement(Ae,{label:r,value:l,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return o(ve(ve({},l),e))}))},a.createElement(c.Z,{item:!0,xs:12},a.createElement(Oe,{label:"Offset",value:[null!==(t=l.offsetX)&&void 0!==t?t:0,null!==(n=l.offsetY)&&void 0!==n?n:0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=Ee(e,2),n=t[0],r=t[1];return o(ve(ve({},l),{},{offsetX:n,offsetY:r}))}))})))},ke=function(e){var t=e.value,n=e.onChange;return a.createElement(he.Z,{label:"align",fullWidth:!0,value:t,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return n(e.target.value)}))},a.createElement(ie.Z,{value:"center"},"Center"),a.createElement(ie.Z,{value:"top"},"Top"),a.createElement(ie.Z,{value:"bottom"},"Bottom"),a.createElement(ie.Z,{value:"left"},"Left"),a.createElement(ie.Z,{value:"right"},"Right"),a.createElement(ie.Z,{value:"top-left"},"Top Left"),a.createElement(ie.Z,{value:"top-right"},"Top Right"),a.createElement(ie.Z,{value:"bottom-left"},"Bottom Left"),a.createElement(ie.Z,{value:"bottom-right"},"Bottom Right"))},Pe=function(e){var t,n,r,l,o,i,f,h,p,m,d,g,v=e.value,y=e.onChange,b=Ee(a.useState(!1),2),E=b[0],S=b[1];switch(v.type){case"fill":return a.createElement(ce.Z,{expanded:E,onChange:function(e,t){return S(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},"Fill")),a.createElement(fe.Z,null,a.createElement(Ce,{label:"Color",value:v.color,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{color:e}))}))})));case"opacity":return a.createElement(ce.Z,{expanded:E,onChange:function(e,t){return S(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},"Opacity")),a.createElement(fe.Z,null,a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12},a.createElement(pe.Z,{valueLabelDisplay:"auto",min:0,max:1,step:.01,value:v.value,onChange:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return y(ve(ve({},v),{},{value:t}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(Ie,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{children:e}))}))})))));case"frame-offset":return a.createElement(ce.Z,{expanded:E,onChange:function(e,t){return S(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},"Frame Offset")),a.createElement(fe.Z,null,a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12},a.createElement(s.Z,{inputProps:{step:1},fullWidth:!0,type:"number",label:"By",value:v.by,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{by:parseInt(e.target.value,0)}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(Ie,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{children:e}))}))})))));case"clip-circle":return a.createElement(ce.Z,{expanded:E,onChange:function(e,t){return S(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},"Clip (Circle)")),a.createElement(fe.Z,null,a.createElement(c.Z,{container:!0,spacing:3,alignItems:"flex-end"},a.createElement(c.Z,{item:!0,xs:8},a.createElement(Oe,{label:"Origin",value:v.origin,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{origin:e}))}))})),a.createElement(c.Z,{item:!0,xs:4},a.createElement(s.Z,{type:"number",label:"Radius",fullWidth:!0,value:null!==(t=v.radius)&&void 0!==t?t:1,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t;return y(ve(ve({},v),{},{radius:null!==(t=parseFloat(e.target.value))&&void 0!==t?t:0}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(Ie,{value:v.children,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{children:e}))}))})))));case"text":return a.createElement(ce.Z,{expanded:E,onChange:function(e,t){return S(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},"Flash Text")),a.createElement(fe.Z,null,a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12},a.createElement(Oe,{label:"Coords",value:v.coords,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{coords:e}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(s.Z,{fullWidth:!0,label:"Value",value:v.value,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{value:e.target.value}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(Ae,{label:"Styles",value:null!==(n=v.style)&&void 0!==n?n:{},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{style:e}))}))})))));case"flash-fill":return a.createElement(ce.Z,{expanded:E,onChange:function(e,t){return S(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},"Flash Fill")),a.createElement(fe.Z,null,a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12},a.createElement(Ze,{label:"Stages",value:null!==(r=v.stages)&&void 0!==r?r:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{stages:e}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(Ce,{label:"Color",value:v.color,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{color:e}))}))})))));case"flash-text":return a.createElement(ce.Z,{expanded:E,onChange:function(e,t){return S(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},"Flash Text")),a.createElement(fe.Z,null,a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12},a.createElement(Ze,{label:"Stages",value:null!==(l=v.stages)&&void 0!==l?l:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{stages:e}))}))})),a.createElement(c.Z,{item:!0,xs:12},null!=v.align&&v.align.map((function(e,t){return a.createElement(ke,{key:t,value:e,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{align:[].concat(be(v.align.slice(0,t)),[e],be(v.align.slice(t+1)))}))}))})}))),a.createElement(c.Z,{item:!0,xs:12},a.createElement(s.Z,{multiline:!0,fullWidth:!0,label:"Messages",value:v.text.join("\n"),onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{text:e.target.value.split("\n")}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(je,{label:"Styles",value:null!==(o=v.style)&&void 0!==o?o:{},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{style:e}))}))})))));case"subliminal":return a.createElement(ce.Z,{expanded:E,onChange:function(e,t){return S(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},"Subliminals")),a.createElement(fe.Z,null,a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12},a.createElement(Ze,{label:"Stages",value:null!==(i=v.stages)&&void 0!==i?i:[15,15,15,15],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{stages:e}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(s.Z,{multiline:!0,fullWidth:!0,label:"Messages",value:v.text.join("\n"),onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{text:e.target.value.split("\n")}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(Ae,{label:"Styles",value:null!==(f=v.style)&&void 0!==f?f:{},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{style:e}))}))})))));case"pattern":return a.createElement(ce.Z,{expanded:E,onChange:function(e,t){return S(t)}},a.createElement(se.Z,{expandIcon:a.createElement(me.Z,null)},a.createElement(u.Z,{variant:"h3"},"Pattern")),a.createElement(fe.Z,null,a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12},a.createElement(s.Z,{fullWidth:!0,label:"Shader",value:v.pattern,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{pattern:e.target.value}))}))})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(u.Z,{variant:"h4",paragraph:!0},"Properties"),a.createElement(Ce,{label:"Background",value:null!==(h=v.colors.bg)&&void 0!==h?h:[0,0,0,0],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{colors:ve(ve({},v.colors),{},{bg:e})}))}))}),a.createElement(Ce,{label:"Foreground",value:null!==(p=v.colors.fg)&&void 0!==p?p:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{colors:ve(ve({},v.colors),{},{fg:e})}))}))}),a.createElement(Ce,{label:"Dim",value:null!==(m=v.colors.dim)&&void 0!==m?m:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{colors:ve(ve({},v.colors),{},{dim:e})}))}))}),a.createElement(Ce,{label:"Pulse",value:null!==(d=v.colors.pulse)&&void 0!==d?d:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{colors:ve(ve({},v.colors),{},{pulse:e})}))}))}),a.createElement(Ce,{label:"Extra",value:null!==(g=v.colors.extra)&&void 0!==g?g:[1,1,1,1],onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y(ve(ve({},v),{},{colors:ve(ve({},v.colors),{},{extra:e})}))}))})))));default:return a.createElement(u.Z,{variant:"body1"}," Unrecognized command type '",v.type,"'")}},Ie=function(e){var t=e.value,n=e.onChange;return a.createElement(we,{value:t,onChange:n,createOptions:J,create:function(e){return function(e){switch(e){case"fill":return{type:"fill",color:[0,0,0,1]};case"opacity":return{type:"opacity",value:1,children:[]};case"frame-offset":return{type:"frame-offset",by:0,children:[]};case"clip-circle":return{type:"clip-circle",origin:[0,0],radius:1,children:[]};case"pattern":return{type:"pattern",pattern:"full-inwards",colors:{}};case"text":return{type:"text",value:"",coords:[0,0]};case"flash-text":return{type:"flash-text",text:[]};case"subliminal":return{type:"subliminal",text:[]};case"flash-fill":return{type:"flash-fill",color:[1,1,1,1]};default:return{type:"text",value:e,coords:[0,0]}}}(e)}},(function(e,t){return a.createElement(Pe,{value:e,onChange:t})}))};function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=function(e){var t=e.value,n=e.onChange;return a.createElement(a.Fragment,null,a.createElement(u.Z,{variant:"h1",paragraph:!0},"Spiral Editor"),a.createElement(u.Z,{variant:"h2",paragraph:!0},"Pattern"),a.createElement(Ie,{value:t.pattern,onChange:function(e){return n(Fe(Fe({},t),{},{pattern:e}))}}),a.createElement("div",{style:{padding:"1em"}}),a.createElement(u.Z,{variant:"h2",paragraph:!0},"Resolution"),a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:6},a.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Width",value:t.resolution[0],onChange:function(e){return n(Fe(Fe({},t),{},{resolution:[parseInt(e.target.value,0),t.resolution[1]]}))}})),a.createElement(c.Z,{item:!0,xs:12,sm:6},a.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Height",value:t.resolution[1],onChange:function(e){return n(Fe(Fe({},t),{},{resolution:[t.resolution[0],parseInt(e.target.value,0)]}))}}))),a.createElement("div",{style:{padding:"1em"}}),a.createElement(u.Z,{variant:"h2",paragraph:!0},"Framerate"),a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:6,lg:4},a.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"FPS",value:t.fps,onChange:function(e){return n(Fe(Fe({},t),{},{fps:parseInt(e.target.value,0)}))}})),a.createElement(c.Z,{item:!0,xs:12,sm:6,lg:4},a.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Total Frames",value:t.totalFrames,onChange:function(e){return n(Fe(Fe({},t),{},{totalFrames:parseInt(e.target.value,0)}))}})),a.createElement(c.Z,{item:!0,xs:12,lg:4},a.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Speed",value:t.speed,onChange:function(e){return n(Fe(Fe({},t),{},{speed:parseFloat(e.target.value)}))}}))))},De=n(95477),Le=function(e){var t=e.className,n=e.status;return a.createElement(r.Z,{open:"no"!==n.current},a.createElement(l.Z,null,a.createElement(De.Z,{className:t,size:360,color:"rendering"===n.current?"primary":"secondary",variant:"determinate",value:("rendering"===n.current?0:50)+("no"!==n.current?50*n.progress:0)})))},Me=n(41120),Ue=n(56912);function Be(e){return function(e){if(Array.isArray(e))return _e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(a)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e){var t=a.useMemo((function(){return te(e.pattern)}),[e.pattern]),n=Xe(a.useState({}),2),r=n[0],l=n[1];return a.useEffect((function(){var n=!1;return function(e,t){return ne.apply(this,arguments)}(e.resolution,t).then((function(e){n||l(e)})),function(){n=!0}}),[e.resolution,t.join("|")]),{shaders:r}}var $e=(0,Me.Z)({root:{objectFit:"cover",width:"100%",height:"100vh"}},{name:"SpiralViewer"}),He=function(e){var t=e.def,n=e.assets,r=e.onClick,l=$e().root,o=a.useRef(null);return function(e,t){var n=t.enable,r=t.def,l=t.assets,o=a.useRef(performance.now()),i=a.useRef(0);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=a.useRef(e),r=a.useRef(0);a.useEffect((function(){n.current=e}),[e].concat(Be(t))),a.useEffect((function(){var e=!1,t=0;return t=requestAnimationFrame((function l(){e||(n.current&&(n.current(r.current),r.current=r.current+1),t=requestAnimationFrame(l))})),function(){cancelAnimationFrame(t),e=!0}}),[])}((function(){var t=o.current,n=performance.now(),a=1/(r.fps*r.speed),u=(n-t)/1e3;if(!(u<a)){for(;u>=a;)i.current=i.current+1,u-=a;o.current=performance.now()-u;var c=r.totalFrames>0?i.current%r.totalFrames:i.current;null!=e&&null!=l&&ee(e,r.pattern,c,l,{fps:r.fps})}}),[n,r,l,e])}(o.current,{enable:!0,assets:n,def:t}),a.createElement("canvas",{className:l,width:t.resolution[0],height:t.resolution[1],ref:o,onClick:r})};function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(a)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qe(){var e,t,n,u,c,s,f,p,m,g,v,y,b,E,S,x=Ve(a.useState(!1),2),w=x[0],Z=x[1],C=Ve((e=Xe((0,Ue.xT)("pattern",[]),2),t=e[0],n=e[1],u=Xe((0,Ue.$w)("speed",1),2),c=u[0],s=u[1],f=Xe((0,Ue.$w)("fps",60),2),p=f[0],m=f[1],g=Xe((0,Ue.$w)("total-frames",p),2),v=g[0],y=g[1],b=Xe((0,Ue.xT)("screen",[1280,720]),2),E=b[0],S=b[1],[a.useMemo((function(){return{pattern:t,speed:c,fps:p,totalFrames:v,resolution:E}}),[t,c,p,v,E]),function(e){n(e.pattern),s(e.speed),m(e.fps),y(e.totalFrames),S(e.resolution)}]),2),O=C[0],A=C[1],j=ze(O),k=Ve(function(e,t){var n=H(a.useState({current:"no"}),2),r=n[0],l=n[1];return[r,N(regeneratorRuntime.mark((function n(){var r,o,i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l({current:"rendering",progress:0}),r=new(h())({quality:5,repeat:0}),o=e.totalFrames||e.fps,i=regeneratorRuntime.mark((function n(i){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d((function(){var n=document.createElement("canvas");n.width=e.resolution[0],n.height=e.resolution[1],ee(n,e.pattern,i,t,{fps:e.fps}),l({current:"rendering",progress:i/o}),r.addFrame(n,{delay:1e3/(e.speed*e.fps),copy:!0})}));case 2:case"end":return n.stop()}}),n)})),a=0;case 5:if(!(a<o)){n.next=10;break}return n.delegateYield(i(a),"t0",7);case 7:++a,n.next=5;break;case 10:r.on("progress",(function(e){l({current:"exporting",progress:e})})),r.on("finished",(function(e){window.open(URL.createObjectURL(e)),l({current:"no"})})),r.render();case 13:case"end":return n.stop()}}),n)})))]}(O,j),2),P=k[0],I=k[1];return a.createElement(a.Fragment,null,a.createElement(He,{def:O,assets:j,onClick:function(){return Z(!0)}}),a.createElement(r.Z,{open:w,maxWidth:"xl",fullWidth:!0},a.createElement(l.Z,null,a.createElement(We,{value:O,onChange:A})),a.createElement(o.Z,null,a.createElement(i.Z,{color:"secondary",onClick:function(){return Z(!1)}},"Close"),a.createElement(i.Z,{color:"primary",onClick:function(){Z(!1),I()}},"Render"))),a.createElement(Le,{status:P}))}}}]);