"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[84],{74084:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ze});var n=r(48623),o=r(29525),l=r(66856),a=r(282),i=r(67294),u=r(22318),c=r(41749),s=r(87219),f=r(93565),d=r(73205),h=r(78135),v=r(98046),m=r(61201),g=r(73099);function p(e,t,r,n){function o(e){var t=(0|e).toString(16);return 1==t.length?"0"+t:t}return"#".concat(o(255*e)).concat(o(255*t)).concat(o(255*r))}function y(e,t,r,n){return"rgba(".concat(255*e|0,", ").concat(255*t|0,", ").concat(255*r|0,", ").concat(null!=n?n:1,")")}function b(e,t,r){return[e/255,t/255,r/255,1]}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return l}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}b(178,76,229),b(80,200,120),b(175,237,152),b(246,240,224),b(255,223,0),b(255,209,219),b(204,141,205),b(255,192,203),b(255,20,147),b(255,0,255),b(255,255,0),b(127,0,0),b(0,255,255),b(255,0,0),b(0,255,0),b(1,1,1),b(127,127,127),b(255,255,255),b(213,172,119),b(0,0,255),b(152,251,237),b(173,216,230),b(204,204,255),b(137,207,240),b(100,149,237),b(7,42,108),b(245,118,26),b(253,103,58),b(255,140,0),b(227,74,39),b(255,241,215),b(64,0,255);var S=function(e){var t=e.label,r=e.value,n=e.onChange;return i.createElement(i.Fragment,null,i.createElement(c.Z,{container:!0},i.createElement(c.Z,{item:!0,xs:12},i.createElement(u.Z,{variant:"h4",paragraph:!0},t)),i.createElement(c.Z,{item:!0,xs:12,sm:3},i.createElement(s.Z,{type:"number",label:"Hidden",fullWidth:!0,value:r[0],onChange:function(e){return n([parseInt(e.target.value,0),r[1],r[2],r[3]])}})),i.createElement(c.Z,{item:!0,xs:12,sm:3},i.createElement(s.Z,{type:"number",label:"Fade in",fullWidth:!0,value:r[1],onChange:function(e){return n([r[0],parseInt(e.target.value,0),r[2],r[3]])}})),i.createElement(c.Z,{item:!0,xs:12,sm:3},i.createElement(s.Z,{type:"number",label:"Visible",fullWidth:!0,value:r[2],onChange:function(e){return n([r[0],r[1],parseInt(e.target.value,0),r[3]])}})),i.createElement(c.Z,{item:!0,xs:12,sm:3},i.createElement(s.Z,{type:"number",label:"Fade out",fullWidth:!0,value:r[3],onChange:function(e){return n([r[0],r[1],r[2],parseInt(e.target.value,0)])}}))))},j=function(e){var t,r=e.label,n=e.value,o=e.onChange,l=C(i.useState(null),2),u=l[0],c=l[1];return i.createElement(i.Fragment,null,i.createElement(a.Z,{color:"primary",onClick:function(e){return c(e.currentTarget)}},r),i.createElement(d.ZP,{open:null!=u,onClose:function(){return c(null)},anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"left"}},i.createElement(f.xS,{color:y.apply(void 0,(t=n,function(e){if(Array.isArray(e))return A(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),onChange:function(e){var t;return o([e.rgb.r/255,e.rgb.g/255,e.rgb.b/255,null!==(t=e.rgb.a)&&void 0!==t?t:1])}})))},Z=function(e){var t=e.label,r=e.value,n=e.onChange;return i.createElement(c.Z,{container:!0},i.createElement(c.Z,{item:!0,xs:12},i.createElement(u.Z,{variant:"h4",paragraph:!0},t)),i.createElement(c.Z,{item:!0,xs:12,sm:6},i.createElement(s.Z,{type:"number",label:"X",fullWidth:!0,value:r[0],onChange:function(e){return n([parseFloat(e.target.value),r[1]])}})),i.createElement(c.Z,{item:!0,xs:12,sm:6},i.createElement(s.Z,{type:"number",label:"Y",fullWidth:!0,value:r[1],onChange:function(e){return n([r[0],parseFloat(e.target.value)])}})))},P=function(e){var t,r,n=e.label,o=e.value,l=e.onChange,a=e.children,f=C(i.useState(!1),2),d=f[0],p=f[1];return i.createElement(h.Z,{expanded:d,onChange:function(e,t){return p(t)}},i.createElement(v.Z,{expandIcon:i.createElement(g.Z,null)},i.createElement(u.Z,{variant:"h3"},n)),i.createElement(m.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:6},i.createElement(s.Z,{type:"number",label:"Font size",fullWidth:!0,value:o.size,onChange:function(e){return l(w(w({},o),{},{size:parseFloat(e.target.value)}))}})),i.createElement(c.Z,{item:!0,xs:6},i.createElement(s.Z,{type:"number",label:"Line width",fullWidth:!0,value:o.lineWidth,onChange:function(e){return l(w(w({},o),{},{lineWidth:parseFloat(e.target.value)}))}})),i.createElement(c.Z,{item:!0,xs:6},i.createElement(j,{label:"Fill Color",value:null!==(t=o.fillColor)&&void 0!==t?t:[1,1,1,1],onChange:function(e){return l(w(w({},o),{},{fillColor:e}))}})),i.createElement(c.Z,{item:!0,xs:6},i.createElement(j,{label:"Stroke Color",value:null!==(r=o.strokeColor)&&void 0!==r?r:[0,0,0,1],onChange:function(e){return l(w(w({},o),{},{strokeColor:e}))}})),a)))},k=function(e){var t,r,n=e.label,o=e.value,l=e.onChange;return i.createElement(P,{label:n,value:o,onChange:function(e){return l(w(w({},o),e))}},i.createElement(c.Z,{item:!0,xs:12},i.createElement(Z,{label:"Offset",value:[null!==(t=o.offsetX)&&void 0!==t?t:0,null!==(r=o.offsetY)&&void 0!==r?r:0],onChange:function(e){var t=C(e,2),r=t[0],n=t[1];return l(w(w({},o),{},{offsetX:r,offsetY:n}))}})))},I=function(e){var t,r,n,o=e.value,l=e.onChange,a=C(i.useState(!1),2),f=a[0],d=a[1];switch(o.type){case"fill":return i.createElement(h.Z,{expanded:f,onChange:function(e,t){return d(t)}},i.createElement(v.Z,{expandIcon:i.createElement(g.Z,null)},i.createElement(u.Z,{variant:"h3"},"Fill")),i.createElement(m.Z,null,i.createElement(j,{label:"Color",value:o.color,onChange:function(e){return l(w(w({},o),{},{color:e}))}})));case"flash-fill":return i.createElement(h.Z,{expanded:f,onChange:function(e,t){return d(t)}},i.createElement(v.Z,{expandIcon:i.createElement(g.Z,null)},i.createElement(u.Z,{variant:"h3"},"Flash Fill")),i.createElement(m.Z,null,i.createElement(S,{label:"Stages",value:null!==(t=o.stages)&&void 0!==t?t:[15,15,15,15],onChange:function(e){return l(w(w({},o),{},{stages:e}))}}),i.createElement(j,{label:"Color",value:o.color,onChange:function(e){return l(w(w({},o),{},{color:e}))}})));case"flash-text":return i.createElement(h.Z,{expanded:f,onChange:function(e,t){return d(t)}},i.createElement(v.Z,{expandIcon:i.createElement(g.Z,null)},i.createElement(u.Z,{variant:"h3"},"Flash Text")),i.createElement(m.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(S,{label:"Stages",value:null!==(r=o.stages)&&void 0!==r?r:[15,15,15,15],onChange:function(e){return l(w(w({},o),{},{stages:e}))}})),i.createElement(c.Z,{item:!0,xs:12},o.align),i.createElement(c.Z,{item:!0,xs:12},i.createElement(s.Z,{multiline:!0,fullWidth:!0,label:"Messages",value:o.text.join("\n"),onChange:function(e){return l(w(w({},o),{},{text:e.target.value.split("\n")}))}})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(k,{label:"Styles",value:null!==(n=o.style)&&void 0!==n?n:{},onChange:function(e){return l(w(w({},o),{},{style:e}))}})))));case"clip-circle":return i.createElement(h.Z,{expanded:f,onChange:function(e,t){return d(t)}},i.createElement(v.Z,{expandIcon:i.createElement(g.Z,null)},i.createElement(u.Z,{variant:"h3"},"Clip (Circle)")),i.createElement(m.Z,null,i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12},i.createElement(Z,{label:"Origin",value:o.origin,onChange:function(e){return l(w(w({},o),{},{origin:e}))}})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(s.Z,{type:"number",label:"Radius",fullWidth:!0,value:o.radius,onChange:function(e){return l(w(w({},o),{},{radius:parseFloat(e.target.value)}))}})),i.createElement(c.Z,{item:!0,xs:12},i.createElement(T,{value:o.children,onChange:function(e){return l(w(w({},o),{},{children:e}))}})))));default:return i.createElement(u.Z,{variant:"body1"}," Unrecognized command type '",o.type,"'")}};function R(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){var t=e.value,r=e.onChange;return i.createElement(i.Fragment,null,t.map((function(e,n){return i.createElement(I,{key:n,value:e,onChange:function(e){return r([].concat(R(t.slice(0,n)),[e],R(t.slice(n+1))))}})})))};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){var t=e.value,r=e.onChange;return i.createElement(i.Fragment,null,i.createElement(u.Z,{variant:"h1",paragraph:!0},"Spiral Editor"),i.createElement(u.Z,{variant:"h2",paragraph:!0},"Pattern"),i.createElement(T,{value:t.pattern,onChange:function(e){return r(W(W({},t),{},{pattern:e}))}}),i.createElement(u.Z,{variant:"h2",paragraph:!0},"Resolution"),i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12,sm:6},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Width",value:t.resolution[0],onChange:function(e){return r(W(W({},t),{},{resolution:[parseInt(e.target.value,0),t.resolution[1]]}))}})),i.createElement(c.Z,{item:!0,xs:12,sm:6},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Height",value:t.resolution[1],onChange:function(e){return r(W(W({},t),{},{resolution:[t.resolution[0],parseInt(e.target.value,0)]}))}}))),i.createElement(u.Z,{variant:"h2",paragraph:!0},"Framerate"),i.createElement(c.Z,{container:!0,spacing:3},i.createElement(c.Z,{item:!0,xs:12,sm:6,lg:4},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"FPS",value:t.fps,onChange:function(e){return r(W(W({},t),{},{fps:parseInt(e.target.value,0)}))}})),i.createElement(c.Z,{item:!0,xs:12,sm:6,lg:4},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Total Frames",value:t.totalFrames,onChange:function(e){return r(W(W({},t),{},{totalFrames:parseInt(e.target.value,0)}))}})),i.createElement(c.Z,{item:!0,xs:12,lg:4},i.createElement(s.Z,{fullWidth:!0,margin:"dense",type:"number",label:"Speed",value:t.speed,onChange:function(e){return r(W(W({},t),{},{speed:parseInt(e.target.value,0)}))}}))))},L=r(95477),_=function(e){var t=e.className,r=e.status;return i.createElement(n.Z,{open:"no"!==r.current},i.createElement(o.Z,null,i.createElement(L.Z,{className:t,size:360,color:"rendering"===r.current?"primary":"secondary",variant:"determinate",value:("rendering"===r.current?0:50)+("no"!==r.current?50*r.progress:0)})))},Y=r(41120),z=r(56912);function B(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $=r(89762),H=r.n($);function N(e,t,r,n,o,l,a){try{var i=e[l](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function V(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){N(l,n,o,a,i,"next",e)}function i(e){N(l,n,o,a,i,"throw",e)}a(void 0)}))}}function q(e,t){return new Promise((function(r,n){null!=t&&t.active?requestAnimationFrame(V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:r();case 4:case"end":return t.stop()}}),t)})))):setTimeout(V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,e();case 3:r();case 4:case"end":return t.stop()}}),t)}))),0)}))}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e,t,r){return t&&Q(e.prototype,t),r&&Q(e,r),e}var te=function(){function e(t){var r,n;J(this,e),this.canvas=t,this.gl=null!==(r=null!==(n=t.getContext("webgl"))&&void 0!==n?n:t.getContext("experimental-webgl"))&&void 0!==r?r:function(){throw new Error("")}()}return ee(e,[{key:"ref",value:function(){return this.gl}},{key:"createBuffer",value:function(){var e=this.gl.createBuffer();if(null==e)throw new Error("");return new ne(this.gl,e)}},{key:"createProgram",value:function(e,t){var r=this.gl.createProgram();if(null==r)throw new Error("");var n=this.createShader(e,this.gl.VERTEX_SHADER);this.gl.attachShader(r,n),this.gl.deleteShader(n);var o=this.createShader("precision highp float;\n\n"+t,this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(r,o),this.gl.deleteShader(o),this.gl.linkProgram(r),!this.gl.getProgramParameter(r,this.gl.LINK_STATUS))throw new Error("VALIDATE_STATUS: ".concat(this.gl.getProgramParameter(r,this.gl.VALIDATE_STATUS)," ERROR: ").concat(this.gl.getError()));return new re(this.gl,r)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT),this.gl.clearColor(0,0,0,1)}},{key:"render",value:function(e,t){var r=this,n=e.ref();this.gl.useProgram(n),Object.keys(t).forEach((function(e){var o=t[e],l=r.gl.getUniformLocation(n,e);if(l)if(Array.isArray(o))switch(o.length){case 2:r.gl.uniform2f(l,o[0],o[1]);break;case 3:r.gl.uniform3f(l,o[0],o[1],o[2]);break;case 4:r.gl.uniform4f(l,o[0],o[1],o[2],o[3])}else r.gl.uniform1f(l,o)})),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}},{key:"createShader",value:function(e,t){var r=this.gl.createShader(t);if(null==r)throw new Error("");if(this.gl.shaderSource(r,e),this.gl.compileShader(r),!this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS))throw new Error((t==this.gl.VERTEX_SHADER?"VERTEX":"FRAGMENT")+" SHADER:\n"+this.gl.getShaderInfoLog(r));return r}},{key:"width",value:function(){return this.canvas.clientWidth}},{key:"height",value:function(){return this.canvas.clientHeight}}]),e}(),re=function(){function e(t,r){J(this,e),K(this,"destroyed",!1),this.gl=t,this.program=r}return ee(e,[{key:"ref",value:function(){return this.program}},{key:"ok",value:function(){return!this.destroyed}},{key:"destroy",value:function(){this.gl.deleteProgram(this.program),this.destroyed=!0}}]),e}(),ne=function(){function e(t,r){J(this,e),K(this,"destroyed",!1),this.gl=t,this.buffer=r}return ee(e,[{key:"ref",value:function(){return this.buffer}},{key:"ok",value:function(){return!this.destroyed}},{key:"bind",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(0,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(0)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.buffer),this.destroyed=!0}}]),e}();function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ae(e,t,r,n,o,l,a){try{var i=e[l](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function ie(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){ae(l,n,o,a,i,"next",e)}function i(e){ae(l,n,o,a,i,"throw",e)}a(void 0)}))}}function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e,t,r){return de.apply(this,arguments)}function de(){return(de=ie(regeneratorRuntime.mark((function e(t,r,n){var o,l,a,i,u,c,s,f,d,h,v,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=oe(t,2),l=o[0],a=o[1],(i=document.createElement("canvas")).width=l,i.height=a,u=new te(i),c=fetch(r).then((function(e){return e.text()})),s=fetch(n).then((function(e){return e.text()})),e.next=9,Promise.all([c,s]);case 9:return f=e.sent,d=oe(f,2),h=d[0],v=d[1],(m=u.createBuffer()).ok()||console.error("failed to create buffer"),(g=u.createProgram(h,v)).ok()||console.error("failed to create program"),e.abrupt("return",[m,g,i]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t){return((1048320&function(e,t){t|=0;var r=function(e,t){return t^t>>e};return t*=3039394381,t=r(8,t+=e=e),t=function(e,t){return t^t<<8}(0,t+=1759714724),r(8,t*=458671337)}(e,t))>>8)/4095}var ve=["x","y","value"];function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e,t){var r,n,o,l,a,i,u,c,s,f,d,h,v,m,g=t.x,y=t.y,b=t.value,E=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,ve),w=[e.width,e.height],O=Math.min(Math.max(12,Math.min.apply(Math,w)/12.5),256)*(null!==(r=null===(n=E.style)||void 0===n?void 0:n.size)&&void 0!==r?r:1),C=e.getContext("2d");C.save(),C.textBaseline="top",C.font="".concat(O,"px ").concat((null!==(o=null===(l=E.style)||void 0===l?void 0:l.fonts)&&void 0!==o?o:["Uni Sans Heavy","Roboto","Helvetica","Arial","sans-serif"]).join(", "));var x=C.measureText(b),A=g*e.width-x.width/2;A<10?(A=10,C.textAlign="left"):A+x.width>=e.width-10?(A=e.width-x.width-10,C.textAlign="left"):(C.textAlign="center",A=g*e.width);var S=y*e.height-O/2;S<10?S=10:S+O/2>=e.height-O-10&&(S=e.height-O-10);var j=p.apply(void 0,ye(null!==(a=null===(i=E.style)||void 0===i||null===(u=i.fillColor)||void 0===u?void 0:u.slice(0,3))&&void 0!==a?a:[1,1,1])),Z=p.apply(void 0,ye(null!==(c=null===(s=E.style)||void 0===s||null===(f=s.strokeColor)||void 0===f?void 0:f.slice(0,3))&&void 0!==c?c:[1/256,1/256,1/256]));C.lineWidth=null!==(d=null===(h=E.style)||void 0===h?void 0:h.lineWidth)&&void 0!==d?d:Math.max(null!==(v=null===(m=E.style)||void 0===m?void 0:m.size)&&void 0!==v?v:1,1),C.fillStyle=j,Z!=j&&(C.strokeStyle=Z),C.fillText(b,A,S),Z!=j&&C.strokeText(b,A,S),C.restore()}function we(e,t,r){var n,o,l,a,i,u,c,s,f,d,h,v,m,g,p,y,b,E,w,O,C,x,A,S,j,Z,P,k,I,R,F,T,D=null!==(n=r.stageLengths)&&void 0!==n?n:[15,15,15,15],W=D.reduce((function(e,t){return e+t})),U=t%W,M=null!=r.align?r.align[null!==(o=(t/W|0)%r.align.length)&&void 0!==o?o:1]:"center",L=r.text[(t/W|0)%r.text.length],_=.5+(null!==(l=null===(a=r.style)||void 0===a?void 0:a.offsetX)&&void 0!==l?l:0),Y=.5+(null!==(i=null===(u=r.style)||void 0===u?void 0:u.offsetY)&&void 0!==i?i:0);switch(M){case"left":_=.05+(null!==(c=null===(s=r.style)||void 0===s?void 0:s.offsetX)&&void 0!==c?c:0);break;case"right":_=.95+(null!==(f=null===(d=r.style)||void 0===d?void 0:d.offsetX)&&void 0!==f?f:0);break;case"center":Y=.5+(null!==(h=null===(v=r.style)||void 0===v?void 0:v.offsetY)&&void 0!==h?h:0);break;case"top":Y=.05+(null!==(m=null===(g=r.style)||void 0===g?void 0:g.offsetY)&&void 0!==m?m:0);break;case"bottom":Y=.95+(null!==(p=null===(y=r.style)||void 0===y?void 0:y.offsetY)&&void 0!==p?p:0);break;case"top-left":_=.05+(null!==(b=null===(E=r.style)||void 0===E?void 0:E.offsetX)&&void 0!==b?b:0),Y=.05+(null!==(w=null===(O=r.style)||void 0===O?void 0:O.offsetY)&&void 0!==w?w:0);break;case"top-right":_=.95+(null!==(C=null===(x=r.style)||void 0===x?void 0:x.offsetX)&&void 0!==C?C:0),Y=.05+(null!==(A=null===(S=r.style)||void 0===S?void 0:S.offsetY)&&void 0!==A?A:0);break;case"bottom-left":_=.05+(null!==(j=null===(Z=r.style)||void 0===Z?void 0:Z.offsetX)&&void 0!==j?j:0),Y=.95+(null!==(P=null===(k=r.style)||void 0===k?void 0:k.offsetY)&&void 0!==P?P:0);break;case"bottom-right":_=.95+(null!==(I=null===(R=r.style)||void 0===R?void 0:R.offsetX)&&void 0!==I?I:0),Y=.95+(null!==(F=null===(T=r.style)||void 0===T?void 0:T.offsetY)&&void 0!==F?F:0)}var z=e.getContext("2d");if(z.save(),U<D[0]);else if(D[0]>0&&U<D[0]+D[1]){var B,X,$,H,N,V,q,G;z.globalAlpha=z.globalAlpha*((null!==(B=null===(X=r.style)||void 0===X?void 0:X.fillColor)&&void 0!==B?B:[0,0,0,1])[3]*(U-D[0])/D[1]),Ee(e,{x:_,y:Y,value:L,style:ge(ge(ge({lineWidth:null===($=r.style)||void 0===$?void 0:$.lineWidth},null!=(null===(H=r.style)||void 0===H?void 0:H.fillColor)?{fillColor:r.style.fillColor}:{}),null!=(null===(N=r.style)||void 0===N?void 0:N.strokeColor)?{strokeColor:r.style.strokeColor}:{}),{},{bold:null===(V=r.style)||void 0===V?void 0:V.bold,size:null!==(q=null===(G=r.style)||void 0===G?void 0:G.size)&&void 0!==q?q:2})})}else if(D[1]>0&&U<D[0]+D[1]+D[2]){var K,J,Q,ee,te,re,ne,oe;z.globalAlpha=z.globalAlpha*(null!==(K=null===(J=r.style)||void 0===J?void 0:J.fillColor)&&void 0!==K?K:[0,0,0,1])[3],Ee(e,{x:_,y:Y,value:L,style:ge(ge(ge({lineWidth:null===(Q=r.style)||void 0===Q?void 0:Q.lineWidth},null!=(null===(ee=r.style)||void 0===ee?void 0:ee.fillColor)?{fillColor:r.style.fillColor}:{}),null!=(null===(te=r.style)||void 0===te?void 0:te.strokeColor)?{strokeColor:r.style.strokeColor}:{}),{},{bold:null===(re=r.style)||void 0===re?void 0:re.bold,size:null!==(ne=null===(oe=r.style)||void 0===oe?void 0:oe.size)&&void 0!==ne?ne:2})})}else if(D[2]>0&&U<D[0]+D[1]+D[2]+D[3]){var le,ae,ie,ue,ce,se,fe,de,he=U-(D[0]+D[1]+ +D[2]);z.globalAlpha=z.globalAlpha*((null!==(le=null===(ae=r.style)||void 0===ae?void 0:ae.fillColor)&&void 0!==le?le:[0,0,0,1])[3]*((D[3]-he)/D[3])),Ee(e,{x:_,y:Y,value:L,style:ge(ge(ge({lineWidth:null===(ie=r.style)||void 0===ie?void 0:ie.lineWidth},null!=(null===(ue=r.style)||void 0===ue?void 0:ue.fillColor)?{fillColor:r.style.fillColor}:{}),null!=(null===(ce=r.style)||void 0===ce?void 0:ce.strokeColor)?{strokeColor:r.style.strokeColor}:{}),{},{bold:null===(se=r.style)||void 0===se?void 0:se.bold,size:null!==(fe=null===(de=r.style)||void 0===de?void 0:de.size)&&void 0!==fe?fe:2})})}z.restore()}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return l}}(e,t)||Pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t,r,n,o,l,a){try{var i=e[l](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function je(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){Se(l,n,o,a,i,"next",e)}function i(e){Se(l,n,o,a,i,"throw",e)}a(void 0)}))}}function Ze(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){if(e){if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(e,t):void 0}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ie(e,t,r,n,o){switch(t.type){case"fill":return function(e,t){var r,n=e.getContext("2d");n.save(),n.fillStyle=p.apply(void 0,function(e){if(Array.isArray(e))return G(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n.fillRect(0,0,e.width,e.height),n.restore()}(e,t.color);case"opacity":return function(e,l,a){var i=e.getContext("2d");i.save(),i.globalAlpha=i.globalAlpha*l,function(e){t.children.forEach((function(t){return Ie(e,t,r,n,o)}))}(e),i.restore()}(e,t.value);case"frame-offset":return t.children.forEach((function(l){return Ie(e,l,r+t.by,n,o)}));case"clip-circle":return function(e,l,a,i){if(0!==a){var u=document.createElement("canvas");u.width=a*Math.min(e.width,e.height),u.height=u.width,function(e){t.children.forEach((function(t){return Ie(e,t,r,n,o)}))}(u);var c=(l[0]+1)*(e.width/2),s=(l[1]+1)*(e.height/2),f=u.width/2,d=e.getContext("2d");d.save(),d.beginPath(),d.arc(c,s,f,0,2*Math.PI,!0),d.closePath(),d.clip(),d.drawImage(u,c-f,s-f,u.width,u.height),d.restore()}}(e,t.origin,t.radius);case"pattern":return function(e,t,r){var n,o,l,a=r.shader[2];a.width=e.width,a.height=e.height;var i=new te(a),u=ce({time:t/(null!==(n=r.fps)&&void 0!==n?n:60),rotation:1,direction:1,branchCount:4,resolution:[a.width,a.height],aspect:a.width>a.height?[a.width/a.height,1]:[1,a.height/a.width]},ce({bgColor:[0,0,0,0],fgColor:[1,1,1,1],pulseColor:[178/255,76/255,229/255,1],dimColor:[0,0,0,0],extraColor:[0,0,0,0]},null!==(o=r.colors)&&void 0!==o?o:{}));i.clear(),r.shader[0].bind(),i.render(r.shader[1],u),null===(l=e.getContext("2d"))||void 0===l||l.drawImage(a,0,0,e.width,e.height)}(e,r,{shader:n.shaders[t.pattern],colors:{bgColor:t.colors.bg,fgColor:t.colors.fg,dimColor:t.colors.dim,extraColor:t.colors.extra,pulseColor:t.colors.pulse},fps:null==o?void 0:o.fps});case"text":return Ee(e,{value:t.value,x:t.coords[0],y:t.coords[1],style:t.style});case"flash-text":return we(e,r,{text:t.text,align:t.align,stageLengths:t.stages,style:t.style});case"subliminal":return function(e,t,r){var n,o,l=null!==(n=r.stageLengths)&&void 0!==n?n:[5,2,3,2],a=t/l.reduce((function(e,t){return e+t}))|0,i=function(e){var t=0,r=0;if(0===e.length)return t;for(r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}(r.text.reduce((function(e,t){return"".concat(e,":").concat(t)}))),u=he(i,2*a)-.5,c=he(i,2*a+1)-.5;we(e,t,{text:r.text,align:["center"],stageLengths:l,style:ge(ge({},null!==(o=r.style)&&void 0!==o?o:{}),{},{offsetX:u,offsetY:c})})}(e,r,{text:t.text,stageLengths:t.stages,style:t.style});case"flash-fill":return function(e,t,r){var n,o,l,a=null!==(n=r.stageLengths)&&void 0!==n?n:[15,15,15,15],i=t%a.reduce((function(e,t){return e+t})),u=p.apply(void 0,ye(null!==(o=null===(l=r.style)||void 0===l?void 0:l.backgroundColor)&&void 0!==o?o:[1,1,1,1])),c=e.getContext("2d");if(i<a[0]);else if(a[0]>0&&i<a[0]+a[1])c.save(),c.globalAlpha=(i-a[1])/a[1],c.fillStyle=u,c.fillRect(0,0,e.width,e.height),c.restore();else if(a[1]>0&&i<a[0]+a[1]+a[2])c.save(),c.globalAlpha=1,c.fillStyle=u,c.fillRect(0,0,e.width,e.height),c.restore();else if(a[2]>0&&i<a[0]+a[1]+a[2]+a[3]){var s=i-(a[0]+a[1]+ +a[2]);c.save(),c.globalAlpha=(a[3]-s)/a[3],c.fillStyle=u,c.fillRect(0,0,e.width,e.height),c.restore()}}(e,r,{stageLengths:t.stages,style:{backgroundColor:t.color}})}}function Re(e,t,r,n,o){var l;(l=e).getContext("2d").clearRect(0,0,l.width,l.height),t.forEach((function(t){return Ie(e,t,r,n,o)}))}function Fe(e){return e.reduce((function(e,t){switch(t.type){case"clip-circle":case"frame-offset":case"opacity":return[].concat(Ze(e),Ze(Fe(t.children)));case"pattern":return[].concat(Ze(e),[t.pattern]);default:return e}}),[])}function Te(){return(Te=je(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map(function(){var e=je(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,fe(t,"shaders/spiral.vs","shaders/".concat(r,".fs"));case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,e.abrupt("return",n.reduce((function(e,t){var r=Ae(t,2),n=r[0],o=r[1];return Ce(Ce({},e),{},xe({},n,o))}),{}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return We(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ue(e){var t=i.useMemo((function(){return Fe(e.pattern)}),[e.pattern]),r=De(i.useState({}),2),n=r[0],o=r[1];return i.useEffect((function(){var r=!1;return function(e,t){return Te.apply(this,arguments)}(e.resolution,t).then((function(e){r||o(e)})),function(){r=!0}}),[e.resolution,t.join("|")]),{shaders:n}}var Me=(0,Y.Z)({root:{objectFit:"cover",width:"100%",height:"100vh"}},{name:"SpiralViewer"}),Le=function(e){var t=e.def,r=e.assets,n=e.onClick,o=Me().root,l=i.useRef(null);return function(e,t){var r=t.enable,n=t.def,o=t.assets,l=i.useRef(performance.now()),a=i.useRef(0);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=i.useRef(e),n=i.useRef(0);i.useEffect((function(){r.current=e}),[e].concat(B(t))),i.useEffect((function(){var e=!1,t=0;return t=requestAnimationFrame((function o(){e||(r.current&&(r.current(n.current),n.current=n.current+1),t=requestAnimationFrame(o))})),function(){cancelAnimationFrame(t),e=!0}}),[])}((function(){var t=l.current,r=performance.now(),i=1/n.fps,u=(r-t)/1e3;if(!(u<i)){for(;u>=i/n.speed;)a.current=a.current+1,u-=i/n.speed;l.current=performance.now()-u;var c=n.totalFrames>0?a.current%n.totalFrames:a.current;null!=e&&null!=o&&Re(e,n.pattern,c,o,{fps:n.fps})}}),[r,n,o,e])}(l.current,{enable:!0,assets:r,def:t}),i.createElement("canvas",{className:o,width:t.resolution[0],height:t.resolution[1],ref:l,onClick:n})};function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ze(){var e,t,r,u,c,s,f,d,h,v,m,g,p,y,b,E=_e(i.useState(!1),2),w=E[0],O=E[1],C=_e((e=De((0,z.xT)("pattern",[]),2),t=e[0],r=e[1],u=De((0,z.$w)("speed",1),2),c=u[0],s=u[1],f=De((0,z.$w)("fps",60),2),d=f[0],h=f[1],v=De((0,z.$w)("total-frames",d),2),m=v[0],g=v[1],p=De((0,z.xT)("screen",[1280,720]),2),y=p[0],b=p[1],[i.useMemo((function(){return{pattern:t,speed:c,fps:d,totalFrames:m,resolution:y}}),[t,c,d,m,y]),function(e){r(e.pattern),s(e.speed),h(e.fps),g(e.totalFrames),b(e.resolution)}]),2),x=C[0],A=C[1],S=Ue(x),j=_e(function(e,t){var r=Ae(i.useState({current:"no"}),2),n=r[0],o=r[1];return[n,je(regeneratorRuntime.mark((function r(){var n,l,a,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o({current:"rendering",progress:0}),n=new(H())({quality:5,repeat:0}),l=e.totalFrames||e.fps,a=regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,q((function(){var r=document.createElement("canvas");r.width=e.resolution[0],r.height=e.resolution[1],Re(r,e.pattern,a,t,{fps:e.fps}),o({current:"rendering",progress:a/l}),n.addFrame(r,{delay:1e3/(e.speed*e.fps),copy:!0})}));case 2:case"end":return r.stop()}}),r)})),i=0;case 5:if(!(i<l)){r.next=10;break}return r.delegateYield(a(i),"t0",7);case 7:++i,r.next=5;break;case 10:n.on("progress",(function(e){o({current:"exporting",progress:e})})),n.on("finished",(function(e){window.open(URL.createObjectURL(e)),o({current:"no"})})),n.render();case 13:case"end":return r.stop()}}),r)})))]}(x,S),2),Z=j[0],P=j[1];return i.createElement(i.Fragment,null,i.createElement(Le,{def:x,assets:S,onClick:function(){return O(!0)}}),i.createElement(n.Z,{open:w},i.createElement(o.Z,null,i.createElement(M,{value:x,onChange:A})),i.createElement(l.Z,null,i.createElement(a.Z,{color:"secondary",onClick:function(){return O(!1)}},"Close"),i.createElement(a.Z,{color:"primary",onClick:function(){O(!1),P()}},"Render"))),i.createElement(_,{status:Z}))}}}]);