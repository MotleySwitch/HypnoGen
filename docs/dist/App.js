import{A as Ae,B as I,C as ne,D as K,E as Me,F as Ge,a as Lt,b as ut,c as T,d as e,e as $e,f as Ue,k as je,l as Ve,m as ke,n as He,o as ee,p as Pe,q as Te,r as te,s as Oe,t as ze,u as Se,v as C,x as Le,y as Ke,z as f}from"../chunk-ZCLFVYCB.js";function pe(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return je(n,T({defaultTheme:Ve},t))}function Re(n,t){var r=t.getBoundingClientRect(),i;if(t.fakeTransform)i=t.fakeTransform;else{var o=window.getComputedStyle(t);i=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var a=0,s=0;if(i&&i!=="none"&&typeof i=="string"){var u=i.split("(")[1].split(")")[0].split(",");a=parseInt(u[4],10),s=parseInt(u[5],10)}return n==="left"?"translateX(".concat(window.innerWidth,"px) translateX(").concat(a-r.left,"px)"):n==="right"?"translateX(-".concat(r.left+r.width-a,"px)"):n==="up"?"translateY(".concat(window.innerHeight,"px) translateY(").concat(s-r.top,"px)"):"translateY(-".concat(r.top+r.height-s,"px)")}function H(n,t){var r=Re(n,t);r&&(t.style.webkitTransform=r,t.style.transform=r)}var me=e.forwardRef(function(t,r){var i=t.children,o=t.direction,a=o===void 0?"down":o,s=t.in,u=t.onEnter,p=t.onEntered,c=t.onEntering,h=t.onExit,y=t.onExited,E=t.onExiting,m=t.style,b=t.timeout,w=b===void 0?Ke:b,R=t.TransitionComponent,_=R===void 0?Pe:R,N=$e(t,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),d=ke(),v=e.useRef(null),$=e.useCallback(function(l){v.current=ze.findDOMNode(l)},[]),D=ee(i.ref,$),M=ee(D,r),x=function(g){return function(O){g&&(O===void 0?g(v.current):g(v.current,O))}},k=x(function(l,g){H(a,l),Te(l),u&&u(l,g)}),P=x(function(l,g){var O=te({timeout:w,style:m},{mode:"enter"});l.style.webkitTransition=d.transitions.create("-webkit-transform",T({},O,{easing:d.transitions.easing.easeOut})),l.style.transition=d.transitions.create("transform",T({},O,{easing:d.transitions.easing.easeOut})),l.style.webkitTransform="none",l.style.transform="none",c&&c(l,g)}),L=x(p),W=x(E),Q=x(function(l){var g=te({timeout:w,style:m},{mode:"exit"});l.style.webkitTransition=d.transitions.create("-webkit-transform",T({},g,{easing:d.transitions.easing.sharp})),l.style.transition=d.transitions.create("transform",T({},g,{easing:d.transitions.easing.sharp})),H(a,l),h&&h(l)}),Z=x(function(l){l.style.webkitTransition="",l.style.transition="",y&&y(l)}),S=e.useCallback(function(){v.current&&H(a,v.current)},[a]);return e.useEffect(function(){if(!(s||a==="down"||a==="right")){var l=He(function(){v.current&&H(a,v.current)});return window.addEventListener("resize",l),function(){l.clear(),window.removeEventListener("resize",l)}}},[a,s]),e.useEffect(function(){s||S()},[s,S]),e.createElement(_,T({nodeRef:v,onEnter:k,onEntered:L,onEntering:P,onExit:Q,onExited:Z,onExiting:W,appear:!0,in:s,timeout:w},N),function(l,g){return e.cloneElement(i,T({ref:M,style:T({visibility:l==="exited"&&!s?"hidden":void 0},m,i.props.style)},g))})});var _e={entering:{transform:"none"},entered:{transform:"none"}};var he=e.forwardRef(function(t,r){var i=t.children,o=t.disableStrictModeCompat,a=o===void 0?!1:o,s=t.in,u=t.onEnter,p=t.onEntered,c=t.onEntering,h=t.onExit,y=t.onExited,E=t.onExiting,m=t.style,b=t.timeout,w=b===void 0?Ge:b,R=t.TransitionComponent,_=R===void 0?Pe:R,N=$e(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),d=ke(),v=d.unstable_strictMode&&!a,$=e.useRef(null),D=ee(i.ref,r),M=ee(v?$:void 0,D),x=function(l){return function(g,O){if(l){var Ce=v?[$.current,g]:[g,O],ce=Ue(Ce,2),de=ce[0],fe=ce[1];fe===void 0?l(de):l(de,fe)}}},k=x(c),P=x(function(S,l){Te(S);var g=te({style:m,timeout:w},{mode:"enter"});S.style.webkitTransition=d.transitions.create("transform",g),S.style.transition=d.transitions.create("transform",g),u&&u(S,l)}),L=x(p),W=x(E),Q=x(function(S){var l=te({style:m,timeout:w},{mode:"exit"});S.style.webkitTransition=d.transitions.create("transform",l),S.style.transition=d.transitions.create("transform",l),h&&h(S)}),Z=x(y);return e.createElement(_,T({appear:!0,in:s,nodeRef:v?$:void 0,onEnter:P,onEntered:L,onEntering:k,onExit:Q,onExited:Z,onExiting:W,timeout:w},N),function(S,l){return e.cloneElement(i,T({style:T({transform:"scale(0)",visibility:S==="exited"&&!s?"hidden":void 0},_e[S],m,i.props.style),ref:M},l))})});function U({patterns:n,pattern:t,speed:r,onChange:i}){return e.createElement(f,{container:!0,spacing:2,alignItems:"center"},e.createElement(f,{item:!0,xs:12},e.createElement(ne,{label:"Background Effect",fullWidth:!0,value:t,onChange:o=>i({speed:r,pattern:o.target.value})},e.createElement(I,{value:""},"None"),n?.map((o,a)=>e.createElement(I,{key:a,value:o},o)))),e.createElement(f,{item:!0,xs:12},e.createElement(f,{container:!0,spacing:2,alignItems:"center"},e.createElement(f,{item:!0},e.createElement(C,{variant:"body1"},e.createElement("strong",null,"Speed"))),e.createElement(f,{item:!0,xs:!0},e.createElement(K,{value:r,min:0,max:2,step:.25,onChange:(o,a)=>{i({pattern:t,speed:a})}})),e.createElement(f,{item:!0},e.createElement(C,{style:{minWidth:"2em"},variant:"body1"},r)))))}function re({text:n,speed:t,spacing:r,animation:i,onChange:o}){return e.createElement(f,{container:!0,spacing:2,alignItems:"center"},e.createElement(f,{item:!0,xs:12},e.createElement(Me,{label:"Messages",multiline:!0,fullWidth:!0,value:n.join(`
`),onChange:a=>o({animation:i,spacing:r,speed:t,text:a.target.value.split(`
`)})})),e.createElement(f,{item:!0,xs:12},e.createElement(ne,{fullWidth:!0,label:"Animation",value:i,onChange:a=>o({animation:a.target.value,spacing:r,speed:t,text:n})},e.createElement(I,{value:"collapse"},"Collapse"),e.createElement(I,{value:"fade"},"Fade"),e.createElement(I,{value:"grow"},"Grow"),e.createElement(I,{value:"slide"},"Slide"),e.createElement(I,{value:"zoom"},"Zoom"))),e.createElement(f,{item:!0,xs:12},e.createElement(f,{container:!0,spacing:2,alignItems:"center"},e.createElement(f,{item:!0},e.createElement(C,{variant:"body1"},e.createElement("strong",null,"Speed"))),e.createElement(f,{item:!0,xs:!0},e.createElement(K,{value:t,min:0,max:5,step:.25,onChange:(a,s)=>{o({animation:i,spacing:r,text:n,speed:s})}})),e.createElement(f,{item:!0},e.createElement(C,{style:{minWidth:"2em"},variant:"body1"},t)))),e.createElement(f,{item:!0,xs:12},e.createElement(f,{container:!0,spacing:2,alignItems:"center"},e.createElement(f,{item:!0},e.createElement(C,{variant:"body1"},e.createElement("strong",null,"Spacing"))),e.createElement(f,{item:!0,xs:!0},e.createElement(K,{value:r,min:0,max:5,step:1,onChange:(a,s)=>{o({animation:i,speed:t,text:n,spacing:s})}})),e.createElement(f,{item:!0},e.createElement(C,{style:{minWidth:"2em"},variant:"body1"},r)))))}function B(n,t=[]){let r=e.useRef(n);e.useEffect(()=>{r.current=n},[n,...t]),e.useEffect(()=>{let i=!1,o=0;return o=requestAnimationFrame(function a(){i||(r.current&&r.current(),o=requestAnimationFrame(a))}),()=>{cancelAnimationFrame(o),i=!0}},[])}function A(){let[n,t]=e.useState([1280,720]);return e.useEffect(()=>{let r=()=>t([document.body.clientWidth,document.body.clientHeight]);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),n}var ve=e.createContext({canvas:null,renders:[],nextRenderId:0});function ge(n,t){let r=e.useContext(ve),i=e.useRef(t);e.useEffect(()=>{i.current=t},[t]),e.useEffect(()=>{let o=r.nextRenderId++;return r.renders.push([o,(a,s)=>i.current(a,s),n]),r.renders.sort(([a,s,u],[p,c,h])=>u-h),()=>{r.renders.splice(r.renders.findIndex(([a,s,u])=>a!==o,1))}},[n])}var Ie=({canvas:n,children:t})=>{let r=e.useRef([]).current,i=e.useRef(0).current,o=e.useMemo(()=>n.getContext("2d"),[n]);return B(()=>{o.clearRect(0,0,n.width,n.height),r.forEach(([a,s,u])=>{s(o,n)})}),e.createElement(ve.Provider,{value:{canvas:n,renders:r,nextRenderId:i}},t)};function ye({className:n,children:t}){let[r,i]=A(),[o,a]=e.useState(null);return e.createElement("canvas",{ref:a,width:r,height:i,className:n},o&&e.createElement(Ie,{canvas:o},t))}function ie(n){let t=e.useContext(ut);return{value:()=>t[n]??0,increment:()=>t[n]=(t[n]??0)+1,decrement:()=>t[n]?(t[n]=(t[n]??0)-1,!0):!1}}function F(n){let t=ie("file-load"),[r,i]=e.useState(null);return e.useEffect(()=>{if(n==null)return;t.increment();let o=!1,a=!1;return async function(){let s=await fetch(n).then(function(u){return u.text()});o?a=!0:(i(s),t.decrement())}(),()=>{o=!0,a||t.decrement()}},[n]),r}var ae=class{constructor(t){this.canvas=t,this.gl=t.getContext("webgl")??t.getContext("experimental-webgl")??(()=>{throw new Error("")})()}ref(){return this.gl}createBuffer(){let t=this.gl.createBuffer();if(t==null)throw new Error("");return new xe(this.gl,t)}createProgram(t,r){let i=this.gl.createProgram();if(i==null)throw new Error("");let o=this.createShader(t,this.gl.VERTEX_SHADER);this.gl.attachShader(i,o),this.gl.deleteShader(o);let a=this.createShader(`precision highp float;

`+r,this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(i,a),this.gl.deleteShader(a),this.gl.linkProgram(i),!this.gl.getProgramParameter(i,this.gl.LINK_STATUS))throw new Error(`VALIDATE_STATUS: ${this.gl.getProgramParameter(i,this.gl.VALIDATE_STATUS)} ERROR: ${this.gl.getError()}`);return new be(this.gl,i)}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT),this.gl.clearColor(0,0,0,1)}render(t,r){let i=t.ref();this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.useProgram(i),Object.keys(r).forEach(o=>{let a=r[o],s=this.gl.getUniformLocation(i,o);if(s)if(Array.isArray(a))switch(a.length){case 2:this.gl.uniform2f(s,a[0],a[1]);break;case 3:this.gl.uniform3f(s,a[0],a[1],a[2]);break;case 4:this.gl.uniform4f(s,a[0],a[1],a[2],a[3]);break}else this.gl.uniform1f(s,a)}),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}createShader(t,r){let i=this.gl.createShader(r);if(i==null)throw new Error("");if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))throw new Error((r==this.gl.VERTEX_SHADER?"VERTEX":"FRAGMENT")+` SHADER:
`+this.gl.getShaderInfoLog(i));return i}width(){return this.canvas.clientWidth}height(){return this.canvas.clientHeight}},Ee=ae,be=class{constructor(t,r){this.gl=t,this.program=r,this.destroyed=!1}ref(){return this.program}ok(){return!this.destroyed}destroy(){this.gl.deleteProgram(this.program),this.destroyed=!0}},xe=class{constructor(t,r){this.gl=t,this.buffer=r,this.destroyed=!1}ref(){return this.buffer}ok(){return!this.destroyed}bind(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(0,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(0)}destroy(){this.gl.deleteBuffer(this.buffer),this.destroyed=!0}};function G({timer:n,play:t,pattern:r,speed:i,colors:o,zIndex:a}){let s=e.useRef(Date.now()/1e3),u=F("shaders/spiral.vs"),p=F(r?`shaders/${r}.fs`:null),[c,h]=e.useState(null),[y,E]=A(),m=e.useMemo(()=>document.createElement("canvas"),[]);e.useEffect(()=>{m.width=y,m.height=E},[y,E,m]),e.useEffect(()=>{h(new Ee(m))},[m]);let[b,w]=e.useState(null);e.useEffect(()=>{if(c==null)return;let d=c.createBuffer();return w(d),()=>d.destroy()},[c]);let[R,_]=e.useState(null);e.useEffect(()=>{if(c==null||u==null||p==null){_(null);return}let d=c.createProgram(u,p);return _(d),()=>d.destroy()},[c,u,p]);let N=e.useMemo(()=>({rotation:1,direction:1,branchCount:4,resolution:[y,E],aspect:[y/E,1],bgColor:[0,0,0,0],fgColor:[1,1,1,1],pulseColor:[.7,.3,.9,1],dimColor:[0,0,0,1],...o??{}}),[y,E,o]);return B(()=>{if(c!=null&&(c.clear(),b!=null&&b.ok()&&R!=null&&R.ok())){b.bind();let d=Date.now()/1e3,v=t?d-s.current:0;s.current=d;let $=(n()+v)*(i??1);c.render(R,{...N,time:$})}}),ge(a??0,(d,v)=>{r&&(console.log(r),d.drawImage(m,0,0,v.width,v.height))}),e.createElement(e.Fragment,null)}function Ne(n,t){t=t|0,n=n;let r=(o,a)=>a^a>>o,i=(o,a)=>a^a<<o;return t=t*3039394381,t=t+n,t=r(8,t),t=t+1759714724,t=i(8,t),t=t*458671337,t=r(8,t),t}function q(n,t){return((Ne(n,t)&1048320)>>8)/4095}function j(n,t,r=[]){let i=e.useRef(n);e.useEffect(()=>{i.current=n},[n,...r]),e.useEffect(()=>{let o=setInterval(()=>{i.current&&i.current()},t);return()=>clearInterval(o)},[t])}function oe({zIndex:n,speed:t,show:r,animation:i,x:o,y:a,children:s}){function u(b){switch(b){case"collapse":return Oe;case"fade":return Se;case"grow":return Ae;case"slide":return me;case"zoom":return he;default:return Se}}let p=u(i),c=A(),h=e.useMemo(()=>Math.min(Math.max(32,Math.min(...c)/25),128),[...c]),y=o>50?{right:`${100-o}%`}:{left:`${o}%`},E=a>50?{bottom:`${100-a}%`}:{top:`${a}%`},m=a>50?"up":"down";return e.createElement(p,{direction:m,in:r,appear:!0,timeout:160/(t||1),style:{position:"absolute",...y,...E}},e.createElement(C,{style:{fontSize:`${h}px`,color:"white"},variant:"body1"},s))}function X(n){return function(t){let r=q(n,t*2)*80+10|0,i=q(n,t*2+1)*80+10|0;return[r,i]}}function se({zIndex:n,play:t,values:r,speed:i,spacing:o,animation:a,positionSelector:s}){let u=1e3/4/(i||1),[p,c]=e.useState(0);j(()=>{(i??1)>0&&t&&r.length>0&&c(p+1)},u);let[h,y]=e.useState((s??X(0))(0)),[E,m]=e.useState(0),[b,w]=e.useState(0);return e.useEffect(()=>{switch(p%(3+(o??0)*3)){case 0:y((s??X(0))(p)),m(0),w(b+1);break;case 1:m(1);break;case 2:m(2);break;default:break}},[p,o]),r.length>0&&r[b%r.length]?e.createElement(oe,{speed:i,zIndex:n,show:E>=0&&E<2,x:h[0],y:h[1],animation:a},r[b%r.length]):e.createElement(e.Fragment,null)}var Y;(function(n){n[n.Down=0]="Down",n[n.Up=1]="Up"})(Y||(Y={}));function le(n){let t=e.useRef(n);e.useEffect(()=>{t.current=n},[n]),e.useEffect(()=>{function r(o){t.current(0,o.code)}function i(o){t.current(1,o.code)}return window.addEventListener("keydown",r),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",r),window.removeEventListener("keyup",i)}},[])}function J(n){let t=F(n);return t!=null?JSON.parse(t):null}function Fe(){let n=e.useContext(Lt);return[n.search,n.setSearch]}function De(){function n(a){return a.startsWith("?")?atob(a.substring(1)).split("&").map(s=>{let[u,...p]=s.split("="),c=decodeURIComponent(u),h=decodeURIComponent(p.join("="));return[c,h]}).reduce((s,[u,p])=>({...s,[u]:[...s[u]??[],p]}),{}):{}}let[t,r]=Fe();return[e.useMemo(()=>n(t),[t]),(a,s)=>{r(u=>{let p={...n(u),[a]:s};return`?${btoa(Object.keys(p).flatMap(c=>(p[c]??[]).map(h=>`${encodeURIComponent(c)}=${encodeURIComponent(h)}`)).join("&"))}`})}]}function ue(n){let[t,r]=De();return[e.useMemo(()=>t[n]||[],[t,n]),o=>r(n,o)]}function V(n,t){let[r,i]=ue(n);return[r.length>0?r[0]:t,a=>i([a])]}function z(n,t){let[r,i]=V(n,t.toString());return[e.useMemo(()=>parseFloat(r||t.toString()),[r]),a=>{i(a.toString())}]}var We=pe({root:{position:"absolute",width:"100vw",height:"100vh",overflow:"hidden",cursor:"none",backgroundSize:"cover"}},{name:"App"});function we(){let n=We(),[t,r]=e.useState(Date.now),[i,o]=e.useState(!1);le((k,P)=>{k==Y.Up&&P==="Escape"&&o(!i)});let a=J("shaders/backgrounds.json"),s=J("shaders/foregrounds.json"),[u,p]=V("bg.pattern",""),[c,h]=z("bg.speed",1),[y,E]=V("fg.pattern",""),[m,b]=z("fg.speed",1),[w,R]=z("sb.spacing",1),[_,N]=z("sb.speed",1),[d,v]=V("sb.anim","fade"),[$,D]=ue("sb.text"),M=!i,x=e.useRef(0);return j(()=>{M&&(x.current+=.016)},16),e.createElement(e.Fragment,null,e.createElement(ye,{className:n.root},e.createElement(e.Fragment,null,e.createElement(G,{zIndex:0,timer:()=>x.current,play:M,speed:c,pattern:u}),e.createElement(G,{zIndex:2,timer:()=>x.current,play:M,speed:m,pattern:y}))),e.createElement(se,{zIndex:1,positionSelector:X(t),play:$&&M,animation:d,speed:_,spacing:w,values:$}),e.createElement(Le,{open:i},e.createElement("div",{style:{padding:"1em"}},e.createElement(C,{variant:"h1",paragraph:!0},"HypnoGen"),e.createElement(f,{container:!0,spacing:2,alignItems:"center"},e.createElement(f,{item:!0,xs:12},e.createElement(C,{variant:"h3"},"Background"),e.createElement(U,{patterns:a??[],pattern:u,speed:c,onChange:({pattern:k,speed:P})=>{p(k),h(P)}})),e.createElement(f,{item:!0,xs:12},e.createElement(C,{variant:"h3"},"Foreground"),e.createElement(U,{patterns:s??[],pattern:y,speed:m,onChange:({pattern:k,speed:P})=>{E(k),b(P)}})),e.createElement(f,{item:!0,xs:12},e.createElement(C,{variant:"h3"},"Subliminals"),e.createElement(re,{animation:d,text:$,speed:_,spacing:w,onChange:({animation:k,speed:P,spacing:L,text:W})=>{v(k),N(P),R(L),D(W)}}))))))}export{we as default};
//# sourceMappingURL=App.js.map
